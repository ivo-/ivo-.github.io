{"version":3,"sources":["initial.js","errors.js","StorageInMemory.js","Menu/Menu.js","util.js","Stats/Stats.js","Slides/Slides.js","Sound.js","DatePicker/DatePicker.js","Editor/popup.js","Editor/PopupTodo.js","Editor/WidgetTodo.js","Editor/WidgetDuration.js","Editor/decorations.js","Agenda/Agenda.js","CheatSheet/CheatSheet.js","Editor/commands.js","Editor/CommandsMenu.js","Editor/setup.js","Editor/Editor.js","App.js","serviceWorker.js","index.js"],"names":["notes","meta","title","tags","todos","done","text","date","duration","images","summary","highlights","content","doc","type","selection","anchor","head","showError","err","alert","console","error","LOCAL_STORAGE_STATE_KEY","LOCAL_STORAGE_SELECTED_KEY","getNoteTemplate","id","arguments","length","undefined","noteData","Object","objectSpread","created_at","Date","updated_at","deleted_at","Storage","firebase","callback","_this","this","classCallCheck","selectNote","state","Error","concat","_selectedNote","window","localStorage","setItem","handleUpdate","addNewNote","getNextNoteId","note","updateNote","data","updateData","_firebase","firestore","Timestamp","now","deleteNote","restoreNote","permanentlyDeleteNote","uploadFile","_userId","auth","currentUser","uid","_handlers","getItem","JSON","parse","initialNotes","reduce","result","_ref","i","objectWithoutProperties","keys","noteExists","Math","max","apply","toConsumableArray","sss","setTimeout","createClass","key","value","f","_this2","push","filter","fn","_len","args","Array","_key","stringify","forEach","h","getSelectedNote","values","sort","a","b","seconds","getNotesList","n","getActiveNotes","tag","instance","getStorage","SideMenu","props","possibleConstructorReturn","getPrototypeOf","call","handleToggleExpanded","e","name","expanded","setState","includes","item","handleToggleHidden","isHidden","handleSearch","search","target","handleClearSearch","handleToggleTag","handleLogOut","signOut","then","location","reload","handleDelete","delete","catch","unsubscribe","subscribe","forceUpdate","react_default","createElement","Menu_Menu","compact","icon","size","Dropdown","Menu","Item","disabled","Label","Icon","displayName","email","Divider","onClick","_this3","store","entries","getNotesByTagsAndDate","map","_ref2","slicedToArray","active","color","_this4","_this$state","selected","allActiveNotes","inactiveNotes","getInactiveNotes","activeNotes","toLowerCase","className","renderUserInfo","floated","link","style","clear","vertical","Input","assign","placeholder","onChange","trim","Message","visible","direction","classNames","stopPropagation","open","Fragment","renderTags","React","Component","formatDate","d","month","getMonth","day","getDate","year","getFullYear","join","getDaysInMonthByWeeks","days","UTC","setDate","weeks","currentWeek","getDay","maxLen","w","unshift","getZeroBasedNum","num","monthNumToName","formatDateTime","moment","format","DAYS_OF_THE_WEEK","matchRecurringDay","_dayOfTheWeekNum","dayOfTheWeekStr","dayOfTheWeekNum","dayIndex","indexOf","_dayOfTheWeekStr$spli","split","_dayOfTheWeekStr$spli2","fromDay","toDay","fromDayIndex","toDayIndex","parseDuration","str","match","slice","Boolean","parseInt","m","s","normalizeDuration","floor","durationToStr","getTextContent","textContent","toVisibleSpaces","toRealSpaces","parseTodoNode","querySelector","clone","cloneNode","from","children","c","classList","contains","parentNode","removeChild","node","innerText","replace","querySelectorAll","toggle","click","toJSON","Stats","today","notDone","words","count","readingTime","hours","minutes","Header","as","subheader","Grid","columns","textAlign","Column","Content","Subheader","Statistic","Group","widths","Value","horizontal","Button","preventDefault","blob","Blob","saveAs","Or","Slides","editor","_useState","useState","_useState2","page","setPage","currentSlide","slides","Pagination","defaultActivePage","totalPages","onPageChange","_","activePage","Segment","dangerouslySetInnerHTML","__html","outerHTML","positive","labelPosition","Howl","volume","src","alarm","Sound","play","_style","display","width","margin","backgroundColor","borderRadius","defineProperty","DatePicker","onSelect","setValue","showTime","isValid","react_datepicker_min_default","inline","toDate","showTimeInput","shouldCloseOnSelect","todayButton","fluid","ModalComponent","_ref$actions","actions","onHide","_ref$rawContent","rawContent","modalProps","handleClose","hidePopup","Modal","onClose","closeIcon","Actions","actionProps","popup","document","ReactDOM","unmountComponentAtNode","innerHTML","showPopup","body","appendChild","render","showDuration","PopupTodo","_React$Component","handleTogglePause","time","paused","pausedAtDuration","componentDidMount","componentWillUnmount","handleStart","automatic","current","handleNextItem","_this$state2","nextItem","nextTime","finished","inherits","_timer","setInterval","bind","clearInterval","_this$state3","currentTime","currentItem","itemDuration","getItemDuration","currentDuration","asSeconds","isNoDurationItem","find","negative","_this$props","onFinish","totalTime","List","verticalAlign","todo","maxDuration","Checkbox","label","defaultChecked","Popup","trigger","_this$props2","_this$state4","renderFinal","url","Image","wrapped","circular","renderInitial","handleClick","WidgetTodo","view","dom","add","WidgetTodo_Menu","action","next","fullTodoList","nextElementSibling","parsedNodes","PopupTodo_PopupTodo","_ref3","reverse","pos","posAtDOM","pN","nodeAt","tr","deleteRange","nodeSize","dispatch","dateNode","createTextNode","TimeTracker","initial","currentTimeRef","setDuration","useEffect","timer","clearTimeout","Timer","_useState3","_useState4","subtract","WidgetDuration","prevText","WidgetDuration_Timer","WidgetDuration_TimeTracker","insertText","k","OpenCloseDecorations","code","folded","WholeNodeDecorations","tableRow","_heading","RepeatableDecorations","quote","bullet","ordered","_todo","genInlineDecorationRegex","char","RegExp","Decorations","hr","bold","italic","highlight","underline","striketrough","toggleFolded","_url","_img","_link","_date","_duration","_checkbox","_counter","_proportion","DecorationsWidgets","decos","Decoration","index","class","nodeName","data-pos","checked","currentNode","resolve","nodeBefore","nodeAfter","todoRegEx","test","widget","data-startpos","data-endpos","href","getCounterWidgets","excludedNodes","excludedInTable","decorationsHandlers","getDecorations","openClose","descendants","isText","isTableRow","regex","exec","closing","opening","nodesBetween","p","getPos","lang","source","hljs","getLanguage","DecorationSet","create","elm","dataset","overlay","menu","WidgetDuration_WidgetDuration","addEventListener","createPopper","placement","startPos","endPos","basic","previousElementSibling","min","Infinity","level","decorations","Plugin","init","decorationsSet","docChanged","getState","matchDate","lastIndex","matchRecurringDate","SMALL_PADDING","BIG_PADDING","Agenda","rerender","startOf","groups","forToday","recurring","dayNum","dayStr","isSame","_recurring$slice","_recurring$slice2","_matchDate$slice","_matchDate$slice2","fromTime","toTime","noHour","withHour","processTodos","info","prevTime","relaxed","divided","spaceTime","asMinutes","FEATURES","CheatSheet","Table","Row","HeaderCell","Body","pattern","keybinding","Cell","collapsing","selectHeader","prop","_state$selection3","$from","to","same","sharedDepth","proseNode","before","nodeDOM","scrollIntoView","block","behavior","offset","setSelection","Selection","near","selectNextHeader","selectPrevHeader","_len2","_key2","insertImage","input","files","file","showHelp","showStats","showSlides","showAgenda","showEditor","insertQuote","schema","replaceSelectionWith","nodes","paragraph","insertCounter","insertQuantity","clickDurationButton","_state$selection5","durationButton","getTodoIndicatorNode","_state$selection7","CommandsMenu","getView","items","v","focus","description","Mousetrap","Schema","group","parseDOM","toDOM","hard_break","selectable","plugins","rules","InputRule","start","end","construct","week","replaceWith","parsed","chrono","insert","parseDate","inputRules","history","dropCursor","gapCursor","keymap","Mod-z","undo","Shift-Mod-z","redo","Mod-i","selectParentNode","Shift-Enter","baseKeymap","Ctrl-Enter","Tab","_state$selection2","domNodes","prev","_getFormattedTable","rows","selectedRow","selectedChar","isLineRow","row","dataRows","separatorRowsIdxs","maxCellsNum","r","table","extraEmptyCells","repeat","_loop","maxWidth","toLength","padStr","fromLength","fromStart","fromEnd","ceil","padBothToLength","outputTable","lineRow","splice","selectedCell","resultCellsLength","nextSelectedRow","nextSelectedCell","getFormattedTable","_getFormattedTable2","posInCell","TextSelection","Enter","_state$selection","$to","NodeSelection","isBlock","parentOffset","canSplit","parent","atEnd","deleteSelection","deflt","depth","contentMatchAt","indexAfter","defaultType","types","can","mapping","canReplace","setNodeMarkup","Ctrl-1","Ctrl-2","Ctrl-3","Ctrl-4","Ctrl-5","Ctrl-r","Ctrl-Shift-r","Ctrl-u","navigator","platform","Mod-Enter","chainCommands","_state$selection6","dateButton","Mod-Shift-Enter","Mod-Shift-8","Mod-ArrowDown","Mod-ArrowUp","Ctrl-y","Ctrl-ArrowDown","Ctrl-ArrowUp","__remountKey","EDITOR_SHOWN","HELP_SHOWN","AGENDA_SHOWN","STATS_SHOWN","SLIDES_SHOWN","Editor","_componentElementRef","createRef","_stickyMenuContextRef","_createEditorView","element","_editorNode","getSelectedNoteContent","_editorState","EditorState","fromJSON","_editorView","EditorView","dispatchTransaction","tx","updateState","getTitle","getTags","getTodos","t","getImages","getSummary","getHighlights","onFocus","handleCTRLDown","keyCode","contentEditable","handleCTRLUp","handleDrop","dataTransfer","uploading","childNodes","tagName","toggleMenuItem","scrollTo","top","shown","toggleHelp","toggleStats","toggleSlides","toggleAgenda","assertThisInitialized","storeUnsubscribe","isServer","destroy","removeEventListener","heading","lastChild","CheatSheet_CheatSheet","Sticky","context","position","CommandsMenu_CommandsMenu","Ref","innerRef","ref","renderMenu","Stats_Stats","Agenda_Agenda","renderHelp","Slides_Slides","App","Menu_SideMenu","src_Editor_Editor","hostname","debug","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","uiConfig","signInOptions","provider","GoogleAuthProvider","PROVIDER_ID","scopes","customParameters","prompt","EmailAuthProvider","requireDisplayName","signInFlow","tosUrl","privacyPolicyUrl","credentialHelper","firebaseui","CredentialHelper","NONE","callbacks","signInSuccessWithAuthResult","authResult","redirectUrl","onAuthStateChanged","user","container","getElementById","createStorage","src_App_0","Store","initUI","ui","AuthUI","prevUI","getInstance","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.7d5ee4dc.chunk.js","sourcesContent":["const notes = [\n\n  {\n    meta: {\n      title: \"!\",\n      tags: [\"tag\"],\n      todos: [\n        {\n          done: false,\n          text: \"    \",\n          date: null,\n          duration: null,\n          images: []\n        },\n        {\n          done: true,\n          text: \"   \",\n          date: null,\n          duration: null,\n          images: []\n        },\n        {\n          done: false,\n          text: \"   \",\n          date: null,\n          duration: null,\n          images: []\n        },\n        {\n          done: false,\n          text: \"   \",\n          date: null,\n          duration: null,\n          images: []\n        },\n        {\n          done: false,\n          text: \"  \",\n          date: null,\n          duration: null,\n          images: []\n        },\n        {\n          done: false,\n          text: \" 1\",\n          date: null,\n          duration: null,\n          images: []\n        },\n        {\n          done: false,\n          text: \"  2\",\n          date: null,\n          duration: null,\n          images: []\n        },\n        {\n          done: false,\n          text: \" Jumping jacks\",\n          date: null,\n          duration: \"30s\",\n          images: []\n        },\n        { done: false, text: \" Rest\", date: null, duration: \"10s\", images: [] },\n        {\n          done: false,\n          text: \" Wall sit\",\n          date: null,\n          duration: \"30s\",\n          images: []\n        },\n        {\n          done: false,\n          text: \" Push-up\",\n          date: null,\n          duration: \"30s\",\n          images: []\n        },\n        {\n          done: false,\n          text: \" Rest \",\n          date: null,\n          duration: \"10s\",\n          images: []\n        },\n        {\n          done: false,\n          text: \" Abdominal crunch \",\n          date: null,\n          duration: \"30s\",\n          images: []\n        },\n        { done: false, text: \" Rest\", date: null, duration: \"10s\", images: [] },\n        {\n          done: false,\n          text: \"Step-up onto a chair  (     )\",\n          date: null,\n          duration: \"30s\",\n          images: []\n        },\n        {\n          done: false,\n          text: \"Get up and make your bed  \",\n          date: \"mon-fri 08:30\",\n          duration: \"5m\",\n          images: []\n        },\n        {\n          done: false,\n          text: \"Brush your teeth  \",\n          date: \"mon-fri 08:35\",\n          duration: \"3m\",\n          images: []\n        },\n        {\n          done: false,\n          text: \"Wash your face  \",\n          date: \"mon-fri 08:38\",\n          duration: \"2m\",\n          images: []\n        },\n        {\n          done: false,\n          text: \"Do a 10 min workout  \",\n          date: \"mon-fri 08:40\",\n          duration: \"10m\",\n          images: []\n        },\n        {\n          done: false,\n          text: \"Meditate for 20 min   \",\n          date: \"mon-fri 08:50\",\n          duration: \"20m\",\n          images: []\n        },\n        {\n          done: false,\n          text: \"Get up and make your bed  \",\n          date: \"sat-sun 10:00\",\n          duration: \"5m\",\n          images: []\n        },\n        {\n          done: false,\n          text: \"Brush your teeth  \",\n          date: \"mon-fri 10:05\",\n          duration: \"3m\",\n          images: []\n        },\n        {\n          done: false,\n          text: \"Brush your teeth \",\n          date: \"everyday 23:00\",\n          duration: null,\n          images: []\n        },\n        {\n          done: false,\n          text: \"Go to bed \",\n          date: \"everyday 23:30\",\n          duration: null,\n          images: []\n        },\n        {\n          done: false,\n          text:\n            \"Call your mother  (        )\",\n          date: \"2020-02-20\",\n          duration: null,\n          images: []\n        },\n        {\n          done: false,\n          text: \"Interview   \",\n          date: \"2020-02-20 12:00\",\n          duration: \"1h\",\n          images: []\n        },\n        {\n          done: false,\n          text: \"[0/10]   \",\n          date: \"2020-02-20\",\n          duration: null,\n          images: []\n        },\n        {\n          done: false,\n          text: \"[0/2] \",\n          date: null,\n          duration: null,\n          images: []\n        },\n        {\n          done: false,\n          text: \"[1/9]  \",\n          date: null,\n          duration: null,\n          images: []\n        }\n      ],\n      images: [],\n      summary:\n        \"! \\n   Private Beta   Prose. Prose    (   -\",\n      highlights: [\n        \"ivailo.nikolaev.hristov@gmail.com\",\n        \"HELP\",\n        \"\",\n        \">\",\n        \"*\",\n        \"-\",\n        \"+\",\n        \"[71/88]\",\n        \"[51]\",\n        \"[-]  [+]\",\n        \"---\",\n        \"...\",\n        \"...\",\n        \"....\",\n        \"[https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png]\",\n        \"TAB\",\n        \"|\",\n        \"TAB\",\n        \"|-\",\n        \"TAB\",\n        \"<today>\",\n        \"<next friday at 5am>\",\n        \"<calendar>\",\n        \"<calendar: 2020-05>\",\n        \"reset\",\n        \"delete completed/unfinished\",\n        \"mark all for today\",\n        \"play\",\n        \"play\",\n        \"automatic\",\n        \"Agenda\",\n        \"<today\",\n        \"mark all for today\",\n        \"continue\",\n        \"countdown\",\n        \"Commands\"\n      ]\n    },\n    content: {\n      doc: {\n        type: \"doc\",\n        content: [\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"#!\" }]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"  Private Beta   Prose. Prose     (   -)    note taking  TODO .  :\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"*Markdown         - , , , ...\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"*      ,    User Interfaces.\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"*       UI  ( UI        ).  UI   ,     .\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"*    TODO , , ,     .        .\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"* TODO ,        .\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"*Agenda view -        ,  (  )   (  ).\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"*Slides view -        .\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"  Markdown   .       markdown    .\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"    , feedback    `ivailo.nikolaev.hristov@gmail.com`.\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"      `HELP`    .\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"##\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"  ,      .\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"***\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"* //\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"* __\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"* ~~ \" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"* ``\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"* http://google.com (         )\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text: \"*[google](http://google.com)markdown   \"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"* #tag (        ,    )\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"## \" }]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"**-  ,    `>`    .\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \">Roses are red\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"> Violets are blue\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \">Some poems ryme\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"> But this one doesn't!\" }]\n          },\n          { type: \"paragraph\" },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"* *-  ,             .\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"1. John Cena\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"2. The Rock\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"3. The Undertaker\" }]\n          },\n          { type: \"paragraph\", content: [{ type: \"text\", text: \"4. Kane\" }] },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"5. Jeff Hardy\" }]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"* *-  ,    `*`       .\"\n              }\n            ]\n          },\n          { type: \"paragraph\", content: [{ type: \"text\", text: \"* Apples\" }] },\n          { type: \"paragraph\", content: [{ type: \"text\", text: \"* Oranges\" }] },\n          { type: \"paragraph\", content: [{ type: \"text\", text: \"* Peaches\" }] },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"*  *-  ,    `-` `+`   . (     )\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"-    \" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"+   \" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"-   \" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"-   \" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"-  \" }]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"*  *-   markdown.\" }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"```javascript\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"var a = 10;\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"var b = 20;\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"var e = 20;\" }]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"function sum(x, y){\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \" alert(x + y);\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \" return x + y;\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \" // comment is here\" }]\n          },\n          { type: \"paragraph\", content: [{ type: \"text\", text: \"}\" }] },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"alert('ffdfd');\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: 'var c = \"fasfasf\";' }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"const c = + b;\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: 'new Error(\"fsdfsdfsdfsdf\");' }]\n          },\n          { type: \"paragraph\", content: [{ type: \"text\", text: \"```\" }] },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"##\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"     Prose ,     UI  . UI     , ,   ..         ,   ,        .\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"**[71/88]            : `[71/88]`\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"**     [51]                : `[51]`\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"**    [-] [-]               : `[-]  [+]`\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"* *- `---`\" }]\n          },\n          { type: \"paragraph\", content: [{ type: \"text\", text: \"---\" }] },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"*  * -    ,    .        .\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"* 2020-01-30\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"*2019-12-20 11:30( )\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"*mon-fri 13:30(  )\" }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"*everyday08:17| mon19:20\" }]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"**-    ,         time tracker.   .\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text: \"* 20h43m15s - 20 , 43    14 \"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"*20m- 20 \" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"* 17s- 17 \" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"* 1h04s- 1   4 \" }]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"*  *\" }]\n          },\n          { type: \"paragraph\", content: [{ type: \"text\", text: \"....\" }] },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"      .\" }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"(    -)\" }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"   `...` `...` .          `....`  .\"\n              }\n            ]\n          },\n          { type: \"paragraph\", content: [{ type: \"text\", text: \"...\" }] },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"**\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \": `[https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png]`\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"[https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png]\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"## \" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"*() 2019*\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"|---------|---------|---------|---------|---------|---------|---------|\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"|*Mon*|*Tue*|*Wed*|*Thu*|*Fri*|*Sat*|*Sun*|\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"|---------|---------|---------|---------|---------|---------|---------|\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"|||||*+*|01.||\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"|02.|03.|04.|05.|06.|07.|08.|\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"|09.|10.|11.|12.|13.|14.|15.|\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"|16.|17.|18.|19.|20.|21.|22.|\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"|23.|24.|25.|26.|27.|28.|29.|\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"|30.|31.||||||\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"|---------|---------|---------|---------|---------|---------|---------|\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"*      `TAB`   .\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"*         `|` `TAB`.\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"*         `|-` `TAB`.\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text: \"*         .\"\n              }\n            ]\n          },\n          { type: \"paragraph\", content: [{ type: \"text\", text: \"##\" }] },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"  ,       .      .\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"*  -`<today>`\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text: \"*    -`<next friday at 5am>`\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text: \"*    - `<calendar>`\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text: \"*    - `<calendar: 2020-05>`\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"##  \" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"      Prose,  TODO .        ,  TODO .\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"- 1\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"-  2\" }]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text: \"Prose     TODO :\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"*`reset`-    .\" }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"*`delete completed/unfinished`-      .\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"*`mark all for today`-       .\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"*`play`-    TODO         .     .\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"`play`               ,   ..         .     `automatic`.\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"- 30sJumping jacks\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"- 10sRest\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"- 30sWall sit\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"- 30sPush-up\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"- 10sRest\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"- 30sAbdominal crunch\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"- 10sRest\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"- Step-up onto a chair 30s(     )\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text: \"*     .\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"##Agenda -   \" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"Prose           .   `Agenda`           TODO   * *,        .         .\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"* *\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text: \"-Get up and make your bedmon-fri 08:305m\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"-Brush your teeth mon-fri 08:353m\" }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"-Wash your facemon-fri 08:382m\" }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"-Do a 10 min workoutmon-fri 08:4010m\" }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"-Meditate for 20 minmon-fri 08:5020m\" }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"*  - weekend*\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text: \"-Get up and make your bed sat-sun10:005m\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"-Brush your teeth mon-fri10:053m\" }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"* *\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"-Brush your teeth everyday 23:00\" }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"-Go to bedeveryday23:30\" }]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"*  *(    ,   `<today`      `mark all for today`)\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"-Call your mother 2020-02-20(        )\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"-Interview 2020-02-2012:001h\" }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"##\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"      ,        . :\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"*Seinfeld *-      ,    .\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text: \"[-]2020-02-20 [-]2020-02-21 [-]2020-02-22\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"*Shopping list*\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"-[0/10]  2020-02-20\" }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"-[0/2]\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"-[1/9] \" }]\n          },\n          { type: \"paragraph\" },\n          { type: \"paragraph\", content: [{ type: \"text\", text: \"**\" }] },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"     ? [0]\" }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"    ? [1438]\" }\n            ]\n          },\n          { type: \"paragraph\" },\n          { type: \"paragraph\", content: [{ type: \"text\", text: \"**\" }] },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"   ? 20m( `continue` )\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"   25m( `countdown` )\"\n              }\n            ]\n          },\n          { type: \"paragraph\", content: [{ type: \"text\", text: \"##\" }] },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"* ( ) -    ,        . (  http://bear.app/)\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"*   -              .\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text: \"* -   * *.\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"* -       (       )\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"* -   `Commands`\" }]\n          },\n          { type: \"paragraph\" },\n          { type: \"paragraph\" },\n          { type: \"paragraph\" }\n        ]\n      },\n      selection: { type: \"text\", anchor: 188, head: 188 }\n    }\n  },\n\n  // {\n  //   content: {\n  //     doc: {\n  //       type: \"doc\",\n  //       content: [\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"#PRD\" }] },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"##\" }]\n  //         },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"---\" }] },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text:\n  //                 \"`Prose` - smart documents anda toolkit for personal organization. You just write markdown and prose performs various automation for you. A toolkit to organize your life and work.\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"##\" }]\n  //         },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"---\" }] },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text:\n  //                 \"            .    ,    .        :\"\n  //             }\n  //           ]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"*  \" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"*      \"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"*  /   \"\n  //             }\n  //           ]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text:\n  //                 \",                        .           . ,               UI  + ,           .\"\n  //             }\n  //           ]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text:\n  //                 \"            UI .\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"## \" }]\n  //         },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"---\" }] },\n  //         { type: \"paragraph\" },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"* Bear\" }] },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"* Evernote\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"* Notion\" }]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \" :\" }]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text:\n  //                 \"1. -    ,   UI .     -    .\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             { type: \"text\", text: \"2.  TODO \" }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"3. \" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"4.   \" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"5.  (    Apple)\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"##\" }]\n  //         },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"---\" }] },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"###  \" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"*  : **\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"* : __\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"*  : //\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"*  : ~~\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"*  : __\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"* : ()\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"*  : ``\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"*  :\" }]\n  //         },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"---\" }] },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: '(  \"---\"    )'\n  //             }\n  //           ]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text:\n  //                 \"^^      .       :\"\n  //             }\n  //           ]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"1. \" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"2. \" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"3. \" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"4. \" }]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"`<Enter>`      .\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text:\n  //                 \"`<Shift+Enter>`   ,        .\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"###\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"  :http://google.com\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text:\n  //                 \"     .         CTRL.\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"  (title)     hover.\"\n  //             }\n  //           ]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"`<CTRL + Click>` -      .\"\n  //             }\n  //           ]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"###\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"###\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"###/\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"###  \" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \" \" }]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"`[ 1/3 ]`[0/3]\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"`[1 ]`   [1]\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"###TODO \" }]\n  //         },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"\" }] },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"\" }] },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"\" }] },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"###\" }] },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"###\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"###\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"|------------------|---------|--------------------|\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"|*Name*|*Age*|*Profession*|\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"|------------------|---------|--------------------|\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"|BradPitt|56|Actor|\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"|BritneySpears|32|Singer/Actor|\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"|DonaldTrump|73|PresidentofUSA|\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"|JeffBezos|52|Entrepeneur|\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"|------------------|---------|--------------------|\"\n  //             }\n  //           ]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"###\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text:\n  //                 \"      ,         .         .\"\n  //             }\n  //           ]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"##-\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"###\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"`< >`\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"`<calendar>`\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"`<calendar: 2019-11>`\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"###\" }]\n  //         },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"Streak:\" }] },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"Labeld checkbox\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"##  \" }]\n  //         },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"---\" }] },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"\" }]\n  //         },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"\" }] },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"\" }] },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"##\" }]\n  //         },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"---\" }] },\n  //         { type: \"paragraph\" },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"##  \" }]\n  //         },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"---\" }] },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text:\n  //                 \"         .     ,       ,   .\"\n  //             }\n  //           ]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"#notify-     \"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             { type: \"text\", text: \"#watch-   AppleWatch\" }\n  //           ]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text:\n  //                 \"   ,      .      ,         .\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"## \" }]\n  //         },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"---\" }] },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"* \" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"`Mod-ArrowUp`\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"`Mod-ArrowDown`\" }]\n  //         },\n  //         { type: \"paragraph\" },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"*  \" }] },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"*\" }] },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"  .\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"## \" }]\n  //         },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"---\" }] },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text:\n  //                 \"*  ->         .\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text:\n  //                 \"*  ->         Iphone  Apple watch app\"\n  //             }\n  //           ]\n  //         },\n  //         { type: \"paragraph\" }\n  //       ]\n  //     },\n  //     selection: { type: \"text\", anchor: 2, head: 2 }\n  //   },\n  //   meta: { title: \"PRD\", tags: [\"\", \"-\", \"notify\", \"watch\"] }\n  // },\n];\n\nexport default notes;\n","export function showError(err) {\n  alert(err);\n  console.error(err);\n}\n","import initialNotes from \"./initial.js\";\nimport { showError } from \"./errors\";\n\nconst LOCAL_STORAGE_STATE_KEY = \"__prose-editor-in-memory-store__\";\nconst LOCAL_STORAGE_SELECTED_KEY = \"__prose-editor-in-memory-store-selected__\";\n\nfunction getNoteTemplate(id, content = null, noteData = {}) {\n  return {\n    id,\n    content,\n    meta: {\n      title: null,\n      tags: []\n    },\n    created_at: new Date(),\n    updated_at: new Date(),\n    deleted_at: null,\n    ...noteData\n  };\n}\n\n// TODO: Move to pro in a callback.\nexport class Storage {\n  constructor(firebase, callback) {\n    this._userId = firebase.auth().currentUser.uid;\n    this._firebase = firebase;\n\n    this._handlers = []; // Storage for update handlers.\n\n    // Selected note is not part of the state as user may have multiple\n    // app instances at the same time. It is kept only in local storage.\n    this._selectedNote =\n      window.localStorage.getItem(LOCAL_STORAGE_SELECTED_KEY) || null;\n\n    // State is the data persisted in Firebase.\n    this.state = window.localStorage.getItem(LOCAL_STORAGE_STATE_KEY)\n      ? JSON.parse(window.localStorage.getItem(LOCAL_STORAGE_STATE_KEY))\n      : {\n          notes: initialNotes.reduce((result, { content, ...noteData }, i) => {\n            result[i + 1] = getNoteTemplate(i + 1, content, noteData);\n            return result;\n          }, {})\n        };\n\n    if (Object.keys(this.state.notes).length === 0) {\n      this.addNewNote();\n    }\n\n    if (!this.noteExists(this._selectedNote)) {\n      this.selectNote(Math.max(...Object.keys(this.state.notes)), true);\n    }\n\n    window.sss = this;\n\n    setTimeout(() => {\n      callback();\n    }, 10);\n  }\n\n  // ===========================================================================\n  // Subscription\n\n  subscribe(f) {\n    this._handlers.push(f);\n    return () => {\n      this._handlers = this._handlers.filter(fn => fn !== f);\n    };\n  }\n\n  handleUpdate(...args) {\n    if (!this.noteExists(this._selectedNote)) {\n      this.selectNote(Math.max(...Object.keys(this.state.notes)), true);\n    }\n\n    if (Object.keys(this.state.notes).length === 0) {\n      this.addNewNote();\n    }\n\n    window.localStorage.setItem(\n      LOCAL_STORAGE_STATE_KEY,\n      JSON.stringify(this.state)\n    );\n\n    this._handlers.forEach(h => h(...args));\n  }\n\n  // ===========================================================================\n  // Selectors\n\n  getSelectedNote() {\n    return this.state.notes[this._selectedNote];\n  }\n\n  getSelectedNoteContent() {\n    return this.getSelectedNote().content;\n  }\n\n  noteExists(id) {\n    return !!this.state.notes[id];\n  }\n\n  getNextNoteId() {\n    return Math.max(...Object.keys(this.state.notes), 0) + 1;\n  }\n\n  getNotesList() {\n    return Object.values(this.state.notes).sort(\n      (a, b) => b.updated_at.seconds - a.updated_at.seconds\n    );\n  }\n\n  getActiveNotes() {\n    return this.getNotesList().filter(n => !n.deleted_at);\n  }\n\n  getInactiveNotes() {\n    return this.getNotesList().filter(n => !!n.deleted_at);\n  }\n\n  getNotesByTagsAndDate() {\n    const result = {};\n    this.getActiveNotes()\n      .sort((a, b) => a.updated_at - b.updated_at)\n      .forEach(note => {\n        note.meta.tags.forEach(tag => {\n          if (!result[tag]) result[tag] = [];\n          result[tag].push(note);\n        });\n      });\n\n    return result;\n  }\n\n  // ===========================================================================\n  // Mutations\n\n  selectNote = id => {\n    if (id === this.selectNote) return;\n\n    if (!this.state.notes[id]) {\n      throw new Error(`No note with id: ${id}`);\n    }\n\n    this._selectedNote = id;\n    window.localStorage.setItem(LOCAL_STORAGE_SELECTED_KEY, id);\n    this.handleUpdate();\n  };\n\n  addNewNote = () => {\n    const id = this.getNextNoteId();\n    const note = getNoteTemplate(id);\n\n    this.state.notes[id] = note;\n    this.selectNote(id);\n  };\n\n  updateNote = (id, data, content) => {\n    const updateData = {\n      ...data,\n      content,\n      updated_at: this._firebase.firestore.Timestamp.now()\n    };\n\n    this.state.notes[id] = {\n      ...this.state.notes[id],\n      ...updateData\n    };\n\n    this.handleUpdate();\n  };\n\n  deleteNote = id => {\n    this.state.notes[id] = {\n      ...this.state.notes[id],\n      deleted_at: this._firebase.firestore.Timestamp.now()\n    };\n    this.handleUpdate();\n  };\n\n  restoreNote = id => {\n    this.state.notes[id] = {\n      ...this.state.notes[id],\n      deleted_at: null\n    };\n    this.handleUpdate();\n  };\n\n  permanentlyDeleteNote = id => {\n    delete this.state.notes[id];\n    this.handleUpdate();\n  };\n\n  // ===========================================================================\n  // Files\n\n  uploadFile = () => {\n    showError(\"Uploading files is not supported in the free version.\");\n  };\n}\n\n// =============================================================================\n// Exports\n\nlet instance = null;\n\nexport function createStorage(...args) {\n  instance = new Storage(...args);\n}\n\nexport function getStorage() {\n  if (!instance) {\n    throw new Error(\"Create store before using it\");\n  }\n  return instance;\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport {\n  Dropdown,\n  Icon,\n  Input,\n  Menu,\n  Label,\n  Button,\n  Segment,\n  Rail,\n  Message,\n  Divider,\n  List\n} from \"semantic-ui-react\";\n\nimport { getStorage } from \"../Storage\";\nimport \"./Menu.css\";\n\nexport default class SideMenu extends React.Component {\n  static propTypes = {\n    firebase: PropTypes.object.isRequired\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isHidden: false,\n      search: \"\",\n      tag: null,\n      expanded: []\n    };\n  }\n\n  // ===========================================================================\n  // Handlers\n\n  handleToggleExpanded = (e, name) => {\n    const { expanded } = this.state;\n    this.setState({\n      expanded: expanded.includes(name)\n        ? expanded.filter(item => item !== name)\n        : [...expanded, name]\n    });\n  };\n\n  handleToggleHidden = () => {\n    this.setState({ isHidden: !this.state.isHidden });\n  };\n\n  handleSearch = e => {\n    this.setState({ search: e.target.value });\n  };\n\n  handleClearSearch = () => {\n    this.setState({ search: \"\" });\n  };\n\n  handleToggleTag = tag => {\n    this.setState({ tag: this.state.tag === tag ? null : tag });\n  };\n\n  handleLogOut = () =>\n    this.props.firebase\n      .auth()\n      .signOut()\n      .then(() => window.location.reload());\n\n  handleDelete = () =>\n    this.props.firebase\n      .auth()\n      .currentUser.delete()\n      .then(() => window.location.reload())\n      .catch(e => {\n        // TODO:\n        alert(\"nooo\");\n      });\n\n  // ===========================================================================\n  // Hooks\n\n  componentDidMount() {\n    this.unsubscribe = getStorage().subscribe(() => this.forceUpdate());\n  }\n\n  componentWillUnmount() {\n    this.unsubscribe();\n  }\n\n  // ===========================================================================\n  // Rendering\n\n  renderUserInfo() {\n    const { currentUser } = this.props.firebase.auth();\n    return (\n      <Menu compact icon size=\"tiny\">\n        <Dropdown item icon=\"user\">\n          <Dropdown.Menu>\n            <Menu.Item disabled>\n              <Label>\n                <Icon name=\"user\" /> {currentUser.displayName}\n              </Label>\n              <br /> <br />\n              <Label>\n                <Icon name=\"mail\" /> {currentUser.email}\n              </Label>\n            </Menu.Item>\n            <Divider />\n            <Dropdown.Item\n              icon=\"log out\"\n              text=\"Logout\"\n              onClick={this.handleLogOut}\n            />\n            <Dropdown.Item\n              icon=\"delete\"\n              text=\"Delete\"\n              onClick={this.handleDelete}\n            />\n            <Dropdown.Item\n              icon=\"edit\"\n              text=\"Edit\"\n              onClick={() => {\n                // TODO:\n                alert(\"TODO:\");\n              }}\n            />\n          </Dropdown.Menu>\n        </Dropdown>\n      </Menu>\n    );\n  }\n\n  renderTags() {\n    const store = getStorage();\n    return (\n      <Menu.Menu>\n        {Object.entries(store.getNotesByTagsAndDate()).map(([tag, notes]) => (\n          <Menu.Item\n            key={tag}\n            active={this.state.tag === tag}\n            onClick={() => this.handleToggleTag(tag)}\n          >\n            #{tag}\n            <Label {...(this.state.tag === tag ? { color: \"teal\" } : {})}>\n              {notes.length}\n            </Label>\n          </Menu.Item>\n        ))}\n      </Menu.Menu>\n    );\n  }\n\n  render() {\n    const { isHidden, search, tag, expanded } = this.state;\n    const store = getStorage();\n    const selected = store.getSelectedNote();\n\n    const allActiveNotes = store.getActiveNotes();\n    const inactiveNotes = store.getInactiveNotes();\n\n    let activeNotes = allActiveNotes;\n    if (search) {\n      const filterFn = n =>\n        n.meta.title.toLowerCase().includes(search.toLowerCase());\n      activeNotes = activeNotes.filter(filterFn);\n    }\n\n    if (tag) {\n      const filterFn = n => n.meta.tags.includes(tag);\n      activeNotes = activeNotes.filter(filterFn);\n    }\n\n    if (isHidden)\n      return (\n        <Menu className=\"Menu--Trigger\" compact icon size=\"tiny\">\n          <Menu.Item name=\"caret square left\" onClick={this.handleToggleHidden}>\n            <Icon name=\"caret square right\" />\n          </Menu.Item>\n        </Menu>\n      );\n\n    return (\n      <section className=\"Menu\">\n        {this.renderUserInfo()}\n        <Menu compact icon size=\"tiny\" floated=\"right\">\n          <Menu.Item link onClick={() => store.addNewNote()}>\n            <Icon name=\"plus\" color=\"olive\" />\n          </Menu.Item>\n        </Menu>\n        <div style={{ clear: \"both\" }}></div>\n        <Menu vertical>\n          <Menu.Item>\n            <Input\n              placeholder=\"Search...\"\n              value={search}\n              onChange={this.handleSearch}\n              {...(!!search.trim()\n                ? {\n                    icon: {\n                      name: \"close\",\n                      link: true,\n                      onClick: this.handleClearSearch\n                    }\n                  }\n                : {})}\n            />\n          </Menu.Item>\n\n          <Menu.Item className=\"Menu--Notes\">\n            Notes\n            {activeNotes.length !== allActiveNotes.length && (\n              <Label>\n                {activeNotes.length} / {allActiveNotes.length}\n              </Label>\n            )}\n            <Divider />\n            <Menu.Menu>\n              {activeNotes.length === 0 && (\n                <Message visible className=\"Menu--Notes--Message\">\n                  No notes found.\n                </Message>\n              )}\n\n              {activeNotes.map(n => (\n                <Dropdown\n                  item\n                  key={n.id}\n                  text={n.meta.title || \"--\"}\n                  direction=\"left\"\n                  className={classNames(n === selected && \"active\")}\n                  onClick={e => {\n                    e.stopPropagation();\n                    store.selectNote(n.id);\n                  }}\n                  {...(n !== selected ? { open: false } : {})}\n                >\n                  <Dropdown.Menu>\n                    <Dropdown.Item\n                      icon=\"archive\"\n                      text=\"Archive\"\n                      onClick={e => {\n                        e.stopPropagation();\n                        store.deleteNote(n.id);\n                      }}\n                    />\n                  </Dropdown.Menu>\n                </Dropdown>\n              ))}\n            </Menu.Menu>\n          </Menu.Item>\n\n          <Menu.Item\n            className={classNames(\n              \"Menu--Archive\",\n              expanded.includes(\"archive\") && \"Menu--Archive-active\"\n            )}\n            onClick={e => this.handleToggleExpanded(e, \"archive\")}\n            active={expanded.includes(\"archive\")}\n          >\n            Archive\n            <Icon name=\"trash\" />\n            {expanded.includes(\"archive\") && (\n              <>\n                <Menu.Menu>\n                  {inactiveNotes.map(n => (\n                    <Dropdown\n                      key={n.id}\n                      item\n                      text={n.meta.title || \"--\"}\n                      direction=\"left\"\n                      className={classNames(n === selected && \"active\")}\n                    >\n                      <Dropdown.Menu>\n                        <Dropdown.Item\n                          icon=\"edit\"\n                          text=\"Open\"\n                          onClick={() => store.selectNote(n.id)}\n                        />\n                        <Dropdown.Item\n                          icon=\"undo\"\n                          text=\"Restore\"\n                          onClick={e => {\n                            e.stopPropagation();\n                            store.restoreNote(n.id);\n                          }}\n                        />\n                        <Dropdown.Item\n                          icon=\"delete\"\n                          text=\"Delete\"\n                          onClick={e => {\n                            e.stopPropagation();\n                            store.permanentlyDeleteNote(n.id);\n                          }}\n                        />\n                      </Dropdown.Menu>\n                    </Dropdown>\n                  ))}\n                </Menu.Menu>\n              </>\n            )}\n          </Menu.Item>\n\n          <Menu.Item>{this.renderTags()}</Menu.Item>\n        </Menu>\n        <Menu compact icon size=\"tiny\" floated=\"right\">\n          <Menu.Item name=\"caret square left\" onClick={this.handleToggleHidden}>\n            <Icon name=\"caret square left\" />\n          </Menu.Item>\n        </Menu>\n      </section>\n    );\n  }\n}\n","import moment from \"moment\";\n\nexport function formatDate(date) {\n  let d = new Date(date),\n    month = \"\" + (d.getMonth() + 1),\n    day = \"\" + d.getDate(),\n    year = d.getFullYear();\n\n  if (month.length < 2) month = \"0\" + month;\n  if (day.length < 2) day = \"0\" + day;\n\n  return [year, month, day].join(\"-\");\n}\n\nexport function getDaysInMonth(month, year) {\n  const date = new Date(Date.UTC(year, month, 1));\n  const days = [];\n  while (date.getMonth() === month) {\n    days.push(new Date(date));\n    date.setDate(date.getDate() + 1);\n  }\n  return days;\n}\n\nexport function getDaysInMonthByWeeks(...args) {\n  const days = getDaysInMonth(...args);\n  const weeks = [];\n\n  let currentWeek = 0;\n  days.forEach(day => {\n    if (!weeks[currentWeek]) weeks[currentWeek] = [];\n    weeks[currentWeek].push(day);\n\n    if (day.getDay() === 0) {\n      currentWeek++;\n    }\n  });\n  const maxLen = Math.max(...weeks.map(w => w.length));\n\n  while (weeks[0].length !== maxLen) {\n    weeks[0].unshift(null);\n  }\n\n  while (weeks[weeks.length - 1].length !== maxLen) {\n    weeks[weeks.length - 1].push(null);\n  }\n\n  return weeks;\n}\n\nexport function getZeroBasedNum(num) {\n  return num < 10 ? `0${num}` : num;\n}\n\nexport const monthNumToName = [\n  \"January\",\n  \"February\",\n  \"March\",\n  \"April\",\n  \"May\",\n  \"June\",\n  \"July\",\n  \"August\",\n  \"September\",\n  \"October\",\n  \"November\",\n  \"December\"\n];\n\n// TODO: refactor\nexport const formatDateTime = item => {\n  return moment(item.seconds * 1000).format(\"MMMM Do YYYY, h:mm:ss a\");\n};\n\nexport const EVERYDAY = \"everyday\";\nexport const DAYS_OF_THE_WEEK = [\n  \"mon\",\n  \"tue\",\n  \"wed\",\n  \"thu\",\n  \"fri\",\n  \"sat\",\n  \"sun\"\n];\n\nexport const matchRecurringDay = (_dayOfTheWeekNum, dayOfTheWeekStr) => {\n  const dayOfTheWeekNum = _dayOfTheWeekNum === 0 ? 6 : _dayOfTheWeekNum - 1;\n  if (dayOfTheWeekStr === EVERYDAY) return true;\n\n  const dayIndex = DAYS_OF_THE_WEEK.indexOf(dayOfTheWeekStr);\n  if (dayIndex !== -1) {\n    return dayOfTheWeekNum === dayIndex;\n  }\n\n  const [fromDay, toDay] = dayOfTheWeekStr.split(\"-\");\n  if (!fromDay || !toDay) return false;\n\n  const fromDayIndex = DAYS_OF_THE_WEEK.indexOf(fromDay);\n  const toDayIndex = DAYS_OF_THE_WEEK.indexOf(toDay);\n  if (fromDayIndex === -1 || toDayIndex === -1) return false;\n\n  return fromDayIndex <= dayOfTheWeekNum && dayOfTheWeekNum <= toDayIndex;\n};\n\n// =============================================================================\n// Duration\n\nexport function msToDuration(ms) {\n  const d = {\n    h: 0,\n    m: 0,\n    s: Math.round(ms / 1000)\n  };\n  normalizeDuration(d);\n  return d;\n}\n\nexport function parseDuration(str) {\n  return parseDurationMatch(str.match(/\\b(\\d\\d?[hms])(\\d\\d?[ms])?(\\d\\d?s)?\\b/));\n}\n\nexport function parseDurationMatch(match) {\n  return match\n    .slice(1)\n    .filter(Boolean)\n    .reduce(\n      (result, item) => {\n        result[item[item.length - 1]] += parseInt(item, 10) * 1;\n        return result;\n      },\n      {\n        h: 0,\n        m: 0,\n        s: 0\n      }\n    );\n}\n\nexport function normalizeDuration(d) {\n  if (d.s >= 60) {\n    d.m += Math.floor(d.s / 60);\n    d.s = d.s % 60;\n  }\n\n  if (d.m >= 60) {\n    d.h += Math.floor(d.m / 60);\n    d.m = d.m % 60;\n  }\n}\n\nexport function durationToStr(d) {\n  return (\n    `${d.h ? d.h + \"h\" : \"\"}${d.m ? d.m + \"m\" : \"\"}${d.s ? d.s + \"s\" : \"\"}` ||\n    \"0s\"\n  );\n}\n\n// =============================================================================\n// Text\n\nexport function getTextContent(n) {\n  return n.textContent.split(\"\\u00a0\").join(\" \");\n}\n\nexport function toVisibleSpaces(text) {\n  return text.split(\" \").join(\"\\u00a0\");\n}\n\nexport function toRealSpaces(text) {\n  return text.split(\"\\u00a0\").join(\" \");\n}\n\n// =============================================================================\n// Todo\n\nexport function parseTodoNode(n) {\n  const date = n.querySelector(\".date\");\n  const duration = n.querySelector(\".duration\");\n\n  const clone = n.cloneNode(true);\n  Array.from(clone.children)\n    .filter(\n      c =>\n        c.classList.contains(\"ProseMirror-widget\") ||\n        // Clean extracted data\n        c.classList.contains(\"duration\") ||\n        c.classList.contains(\"date\") ||\n        c.classList.contains(\"img\") ||\n        c.classList.contains(\"img-text\")\n    )\n    .forEach(c => c.parentNode.removeChild(c));\n\n  return {\n    node: n,\n    done: clone.innerText[0] === \"+\",\n    text: toRealSpaces(clone.innerText.replace(/^(-|\\+)\\s/, \"\")),\n    date: date && toRealSpaces(date.innerText),\n    duration: duration && duration.innerText,\n\n    images: Array.from(n.querySelectorAll(\".img-text\")).map(item =>\n      item.innerText.replace(/(\\[|\\])/g, \"\").trim()\n    ),\n\n    toggle: () => n.querySelector(\"input[type=checkbox]\").click(),\n    toJSON() {\n      const result = { ...this };\n      delete result.node;\n      delete result.toggle;\n      delete result.toJSON;\n\n      return result;\n    }\n  };\n}\n","import React from \"react\";\nimport moment from \"moment\";\nimport { saveAs } from \"file-saver\";\nimport { count } from \"@wordpress/wordcount\";\nimport {\n  Statistic,\n  Header,\n  Icon,\n  Label,\n  Divider,\n  Button,\n  Grid\n} from \"semantic-ui-react\";\n\nimport { getStorage } from \"../Storage\";\nimport { formatDate, formatDateTime, getZeroBasedNum } from \"../util\";\n\nimport \"./Stats.css\";\n\nexport default function Stats({ todos, getTextContent }) {\n  const today = formatDate(new Date());\n  const notDone = todos.filter(item => !item.done);\n  const selected = getStorage().getSelectedNote();\n  const text = getTextContent();\n  const words = count(text, \"words\", {});\n  const readingTime = (d => `${\n    d.hours() ? d.hours() + \"h\" : \"\"\n  }${\" \"}${getZeroBasedNum(d.minutes())}m\n  `)(moment.duration(words / 200, \"minutes\"));\n\n  window.getTextContent = getTextContent;\n  const exportAsText = e => {\n    e.preventDefault();\n    const blob = new Blob([text], { type: \"text/plain;charset=utf-8\" });\n    saveAs(blob, `${selected.meta.title}.txt`);\n  };\n\n  return (\n    <div className=\"Editor--stats\">\n      <Header\n        as=\"h2\"\n        className=\"Stats--title\"\n        content={`Statistics`}\n        subheader={` for ${selected.meta.title}`}\n      />\n      <Grid columns=\"equal\" textAlign=\"center\">\n        <Grid.Column>\n          <Header as=\"h3\">\n            <Icon name=\"time\" />\n            <Header.Content>\n              Creation Date\n              <Header.Subheader>\n                {formatDateTime(selected.created_at)}\n              </Header.Subheader>\n            </Header.Content>\n          </Header>\n        </Grid.Column>\n        <Grid.Column>\n          <Header as=\"h3\">\n            <Icon name=\"time\" />\n            <Header.Content>\n              Modification Date\n              <Header.Subheader>\n                {formatDateTime(selected.updated_at)}\n              </Header.Subheader>\n            </Header.Content>\n          </Header>\n        </Grid.Column>\n      </Grid>\n      <Divider className=\"Stats--divider\" />\n      <Statistic.Group widths={3} className=\"Stats--group\">\n        <Statistic>\n          <Statistic.Value>{notDone.length}</Statistic.Value>\n          <Statistic.Label>items to do</Statistic.Label>\n        </Statistic>\n        <Statistic>\n          <Statistic.Value>\n            {\n              notDone.filter(item => item.date && item.date.includes(today))\n                .length\n            }\n          </Statistic.Value>\n          <Statistic.Label>items to do today</Statistic.Label>\n        </Statistic>\n        <Statistic className=\"Stats--stat\">\n          <Statistic.Value>{todos.length - notDone.length}</Statistic.Value>\n          <Statistic.Label>items done</Statistic.Label>\n        </Statistic>\n      </Statistic.Group>\n      <Statistic.Group widths={3}>\n        <Statistic className=\"Stats--stat\">\n          <Statistic.Value>{text.length}</Statistic.Value>\n          <Statistic.Label>Characters</Statistic.Label>\n        </Statistic>\n        <Statistic className=\"Stats--stat\">\n          <Statistic.Value>{words}</Statistic.Value>\n          <Statistic.Label>Words</Statistic.Label>\n        </Statistic>\n        <Statistic className=\"Stats--stat\" size=\"mini\">\n          <Statistic.Value>{readingTime}</Statistic.Value>\n          <Statistic.Label>Read Time</Statistic.Label>\n        </Statistic>\n      </Statistic.Group>\n      <Grid columns=\"equal\" textAlign=\"center\">\n        <Grid.Column>\n          <Divider horizontal className=\"Stats--divider\">\n            <Header as=\"h4\">\n              <Icon name=\"tags\" color=\"grey\" />\n              Tags\n            </Header>\n          </Divider>\n          {selected.meta.tags.map((tag, i) => (\n            <Label key={tag} as=\"a\" tag>\n              {tag}\n            </Label>\n          ))}\n        </Grid.Column>\n        <Grid.Column>\n          <Divider horizontal className=\"Stats--divider\">\n            <Header as=\"h4\">\n              <Icon name=\"download\" color=\"grey\" />\n              Download\n            </Header>\n          </Divider>\n          <Button.Group>\n            <Button onClick={exportAsText}>.TXT</Button>\n            <Button.Or />\n            <Button disabled>.PDF</Button>\n            <Button.Or />\n            <Button disabled>.HTML</Button>\n          </Button.Group>\n        </Grid.Column>\n      </Grid>\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\nimport { Pagination, Segment, Button } from \"semantic-ui-react\";\n\nimport \"./Slides.css\";\n\nexport default function Slides({ editor }) {\n  const [page, setPage] = useState(0);\n  const content = editor.querySelector(\".ProseMirror\").cloneNode(true);\n\n  let currentSlide = [];\n  const slides = [currentSlide];\n  Array.from(content.children).forEach((node, i) => {\n    if (i === 0) {\n      currentSlide.push(node);\n      return;\n    }\n\n    if (node.classList.contains(\"heading\")) {\n      currentSlide = [node];\n      slides.push(currentSlide);\n      return;\n    }\n\n    currentSlide.push(node);\n  });\n\n  return (\n    <div className=\"Editor--slides\">\n      <Pagination\n        defaultActivePage={1}\n        totalPages={slides.length}\n        onPageChange={(_, { activePage }) => {\n          setPage(activePage - 1);\n        }}\n      />\n      <Segment>\n        <div\n          dangerouslySetInnerHTML={{\n            __html: slides[page].map(node => node.outerHTML).join(\"\")\n          }}\n        />\n      </Segment>\n\n      <Button\n        content=\"Download\"\n        positive\n        icon=\"down arrow\"\n        labelPosition=\"left\"\n        floated=\"right\"\n      />\n      <Button\n        content=\"Preview\"\n        icon=\"play\"\n        labelPosition=\"left\"\n        floated=\"right\"\n      />\n      <div style={{ clear: \"both\" }} />\n    </div>\n  );\n}\n","import { Howl } from \"howler\";\n\nconst click = new Howl({\n  volume: 0.3,\n  src: [\"/click.mp3\"]\n});\n\nconst alarm = new Howl({\n  volume: 0.9,\n  src: [\"/alarm.mp3\"]\n});\n\nexport default {\n  click: () => click.play(),\n  alarm: () => alarm.play()\n};\n","import moment from \"moment\";\nimport React, { useState } from \"react\";\nimport OriginalDatePicker from \"react-datepicker\";\nimport { Button } from \"semantic-ui-react\";\n\nimport \"react-datepicker/dist/react-datepicker.css\";\n\nconst style = {\n  display: \"inline-block\",\n  width: \"4rem\",\n  margin: \"2px\",\n  backgroundColor: \"#216ba5\",\n  borderRadius: \".3rem\",\n  color: \"#fff\",\n  width: \"56px\",\n  height: \"21px\",\n  cursor: \"pointer\",\n  position: \"relative\",\n  textAlign: \"center\"\n};\n\nexport function DatePicker({ selected, onSelect, ...props }) {\n  const [value, setValue] = useState(moment(selected));\n  const showTime = moment(selected, \"YYYY-MM-DD HH:mm\", true).isValid();\n\n  return (\n    <OriginalDatePicker\n      inline\n      selected={value.toDate()}\n      showTimeInput={showTime}\n      shouldCloseOnSelect={false}\n      todayButton=\"Select Today\"\n      onChange={date => {\n        setValue(moment(date));\n      }}\n      {...props}\n    >\n      <Button\n        positive\n        fluid\n        onClick={() => {\n          onSelect(value.format(showTime ? \"YYYY-MM-DD HH:mm\" : \"YYYY-MM-DD\"));\n        }}\n      >\n        Close\n      </Button>\n    </OriginalDatePicker>\n  );\n}\n","import React, { useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Modal, Image, Header, Button } from \"semantic-ui-react\";\n\nexport function ModalComponent({\n  title,\n  content,\n  actions = [],\n  onHide,\n  rawContent = false,\n  ...modalProps\n}) {\n  const handleClose = () => {\n    hidePopup();\n    if (onHide) onHide();\n  };\n\n  return (\n    <Modal onClose={handleClose} open closeIcon {...modalProps}>\n      {title && <Modal.Header>{title}</Modal.Header>}\n      {rawContent ? content : <Modal.Content>{content}</Modal.Content>}\n      {actions.length > 0 && (\n        <Modal.Actions>\n          {actions.map(({ text, fn, ...actionProps }, i) => (\n            <Button\n              key={i}\n              onClick={fn === \"hide\" ? handleClose : fn}\n              {...actionProps}\n            >\n              {text}\n            </Button>\n          ))}\n        </Modal.Actions>\n      )}\n    </Modal>\n  );\n}\n\nconst popup = document.createElement(\"div\");\nexport function hidePopup() {\n  if (popup.parentNode) popup.parentNode.removeChild(popup);\n  ReactDOM.unmountComponentAtNode(popup);\n  popup.innerHTML = \"\";\n}\n\nexport function showPopup(props) {\n  if (!popup.parentNode) document.body.appendChild(popup);\n  ReactDOM.render(<ModalComponent {...props} />, popup);\n}\n","import moment from \"moment\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  Modal,\n  Grid,\n  Icon,\n  Label,\n  Button,\n  Header,\n  Image,\n  Divider,\n  List,\n  Checkbox,\n  Popup\n} from \"semantic-ui-react\";\n\nimport Sound from \"../Sound\";\nimport {\n  msToDuration,\n  durationToStr,\n  getZeroBasedNum,\n  parseDuration\n} from \"../util\";\nimport { hidePopup } from \"./popup\";\n\nconst showDuration = d => (\n  <>\n    {d.hours() ? getZeroBasedNum(d.hours()) + \":\" : \"\"}\n    {getZeroBasedNum(d.minutes())}:{getZeroBasedNum(d.seconds())}\n  </>\n);\n\nexport class PopupTodo extends React.Component {\n  static propTypes = {\n    todos: PropTypes.arrayOf(\n      PropTypes.shape({\n        text: PropTypes.string.isRequired,\n        images: PropTypes.arrayOf(PropTypes.string).isRequired,\n        date: PropTypes.string,\n        duration: PropTypes.string\n      }).isRequired\n    ),\n    onFinish: PropTypes.func.isRequired\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      time: new Date(),\n      data: [],\n      current: -1,\n      finished: false,\n      automatic: false,\n\n      paused: false,\n      pausedAtDuration: 0\n    };\n  }\n\n  componentDidMount() {\n    this._timer = setInterval(this.forceUpdate.bind(this), 1000);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this._timer);\n  }\n\n  componentDidUpdate() {\n    const { todos } = this.props;\n    const { time, current, automatic, finished } = this.state;\n\n    if (finished) return;\n    if (!automatic) return;\n\n    const currentTime = new Date();\n    const currentItem = todos[current];\n    const itemDuration = this.getItemDuration(currentItem);\n    const currentDuration = moment.duration(currentTime - time);\n\n    if (itemDuration.asSeconds() < currentDuration.asSeconds()) {\n      Sound.alarm();\n      this.handleNextItem(true);\n    }\n  }\n\n  handleTogglePause = () => {\n    const { time, paused, pausedAtDuration } = this.state;\n    if (paused) {\n      this.componentDidMount();\n    } else {\n      this.componentWillUnmount();\n    }\n\n    this.setState({\n      paused: !paused,\n      ...(paused\n        ? {\n            time: new Date() - pausedAtDuration,\n            pausedAtDuration: 0\n          }\n        : {\n            pausedAtDuration: new Date() - time\n          })\n    });\n  };\n\n  handleStart = automatic => {\n    this.setState({\n      automatic,\n      current: 0,\n      time: new Date()\n    });\n  };\n\n  handleNextItem = done => {\n    const { todos } = this.props;\n    const { current, data, time } = this.state;\n\n    const nextItem = current + 1;\n    const nextTime = new Date();\n\n    this.setState({\n      time: nextTime,\n      data: [\n        ...data,\n        {\n          done,\n          time: nextTime - time\n        }\n      ],\n      current: nextItem,\n      finished: nextItem === todos.length\n    });\n  };\n\n  getItemDuration(item) {\n    if (!item || !item.duration) return null;\n\n    const d = parseDuration(item.duration);\n    return moment.duration({\n      seconds: d.s,\n      minutes: d.m,\n      hours: d.h\n    });\n  }\n\n  getCurrentItem() {\n    return this.props.todos[this.state.current];\n  }\n\n  // ===========================================================================\n  // Rendering\n\n  renderInitial() {\n    const { todos } = this.props;\n    const isNoDurationItem = todos.find(item => !item.duration);\n\n    return (\n      <Modal.Content>\n        <Grid textAlign=\"center\" columns={1}>\n          <Grid.Column>\n            By playing a Todo list you will go trough all the tasks in it. In{\" \"}\n            <u>Manual mode</u> you will manually switch tasks. In{\" \"}\n            <u>Automatic mode</u> a task will be marked as complete when its\n            duration is over and the next task will be stared.{\" \"}\n            <u>Automatic mode</u> is disabled unless all tasks have durations.\n          </Grid.Column>\n          <Grid.Column>\n            <Button.Group>\n              <Button negative onClick={() => this.handleStart(false)}>\n                Manual\n              </Button>\n              <Button.Or text=\"or\" />\n              <Button\n                positive\n                disabled={!!isNoDurationItem}\n                onClick={() => this.handleStart(true)}\n              >\n                Automatic\n              </Button>\n            </Button.Group>\n          </Grid.Column>\n        </Grid>\n      </Modal.Content>\n    );\n  }\n\n  renderFinal() {\n    const { data } = this.state;\n    const { todos, onFinish } = this.props;\n    const totalTime = moment.duration(\n      data.reduce((result, { time }) => result + time, 0)\n    );\n    return (\n      <>\n        <Modal.Header>\n          <Label color=\"black\" size=\"small\">\n            {data.filter(d => d.done).length} / {data.length}\n          </Label>{\" \"}\n          items done\n        </Modal.Header>\n        <Modal.Content>\n          <List verticalAlign=\"middle\">\n            {data.map(({ done, time }, i) => {\n              const todo = todos[i];\n              const duration = moment.duration(time);\n              const maxDuration = this.getItemDuration(todo);\n\n              return (\n                <List.Item key={i}>\n                  <List.Content floated=\"right\">\n                    {showDuration(duration)}\n                    {maxDuration && \"/\"}\n                    {maxDuration && showDuration(maxDuration)}\n                  </List.Content>\n                  <Checkbox\n                    label={{\n                      children: todo.text,\n                      className: \"TodoPopup--item-label\"\n                    }}\n                    defaultChecked={done}\n                    disabled\n                  />\n                </List.Item>\n              );\n            })}\n          </List>\n          <Divider />\n          Total time: {showDuration(totalTime)}\n        </Modal.Content>\n        <Modal.Actions className=\"TodoPopup--footer\">\n          <Popup\n            content=\"Todo items statuses will be updated and statistics data will be stored.\"\n            trigger={\n              <Button\n                positive\n                onClick={() => {\n                  onFinish(data);\n                }}\n              >\n                Close & Update\n              </Button>\n            }\n          />\n          <Button onClick={hidePopup}>Close</Button>\n        </Modal.Actions>\n      </>\n    );\n  }\n\n  render() {\n    const { todos, onFinish } = this.props;\n    const { current, data, time, finished, automatic, paused } = this.state;\n\n    const currentTime = new Date();\n    const currentItem = todos[current];\n    const itemDuration = this.getItemDuration(currentItem);\n    const currentDuration = moment.duration(currentTime - time);\n\n    if (finished) {\n      return this.renderFinal();\n    }\n\n    if (!currentItem) {\n      return this.renderInitial();\n    }\n\n    return (\n      <>\n        <Modal.Header>\n          <Label className=\"TodoPopup--item-count\" color=\"black\" size=\"small\">\n            {current + 1} / {todos.length}\n          </Label>\n          {currentItem.text}\n          <br />\n          <Label className=\"TodoPopup--item-date\" as=\"span\" size=\"small\">\n            <Icon name={\"calendar\"} />\n            {currentItem.date}\n          </Label>\n        </Modal.Header>\n        <Modal.Content>\n          {currentItem.images.length > 0 && (\n            <>\n              <div className=\"TodoPopup--images\">\n                {currentItem.images.map((url, i) => (\n                  <Image key={i} wrapped size=\"medium\" src={url} />\n                ))}\n              </div>\n              <Divider />\n            </>\n          )}\n          <Grid textAlign=\"center\" columns={1}>\n            <Grid.Column>\n              <Label circular as=\"span\" size=\"massive\" color=\"olive\">\n                <Icon name={\"stopwatch\"} />\n                {showDuration(currentDuration)}\n                {itemDuration && \"/\"}\n                {itemDuration && showDuration(itemDuration)}\n              </Label>\n            </Grid.Column>\n          </Grid>\n        </Modal.Content>\n        <Modal.Actions className=\"TodoPopup--footer\">\n          {automatic && (\n            <Button onClick={this.handleTogglePause}>\n              {paused ? \"Resume\" : \"Pause\"}\n            </Button>\n          )}\n          <Button onClick={() => this.handleNextItem(false)}>Skip</Button>\n          <Button positive onClick={() => this.handleNextItem(true)}>\n            Done\n          </Button>\n        </Modal.Actions>\n      </>\n    );\n  }\n}\n","import moment from \"moment\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {\n  List,\n  Image,\n  Button,\n  Dropdown,\n  Label,\n  Icon,\n  Grid\n} from \"semantic-ui-react\";\n\nimport { showPopup, hidePopup } from \"./popup\";\nimport { PopupTodo } from \"./PopupTodo\";\nimport { parseTodoNode, toVisibleSpaces } from \"../util\";\n\nconst Menu = ({ handleClick }) => (\n  <>\n    <button className=\"trigger\">...</button>\n    <div className=\"options\">\n      <List selection verticalAlign=\"middle\">\n        <List.Item onClick={handleClick} value=\"play\">\n          <List.Content floated=\"right\">CTRL+Enter</List.Content>\n          <Icon name=\"video play\" color=\"olive\" />\n          <List.Content>\n            <List.Header>Play</List.Header>\n          </List.Content>\n        </List.Item>\n        <List.Item onClick={handleClick} value=\"reset\">\n          <List.Content floated=\"right\">CTRL+R</List.Content>\n          <Icon name=\"retweet\" color=\"olive\" />\n          <List.Content>\n            <List.Header>Reset</List.Header>\n          </List.Content>\n        </List.Item>\n        <List.Item onClick={handleClick} value=\"delete_completed\">\n          <List.Content floated=\"right\">CTRL+Shift-R</List.Content>\n          <Icon name=\"delete\" color=\"olive\" />\n          <List.Content>\n            <List.Header>Delete Completed</List.Header>\n          </List.Content>\n        </List.Item>\n        <List.Item onClick={handleClick} value=\"delete_unfinished\">\n          <List.Content floated=\"right\"></List.Content>\n          <Icon name=\"delete\" color=\"olive\" />\n          <List.Content>\n            <List.Header>\n              Delete\n              <br />\n              Unfinished\n            </List.Header>\n          </List.Content>\n        </List.Item>\n        <List.Item onClick={handleClick} value=\"mark_today\">\n          <List.Content floated=\"right\"></List.Content>\n          <Icon name=\"calendar alternate outline\" color=\"olive\" />\n          <List.Content>\n            <List.Header>\n              Mark all\n              <br /> for Today\n            </List.Header>\n          </List.Content>\n        </List.Item>\n      </List>\n    </div>\n  </>\n);\n\nexport const WidgetTodo = view => {\n  const dom = document.createElement(\"div\");\n  dom.classList.add(\"indicator\");\n  dom.classList.add(\"todo-indicator\");\n\n  const handleClick = (e, { value: action }) => {\n    e.preventDefault();\n    const node = e.target;\n\n    const fullTodoList = [dom.parentNode];\n\n    let next;\n    while (\n      (next = fullTodoList[fullTodoList.length - 1]) &&\n      (next = next.nextElementSibling) &&\n      !!next.querySelector(\".todo\")\n    ) {\n      fullTodoList.push(next);\n    }\n\n    switch (action) {\n      case \"play\": {\n        const parsedNodes = fullTodoList\n          .map(n => parseTodoNode(n))\n          .filter(n => !n.done);\n\n        const onFinish = data => {\n          data.forEach(({ done, time }, i) => {\n            const node = parsedNodes[i];\n\n            if (done && !node.done) {\n              node.toggle();\n            }\n\n            hidePopup();\n          });\n        };\n        showPopup({\n          size: \"mini\",\n          rawContent: true,\n          content: <PopupTodo todos={parsedNodes} onFinish={onFinish} />\n        });\n\n        return;\n      }\n\n      case \"reset\": {\n        fullTodoList\n          .map(n => parseTodoNode(n))\n          .forEach(n => n.done && n.toggle());\n        return;\n      }\n      case \"delete_unfinished\":\n      case \"delete_completed\": {\n        fullTodoList\n          .map(n => parseTodoNode(n))\n          .filter(n => (action === \"delete_unfinished\" ? !n.done : n.done))\n          .reverse() // If we don't delete in reverse, prosemirror removes nodes\n          .forEach(n => {\n            const { node } = n;\n            if (!node.parentNode) return;\n\n            const pos = view.posAtDOM(node);\n            const pN = view.state.doc.nodeAt(pos);\n            const tr = view.state.tr.deleteRange(pos - 2, pos + pN.nodeSize);\n            view.dispatch(tr);\n          });\n        return;\n      }\n\n      case \"mark_today\": {\n        fullTodoList\n          .map(n => n.querySelector(\".date\"))\n          .filter(Boolean)\n          .forEach(n => n.parentNode.removeChild(n));\n        fullTodoList.forEach(n => {\n          const date = toVisibleSpaces(\" \") + moment().format(\"YYYY-MM-DD\");\n          const dateNode = document.createTextNode(date);\n          n.appendChild(dateNode);\n        });\n        return;\n      }\n      default:\n        return;\n    }\n  };\n\n  ReactDOM.render(<Menu {...{ handleClick }} />, dom);\n\n  return dom;\n};\n","import moment from \"moment\";\nimport ReactDOM from \"react-dom\";\nimport React, { useState, useEffect } from \"react\";\nimport { Label, Icon, Grid, List } from \"semantic-ui-react\";\n\nimport Sound from \"../Sound\";\nimport { showPopup } from \"./popup\";\nimport {\n  getZeroBasedNum,\n  durationToStr,\n  normalizeDuration,\n  parseDurationMatch\n} from \"../util\";\n\nconst TimeTracker = ({ duration: initial, currentTimeRef }) => {\n  const [duration, setDuration] = useState(\n    moment.duration({\n      seconds: initial.s,\n      minutes: initial.m,\n      hours: initial.h\n    })\n  );\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      currentTimeRef.value = duration.clone().add(moment.duration(1, \"s\"));\n      setDuration(currentTimeRef.value);\n    }, 1000);\n    return () => {\n      clearTimeout(timer);\n    };\n  });\n\n  return (\n    <Grid textAlign=\"center\" columns={1}>\n      <Grid.Column>\n        <Label circular as=\"span\" size=\"massive\" color=\"olive\">\n          <Icon name=\"stopwatch\" />\n          {duration.hours() ? getZeroBasedNum(duration.hours()) : \"\"}\n          {getZeroBasedNum(duration.minutes())}:\n          {getZeroBasedNum(duration.seconds())}\n        </Label>\n      </Grid.Column>\n    </Grid>\n  );\n};\n\nconst Timer = ({ duration: initial }) => {\n  const [duration, setDuration] = useState(\n    moment.duration({\n      seconds: initial.s,\n      minutes: initial.m,\n      hours: initial.h\n    })\n  );\n\n  useEffect(() => {\n    if (duration.asSeconds() === 0) {\n      Sound.alarm();\n      Sound.alarm();\n      return () => {};\n    }\n\n    const timer = setTimeout(() => {\n      setDuration(duration.clone().subtract(moment.duration(1, \"s\")));\n    }, 1000);\n    return () => {\n      clearTimeout(timer);\n    };\n  });\n\n  return (\n    <Grid textAlign=\"center\" columns={1}>\n      <Grid.Column>\n        <Label circular as=\"span\" size=\"massive\" color=\"olive\">\n          <Icon name={duration.asSeconds() === 0 ? \"check\" : \"stopwatch\"} />\n          {duration.hours() ? getZeroBasedNum(duration.hours()) : \"\"}\n          {getZeroBasedNum(duration.minutes())}:\n          {getZeroBasedNum(duration.seconds())}\n        </Label>\n      </Grid.Column>\n    </Grid>\n  );\n};\n\nexport const WidgetDuration = ({ match, view, pos, text: prevText }) => {\n  const handleContinue = () => {\n    const currentTimeRef = { value: null };\n    showPopup({\n      size: \"mini\",\n      content: <TimeTracker duration={match} currentTimeRef={currentTimeRef} />,\n      actions: [\n        {\n          text: \"Stop\",\n          fn: \"hide\"\n        }\n      ],\n      onHide: () => {\n        if (currentTimeRef.value) {\n          const d = {\n            h: currentTimeRef.value.hours(),\n            m: currentTimeRef.value.minutes(),\n            s: currentTimeRef.value.seconds()\n          };\n          view.dispatch(\n            view.state.tr.insertText(\n              durationToStr(d),\n              pos + 1,\n              pos + prevText.length + 1\n            )\n          );\n        }\n      }\n    });\n  };\n\n  const handleCountdown = () => {\n    showPopup({\n      size: \"mini\",\n      content: <Timer duration={match} />,\n      actions: [\n        {\n          text: \"Close\",\n          fn: \"hide\"\n        }\n      ]\n    });\n  };\n  const handleDouble = () => {\n    const m = { ...match };\n\n    Object.keys(m).forEach(k => {\n      m[k] = m[k] * 2;\n    });\n\n    normalizeDuration(m);\n\n    const text = durationToStr(m);\n    view.dispatch(\n      view.state.tr.insertText(text, pos + 1, pos + prevText.length + 1)\n    );\n  };\n\n  return (\n    <div className=\"options\">\n      <List selection verticalAlign=\"middle\">\n        <List.Item onClick={handleCountdown}>\n          <List.Content floated=\"right\">CTRL + Enter</List.Content>\n          <Icon name=\"stopwatch\" color=\"olive\" />\n          <List.Content>\n            <List.Header id=\"duration--countdown\">Countdown</List.Header>\n          </List.Content>\n        </List.Item>\n\n        <List.Item onClick={handleContinue}>\n          <List.Content floated=\"right\">CTRL + Shift + Enter</List.Content>\n          <Icon name=\"clock\" color=\"olive\" />\n          <List.Content>\n            <List.Header id=\"duration--continue\">Continue</List.Header>\n          </List.Content>\n        </List.Item>\n\n        <List.Item onClick={handleDouble}>\n          <List.Content floated=\"right\">CTRL + Shift + 8</List.Content>\n          <Icon name=\"angle double up\" color=\"olive\" />\n          <List.Content>\n            <List.Header id=\"duration--double\">Double</List.Header>\n          </List.Content>\n        </List.Item>\n      </List>\n    </div>\n  );\n};\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport hljs from \"highlight.js\";\nimport classNames from \"classnames\";\nimport { Plugin } from \"prosemirror-state\";\nimport { Decoration, DecorationSet } from \"prosemirror-view\";\nimport { createPopper } from \"@popperjs/core\";\n\nimport Sound from \"../Sound\";\nimport { DatePicker } from \"../DatePicker/DatePicker\";\nimport { WidgetTodo } from \"./WidgetTodo\";\nimport { WidgetDuration } from \"./WidgetDuration\";\nimport { hidePopup, showPopup } from \"./popup\";\nimport {\n  formatDate,\n  parseDuration,\n  getTextContent,\n  toVisibleSpaces\n} from \"../util\";\n\nimport \"highlight.js/styles/arta.css\";\n\n/**\n * Decorations that require the same open and close strings\n * and capture all the lines in between.\n *\n * NOTE: These work on the wrapper node, not on the text node.\n */\nexport const OpenCloseDecorations = {\n  code: /^```/gi,\n  folded: /^\\.\\.\\.$/gi\n};\n\nexport const WholeNodeDecorations = {\n  // NOTE: Table row is also handled repeatably.\n  tableRow: /^\\|(?:\\s|-|=).*$/gi,\n  _heading: /^(#{1,5})\\s.*$/gi // Underscored names are skipped.\n};\n\nexport const RepeatableDecorations = {\n  quote: /^>(?=\\s)/gi,\n  bullet: /^\\s*\\*(?=\\s)/gi,\n  ordered: /^\\s*(\\d+)\\.(?=\\s)/gi,\n  _todo: /^(-|\\+)(?=\\s)/gi\n};\n\nfunction genInlineDecorationRegex(char) {\n  return new RegExp(\n    `(?<=\\\\s|^)\\\\${char}(?!\\\\s)[^\\\\${char}]+(?<!\\\\s)\\\\${char}`,\n    \"gi\"\n  );\n}\n/**\n * These work on the text node.\n */\nexport const Decorations = {\n  hr: /^---$/gi,\n  tag: /(?<=\\s|^)#[^\\b\\s#\\-_`]+/gi,\n\n  bold: genInlineDecorationRegex(\"*\"),\n  italic: genInlineDecorationRegex(\"/\"),\n  highlight: genInlineDecorationRegex(\"`\"),\n  underline: genInlineDecorationRegex(\"_\"),\n  striketrough: genInlineDecorationRegex(\"~\"),\n\n  toggleFolded: /^\\.\\.\\.\\.$/gi,\n\n  // Alternative date without widget.\n  date: new RegExp(\n    \"(\" +\n      //\n      \"everyday\" +\n      \"|mon\" +\n      \"|tue\" +\n      \"|wed\" +\n      \"|thu\" +\n      \"|fri\" +\n      \"|sat\" +\n      \"|sun\" +\n      \"|mon-tue\" +\n      \"|mon-wed\" +\n      \"|mon-thu\" +\n      \"|mon-fri\" +\n      \"|mon-sat\" +\n      \"|mon-sun\" +\n      \"|tue-wed\" +\n      \"|tue-thu\" +\n      \"|tue-fri\" +\n      \"|tue-sat\" +\n      \"|tue-sun\" +\n      \"|wed-thu\" +\n      \"|wed-fri\" +\n      \"|wed-sat\" +\n      \"|wed-sun\" +\n      \"|thu-fri\" +\n      \"|thu-sat\" +\n      \"|thu-sun\" +\n      \"|fri-sat\" +\n      \"|fri-sun\" +\n      \"|sat-sun\" +\n      \")\" +\n      \"(:?\\\\s(\\\\d\\\\d):(\\\\d\\\\d))?(?=\\\\s|$)\",\n    \"gi\"\n  ),\n\n  // NOTE: If name starts with `_`, standard decoration won't be\n  // created. This can be used if we some special handling in\n  // with DecorationsWidgets function.\n  _url: /(?<=[^\\S]|^)(((https?:\\/\\/)|(www\\.))(\\S+))/gi,\n  _img: /(?<=\\s|^)\\[(https:\\/\\/[^\\]]+)\\](?=\\s|$)/gi,\n  _link: /\\[([\\w\\s\\d]+)\\]\\((https?:\\/\\/[\\w\\d./?=#]+)\\)/gi,\n  _date: /\\s(\\d\\d\\d\\d)-(\\d\\d)-(\\d\\d)(:?\\s(\\d\\d):(\\d\\d))?(?=\\s|$)/gi,\n  _duration: /\\s(\\d\\d?[hms])(\\d\\d?[ms])?(\\d\\d?s)?(?=\\s|$)/gi,\n  _checkbox: /(?<=\\s|^)\\[(\\+|-)\\](?=\\s)/gi,\n\n  _counter: /(?<=\\s|^)\\[(\\d+)\\](?=\\s|$)/gi,\n  _proportion: /(?<=\\s|^)\\[(\\d+)\\/(\\d+)\\](?=\\s|$)/gi,\n\n  ...RepeatableDecorations\n};\n\n/**\n * Some decorations require additional widgets.\n */\nexport const DecorationsWidgets = {\n  _todo: getTodoWidgets,\n  _duration: getDurationWidgets,\n  _date: getDateWidgets,\n  _url: getUrlWidgets,\n  _link: getLinkWidgets,\n  _img: getImgWidgets,\n  _checkbox: getCheckboxWidgets,\n  _counter: getCounterWidgets,\n  _proportion: getCounterWidgets,\n  _heading: getHeadingWidgets\n};\n\n/**\n * Decorations won't be visible inside specified nodes.\n */\nconst excludedNodes = {};\n\n/**\n * We don't want some of the decorations inside a table.\n */\nconst excludedInTable = {\n  date: true,\n  duration: true,\n\n  _counter: true,\n  _proportion: true\n};\n\n/**\n * Handlers are delegated (live) events on click.\n *\n * className -> handler(e, element, view)\n */\nexport const decorationsHandlers = {};\n\nfunction getDecorations(doc) {\n  let decos = [];\n  let openClose = {};\n\n  doc.descendants((node, pos) => {\n    if (excludedNodes[doc.resolve(pos).node().type.name]) return;\n\n    if (node.isText) {\n      const isTableRow = !!node.text.match(WholeNodeDecorations[\"tableRow\"]);\n      Object.keys(Decorations).forEach(name => {\n        const regex = Decorations[name];\n        while (true) {\n          let m = regex.exec(node.text);\n          if (!m) return;\n\n          if (excludedInTable[name] && isTableRow) {\n            return;\n          }\n\n          if (name[0] !== \"_\") {\n            decos.push(\n              Decoration.inline(pos + m.index, pos + m.index + m[0].length, {\n                class: name\n              })\n            );\n          }\n\n          if (DecorationsWidgets[name]) {\n            decos.push(...DecorationsWidgets[name](m, pos, doc, node));\n          }\n        }\n      });\n\n      return;\n    }\n\n    Object.keys(WholeNodeDecorations).forEach(name => {\n      const regex = WholeNodeDecorations[name];\n      while (true) {\n        let m = regex.exec(getTextContent(node));\n        if (!m) return;\n\n        if (name[0] !== \"_\") {\n          decos.push(\n            Decoration.node(pos + m.index, pos + m.index + node.nodeSize, {\n              class: name\n            })\n          );\n        }\n\n        if (DecorationsWidgets[name]) {\n          decos.push(...DecorationsWidgets[name](m, pos, doc, node));\n        }\n      }\n    });\n\n    // NOTE: Every header resets `openClose` pairs.\n    if (/^(#{1,5})\\s.*$/gi.test(getTextContent(node))) {\n      openClose = {};\n    }\n    Object.keys(OpenCloseDecorations).forEach(name => {\n      const regex = OpenCloseDecorations[name];\n      while (true) {\n        const textContent = getTextContent(node);\n        let m = regex.exec(textContent);\n        if (!m) return;\n\n        if (!openClose[name]) {\n          openClose[name] = { node, pos };\n          continue;\n        }\n\n        if (openClose[name]) {\n          const closing = { node, pos };\n          const opening = openClose[name];\n\n          const textContent = [];\n          doc.nodesBetween(opening.pos, closing.pos + 1, (n, p) => {\n            if (n.isText) return;\n            textContent.push(getTextContent(n));\n\n            decos.push(\n              Decoration.node(p, p + n.nodeSize, {\n                class: classNames(\n                  name,\n                  p === opening.pos && `${name}-opening`,\n                  p === closing.pos && `${name}-closing`\n                )\n              })\n            );\n          });\n\n          delete openClose[name];\n\n          if (name === \"code\") {\n            decos.push(\n              Decoration.widget(\n                opening.pos + 1,\n                (view, getPos) => {\n                  const dom = document.createElement(\"pre\");\n                  const lang = textContent[0].replace(\"```\", \"\");\n                  const source = hljs.getLanguage(lang)\n                    ? hljs.highlight(lang, textContent.slice(1, -1).join(\"\\n\"))\n                        .value\n                    : textContent.slice(1, -1).join(\"\\n\");\n                  dom.innerHTML = `${textContent[0]}\\n${source}\\n${\n                    textContent[textContent.length - 1]\n                  }`;\n\n                  dom.classList.add(\"code-highlight\");\n\n                  return dom;\n                },\n                {\n                  key: textContent.join(\"\\n\")\n                }\n              )\n            );\n          }\n          continue;\n        }\n      }\n    });\n  });\n\n  return DecorationSet.create(doc, decos);\n}\n\n// =============================================================================\n// Widgets\n\nfunction getUrlWidgets(m, pos, _, node) {\n  return [\n    Decoration.inline(pos + m.index, pos + m.index + m[0].length, {\n      class: \"url\",\n      nodeName: \"a\",\n      href: node.text,\n      title: node.text\n    })\n  ];\n}\n\nfunction getLinkWidgets(m, pos, _, node) {\n  return [\n    Decoration.inline(pos + m.index, pos + m.index + 1, {\n      class: \"link--bracket\"\n    }),\n    Decoration.inline(pos + m.index + 1, pos + m.index + 1 + m[1].length, {\n      class: \"url\",\n      nodeName: \"a\",\n      href: m[2]\n    }),\n    Decoration.inline(\n      pos + m.index + 1 + m[1].length,\n      pos + m.index + 1 + m[1].length + 2,\n      {\n        class: \"link--bracket\"\n      }\n    ),\n    Decoration.inline(\n      pos + m.index + 1 + m[1].length + 2,\n      pos + m.index + 1 + m[1].length + 2 + m[2].length,\n      {\n        class: \"link--symbol\",\n        nodeName: \"input\",\n        type: \"button\",\n        value: \"\"\n      }\n    ),\n    Decoration.inline(\n      pos + m.index + 1 + m[1].length + 2 + m[2].length,\n      pos + m.index + 1 + m[1].length + 2 + m[2].length + 1,\n      {\n        class: \"link--bracket\"\n      }\n    )\n  ];\n}\n\ndecorationsHandlers[\"folded-opening\"] = (e, elm, view) => {\n  elm.textContent = \"....\";\n};\n\ndecorationsHandlers[\"toggleFolded\"] = (e, elm, view) => {\n  elm.textContent = \"...\";\n};\n\ndecorationsHandlers[\"todo\"] = (e, elm, view) => {\n  const pos = elm.dataset[\"pos\"] * 1;\n  Sound.click();\n  view.dispatch(\n    view.state.tr.insertText(elm.checked ? \"+\" : \"-\", pos, pos + 1)\n  );\n};\nfunction getTodoWidgets(m, pos, doc) {\n  const decos = [\n    Decoration.inline(pos + m.index, pos + m.index + m[0].length, {\n      class: \"todo\",\n      nodeName: \"input\",\n      type: \"checkbox\",\n      \"data-pos\": pos + m.index,\n      ...(m[0] === \"+\" ? { checked: true } : {})\n    })\n  ];\n  const currentNode = doc.resolve(pos).node();\n  const nodeBefore = doc.resolve(pos - 1).nodeBefore;\n  const nodeAfter =\n    doc.content.size <= pos + currentNode.nodeSize\n      ? null\n      : doc.resolve(pos + currentNode.nodeSize).node();\n\n  // NOTE: Todo widget should be applied right next to the first Todo\n  // item in the group.\n  const todoRegEx = /(\\+|-)\\s/;\n  if (\n    (!nodeBefore || !todoRegEx.test(getTextContent(nodeBefore).slice(0, 2))) &&\n    nodeAfter &&\n    todoRegEx.test(getTextContent(nodeAfter).slice(0, 2))\n  ) {\n    decos.push(\n      Decoration.widget(pos + m.index, view => WidgetTodo(view), {\n        key: getTextContent(currentNode)\n      })\n    );\n  }\n\n  return decos;\n}\n\ndecorationsHandlers[\"duration--button\"] = (e, elm, view) => {\n  e.preventDefault();\n\n  const pos = elm.dataset[\"pos\"] * 1;\n  const text = getTextContent(elm.nextElementSibling);\n  const match = parseDuration(text);\n\n  const overlay = document.createElement(\"div\");\n  overlay.classList.add(\"duration---overlay\");\n\n  const menu = document.createElement(\"div\");\n  menu.classList.add(\"duration--menu\");\n  ReactDOM.render(<WidgetDuration {...{ view, pos, match, text }} />, menu);\n\n  overlay.addEventListener(\"click\", e => {\n    if (overlay.parentNode) {\n      overlay.parentNode.removeChild(overlay);\n    }\n  });\n\n  overlay.appendChild(menu);\n  document.body.appendChild(overlay);\n\n  createPopper(elm, menu, { placement: \"bottom-start\" });\n};\n\nfunction getDurationWidgets(m, pos) {\n  return [\n    Decoration.inline(pos + m.index, pos + m.index + 1, {\n      class: \"duration--button\",\n      nodeName: \"input\",\n      type: \"button\",\n      value: \"\",\n      \"data-pos\": pos + m.index\n    }),\n\n    Decoration.inline(pos + m.index + 1, pos + m.index + m[0].length, {\n      class: \"duration\"\n    })\n  ];\n}\n\ndecorationsHandlers[\"date--button\"] = (e, elm, view) => {\n  e.preventDefault();\n\n  const startPos = elm.dataset[\"startpos\"] * 1;\n  const endPos = elm.dataset[\"endpos\"] * 1;\n  const selected = getTextContent(elm.nextElementSibling);\n\n  showPopup({\n    size: \"mini\",\n    basic: true,\n    closeIcon: false,\n    content: (\n      <DatePicker\n        selected={selected}\n        onSelect={date => {\n          view.dispatch(view.state.tr.insertText(\" \" + date, startPos, endPos));\n          hidePopup();\n        }}\n      />\n    )\n  });\n};\n\nfunction getDateWidgets(m, pos) {\n  return [\n    Decoration.inline(pos + m.index, pos + m.index + 1, {\n      class: \"date--button\",\n      nodeName: \"input\",\n      type: \"button\",\n      value: \"\",\n      \"data-startpos\": pos + m.index,\n      \"data-endpos\": pos + m.index + m[0].length\n    }),\n    Decoration.inline(pos + m.index + 1, pos + m.index + m[0].length, {\n      class: \"date\"\n    })\n  ];\n}\n\ndecorationsHandlers[\"checkbox\"] = (e, elm, view) => {\n  const pos = elm.dataset.pos * 1;\n  Sound.click();\n  view.dispatch(\n    view.state.tr.insertText(elm.checked ? \"+\" : \"-\", pos + 1, pos + 2)\n  );\n};\n\nfunction getCheckboxWidgets(m, pos) {\n  return [\n    Decoration.inline(pos + m.index, pos + m.index + m[0].length, {\n      class: \"checkbox\",\n      nodeName: \"input\",\n      type: \"checkbox\",\n      \"data-pos\": pos + m.index,\n      ...(m[1] === \"+\" ? { checked: true } : {})\n    })\n  ];\n}\n\ndecorationsHandlers[\"counter--left\"] = (e, elm, view) => {\n  Sound.click();\n  const pos = elm.dataset.pos * 1;\n  const m = getTextContent(elm.nextElementSibling).split(\"/\");\n\n  view.dispatch(\n    view.state.tr.insertText(\n      `[${Math.max(m[0] * 1 - 1, 0)}${m[1] ? `/${m[1]}` : \"\"}]`,\n      pos,\n      pos + m.join(\"/\").length + 2\n    )\n  );\n};\n\ndecorationsHandlers[\"counter--right\"] = (e, elm, view) => {\n  Sound.click();\n  const pos = elm.dataset.pos * 1;\n  const m = getTextContent(elm.previousElementSibling).split(\"/\");\n\n  view.dispatch(\n    view.state.tr.insertText(\n      `[${Math.min(m[0] * 1 + 1, m[1] ? m[1] : Infinity)}${\n        m[1] ? `/${m[1]}` : \"\"\n      }]`,\n      pos,\n      pos + m.join(\"/\").length + 2\n    )\n  );\n};\n\nfunction getCounterWidgets(m, pos) {\n  return [\n    Decoration.inline(pos + m.index, pos + m.index + 1, {\n      class: \"counter--button counter--left\",\n      nodeName: \"input\",\n      type: \"button\",\n      value: \"\",\n      \"data-pos\": pos + m.index\n    }),\n    Decoration.inline(pos + m.index + 1, pos + m.index + m[0].length - 1, {\n      class: \"counter\"\n    }),\n    Decoration.inline(\n      pos + m.index + m[0].length - 1,\n      pos + m.index + m[0].length,\n      {\n        class: \"counter--button counter--right\",\n        nodeName: \"input\",\n        type: \"button\",\n        value: \"\",\n        \"data-pos\": pos + m.index\n      }\n    )\n  ];\n}\n\ndecorationsHandlers[\"heading--button\"] = (e, elm, view) => {\n  Sound.click();\n  const pos = elm.dataset.pos * 1;\n  const text = getTextContent(elm.parentNode);\n  const level = text.match(/^#+/)[0];\n\n  view.dispatch(\n    view.state.tr.insertText(\n      level.length === 5 ? `#` : `#${level}`,\n      pos,\n      pos + level.length + 1\n    )\n  );\n};\n\nfunction getHeadingWidgets(m, pos, _, node) {\n  return [\n    Decoration.node(pos + m.index, pos + m.index + node.nodeSize, {\n      class: `heading heading-${m[1].length}`\n    }),\n    Decoration.inline(pos + m.index + 1, pos + m.index + 1 + m[1].length, {\n      class: \"heading--button\",\n      type: \"button\",\n      nodeName: \"input\",\n      value: `H${m[1].length}`,\n      \"data-pos\": pos\n    })\n  ];\n}\n\nfunction getImgWidgets(m, pos) {\n  return [\n    Decoration.inline(pos + m.index, pos + m.index + m[0].length, {\n      class: \"img\",\n      nodeName: \"img\",\n      src: m[1]\n    })\n  ];\n}\n\n// =============================================================================\n// Plugin\n\nexport default new Plugin({\n  state: {\n    init(_, { doc }) {\n      return getDecorations(doc);\n    },\n    apply(tr, decorationsSet) {\n      return tr.docChanged ? getDecorations(tr.doc) : decorationsSet;\n    }\n  },\n  props: {\n    decorations(state) {\n      return this.getState(state);\n    }\n  }\n});\n","import React, { useState } from \"react\";\nimport moment from \"moment\";\nimport classNames from \"classnames\";\n\nimport {\n  List,\n  Label,\n  Grid,\n  Menu,\n  Icon,\n  Checkbox,\n  Header,\n  Message\n} from \"semantic-ui-react\";\n\nimport {\n  parseDuration,\n  normalizeDuration,\n  getZeroBasedNum,\n  matchRecurringDay\n} from \"../util\";\n\nimport { Decorations } from \"../Editor/decorations\";\n\nimport \"./Agenda.css\";\n\nconst matchDate = d => {\n  Decorations._date.lastIndex = 0;\n  const match = Decorations._date.exec(\" \" + d);\n  Decorations._date.lastIndex = 0;\n  return match;\n};\n\nconst matchRecurringDate = d => {\n  Decorations.date.lastIndex = 0;\n  const match = Decorations.date.exec(d);\n  Decorations.date.lastIndex = 0;\n  return match;\n};\n\nfunction processTodos(todos, today = moment().startOf(\"day\")) {\n  const forToday = todos\n    .filter(item => {\n      if (!item.date) return false;\n\n      const recurring = matchRecurringDate(item.date);\n      if (recurring) {\n        const dayNum = today.day();\n        const dayStr = recurring[1];\n\n        return matchRecurringDay(dayNum, dayStr);\n      }\n\n      debugger;\n\n      return moment(item.date).isSame(today, \"day\");\n    })\n    .map(item => {\n      const result = { ...item };\n      let hours, minutes;\n\n      const recurring = matchRecurringDate(item.date);\n      if (recurring) {\n        [hours, minutes] = recurring.slice(3);\n      } else {\n        [hours, minutes] = matchDate(item.date).slice(5);\n      }\n\n      // Date has no hours and minutes.\n      if (hours === undefined) return result;\n\n      result.hours = hours;\n      result.minutes = minutes;\n      result.fromTime = moment.duration({\n        minutes,\n        hours\n      });\n\n      if (result.duration) {\n        const d = parseDuration(result.duration);\n\n        d.h += hours * 1;\n        d.m += minutes * 1;\n        normalizeDuration(d);\n\n        result.toTime = moment.duration({\n          minutes: d.m,\n          hours: d.h\n        });\n      }\n\n      return result;\n    });\n\n  if (forToday.length === 0) {\n    return null;\n  }\n\n  const noHour = forToday.filter(item => {\n    return !item.fromTime;\n  });\n\n  const withHour = forToday\n    .filter(item => !!item.fromTime)\n    .sort((a, b) => {\n      const { hours: hoursA, minutes: minutesA } = a;\n      const { hours: hoursB, minutes: minutesB } = b;\n      return hoursA * 60 + minutesA * 1 - (hoursB * 60 + minutesB * 1);\n    });\n\n  return { withHour, noHour };\n}\n\nfunction durationToStr(d) {\n  return `${getZeroBasedNum(d.hours())}:${getZeroBasedNum(d.minutes())}`;\n}\n\nconst SMALL_PADDING = \"---------------------\";\nconst BIG_PADDING =\n  \"------------------------ --------- ---------- --------------- ------------ -------- ----- ----\";\n\nexport default function Agenda({ todos, rerender }) {\n  const [date, setDate] = useState(moment().startOf(\"day\"));\n  const groups = processTodos(todos, date);\n\n  const menu = (\n    <Menu fluid widths={3}>\n      <Menu.Item\n        as=\"a\"\n        icon\n        onClick={() => setDate(date.clone().add(1, \"day\"))}\n      >\n        <Icon name=\"chevron left\" />\n      </Menu.Item>\n\n      <Menu.Item as=\"a\" icon disabled>\n        {date.format(\"dddd, MMMM Do YYYY\")}\n      </Menu.Item>\n\n      <Menu.Item\n        as=\"a\"\n        icon\n        onClick={() => setDate(date.clone().subtract(1, \"day\"))}\n      >\n        <Icon name=\"chevron right\" />\n      </Menu.Item>\n    </Menu>\n  );\n\n  if (!groups) {\n    return (\n      <div className=\"Editor--agenda\">\n        {menu}\n        <Header\n          as=\"h2\"\n          content={`Agenda`}\n          subheader={` for ${moment().format(\"dddd, MMMM Do YYYY\")}`}\n        />\n        <Message info>No items for today.</Message>\n      </div>\n    );\n  }\n\n  const { withHour, noHour } = groups;\n  let prevTime = moment.duration({ hours: 0, minutes: 0 });\n\n  return (\n    <div className=\"Editor--agenda\">\n      {menu}\n      <Grid columns={2} relaxed=\"very\">\n        <Grid.Column>\n          <Header\n            as=\"h2\"\n            content={`Agenda`}\n            subheader={` for ${date.format(\"dddd, MMMM Do YYYY\")}`}\n          />\n\n          <List divided selection>\n            {withHour.map((item, i) => {\n              const { fromTime, toTime } = item;\n              let spaceTime = null;\n              if (fromTime.asMinutes() - prevTime.asMinutes() >= 30) {\n                spaceTime = (\n                  <List.Item key={prevTime} className=\"Agenda--Row\">\n                    <Label\n                      as=\"a\"\n                      basic\n                      color=\"grey\"\n                      className=\"Agenda--TimeLabel\"\n                    >\n                      {durationToStr(prevTime)}-{durationToStr(fromTime)}\n                    </Label>\n                    {durationToStr(prevTime) === \"00:00\"\n                      ? BIG_PADDING\n                      : SMALL_PADDING}\n                  </List.Item>\n                );\n              }\n              prevTime = toTime || fromTime;\n              return (\n                <React.Fragment key={i}>\n                  {spaceTime}\n                  <List.Item className=\"Agenda--Row\">\n                    <Label\n                      as=\"a\"\n                      basic\n                      color={item.done ? \"olive\" : \"orange\"}\n                      className=\"Agenda--TimeLabel\"\n                    >\n                      {durationToStr(fromTime)}\n                      {toTime ? `-${durationToStr(toTime)}` : \"......\"}\n                    </Label>\n                    <Checkbox\n                      className=\"Agenda--Checkbox\"\n                      defaultChecked={item.done}\n                      onClick={() => {\n                        item.toggle();\n                        rerender();\n                      }}\n                    />\n                    <span\n                      className={classNames(\n                        \"Agenda--Checkbox--Label\",\n                        item.done && \"done\"\n                      )}\n                    >\n                      {item.text}\n                    </span>\n                  </List.Item>\n                </React.Fragment>\n              );\n            })}\n            {durationToStr(prevTime) !== \"23:59\" && (\n              <List.Item key=\"last\" className=\"Agenda--Row\">\n                <Label as=\"a\" basic color=\"grey\" className=\"Agenda--TimeLabel\">\n                  {durationToStr(prevTime)}-23:59\n                </Label>\n                <span>{BIG_PADDING}</span>\n              </List.Item>\n            )}\n          </List>\n        </Grid.Column>\n        <Grid.Column>\n          <Header\n            as=\"h2\"\n            content=\"Tasks for the day\"\n            subheader=\"Tasks that don't have specific time attached to them\"\n          />\n          <List selection>\n            {noHour.map((item, i) => (\n              <List.Item key={i} className=\"Agenda--Row\">\n                <Checkbox\n                  className=\"Agenda--Checkbox\"\n                  defaultChecked={item.done}\n                  onClick={() => {\n                    item.toggle();\n                    rerender();\n                  }}\n                />\n                <span\n                  className={classNames(\n                    \"Agenda--Checkbox--Label\",\n                    item.done && \"done\"\n                  )}\n                >\n                  {item.text}\n                </span>\n              </List.Item>\n            ))}\n          </List>\n        </Grid.Column>\n      </Grid>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Table, Icon, Label, Divider } from \"semantic-ui-react\";\n\nimport \"./CheatSheet.css\";\n\nconst FEATURES = [\n  [\n    \"heading\",\n    \"Heading 1-6\",\n    <div>\n      # Heading 1<br />\n      ## Heading 2<br />\n      ### Heading 3 <br />\n      #### Heading 4<br />\n      ##### Heading 5<br />\n      ###### Heading 6\n    </div>,\n    null\n  ],\n\n  [\"bold\", \"Bold text\", \"*text*\", \"CMD-B\"],\n  [\"italic\", \"Italic text\", \"/text/\", \"CMD-I\"],\n  [\"underline\", \"Underline text\", \"_text_\", \"CMD-U\"],\n  [\"strikethrough\", \"Strike-trough trext\", \"-text-\", \"CMD-E\"],\n  [\"pencil alternate\", \"Highlighted text\", \"`text`\", \"CMD-`\"],\n\n  [\n    \"list ol\",\n    \"Ordered list\",\n    <div>\n      1. First item <br /> 2. Second item\n    </div>,\n    null\n  ],\n  [\n    \"list ul\",\n    \"Bullet list\",\n    <div>\n      * First item <br />* Second item\n    </div>,\n    null\n  ],\n  [\n    \"tasks\",\n    \"Todo list\",\n    <div>\n      - Not completed item <br />\n      + Completed item <br />\n    </div>,\n    null\n  ],\n  [\"quote left\", \"Quote\", \"> Quote\", null],\n\n  [\"window minimize outline\", \"Horizontal line\", \"---\", null],\n  [\"hashtag\", \"Tag\", \"#tag\", null],\n  [\"linkify\", \"Link\", \"http://link.com/\", null],\n  [\"image\", \"Image\", \"[http://example.com/image.jpg]\", null],\n\n  [\"check square outline\", \"Checkbox\", \"[-]\", null],\n  [\"sort numeric up\", \"Counter\", \"[2]\", null],\n  [\"percent\", \"Quantity\", \"[1/10]\", null],\n  [\"stopwatch\", \"Duration\", \"1h10m20s\", null],\n  [\"calendar alternate outline\", \"Date and Time\", \"2019-02-23 11:30\", null],\n\n  [\n    \"code\",\n    \"Code block\",\n    <pre>{`\\`\\`\\`javascript\nvar a = 10;\nvar b = 20;\nalert(a + b);\n\\`\\`\\``}</pre>,\n    null\n  ],\n  [\n    \"th\",\n    \"Table\",\n    <pre>{`\n|--------|------------|--------|\n| *Name* |   *Email*  | *Date* |\n|--------|------------|--------|\n|   ivo  | ivo@abv.bg |        |\n|--------|------------|--------|`}</pre>,\n    \"Tab\"\n  ]\n];\n\nexport default function CheatSheet() {\n  return (\n    <div className=\"CheatSheet\">\n      <Table basic=\"very\">\n        <Table.Header>\n          <Table.Row>\n            <Table.HeaderCell>Feature</Table.HeaderCell>\n            <Table.HeaderCell>Pattern</Table.HeaderCell>\n            <Table.HeaderCell>Key-binding</Table.HeaderCell>\n          </Table.Row>\n        </Table.Header>\n\n        <Table.Body>\n          {FEATURES.map(([icon, title, pattern, keybinding], i) => (\n            <Table.Row key={`feature-${i}`} verticalAlign=\"top\">\n              <Table.Cell collapsing>\n                <Icon name={icon} /> {title}\n              </Table.Cell>\n              <Table.Cell>{pattern}</Table.Cell>\n              <Table.Cell>\n                {keybinding ? <Label basic>{keybinding}</Label> : \"\"}\n              </Table.Cell>\n            </Table.Row>\n          ))}\n        </Table.Body>\n      </Table>\n\n      <Divider />\n      <Table basic=\"very\">\n        <Table.Header>\n          <Table.Row>\n            <Table.HeaderCell>Snippets</Table.HeaderCell>\n            <Table.HeaderCell>Description</Table.HeaderCell>\n          </Table.Row>\n          <Table.Row verticalAlign=\"top\">\n            <Table.Cell collapsing>\n              <Icon name=\"calendar\" /> {\"<next friday at 12 am>|<today>\"}\n            </Table.Cell>\n            <Table.Cell>Input Date and Time</Table.Cell>\n          </Table.Row>\n          <Table.Row verticalAlign=\"top\">\n            <Table.Cell collapsing>\n              <Icon name=\"calendar\" /> {\"<calendar: 2019-01>|<calendar>\"}\n            </Table.Cell>\n            <Table.Cell>Input calendar for specified month</Table.Cell>\n          </Table.Row>\n        </Table.Header>\n      </Table>\n    </div>\n  );\n}\n","import {\n  joinPoint,\n  canJoin,\n  findWrapping,\n  liftTarget,\n  canSplit,\n  ReplaceAroundStep\n} from \"prosemirror-transform\";\nimport { Slice, Fragment } from \"prosemirror-model\";\nimport {\n  Selection,\n  TextSelection,\n  NodeSelection,\n  AllSelection,\n  SelectionRange\n} from \"prosemirror-state\";\n\nimport { showError } from \"../errors\";\nimport { getStorage } from \"../Storage\";\nimport { toVisibleSpaces, getTextContent } from \"../util\";\nimport { RepeatableDecorations, WholeNodeDecorations } from \"./decorations\";\n\n// =============================================================================\n// Lists repeating\n\nexport function splitBlockWithDecorations(state, dispatch) {\n  let { $from, $to } = state.selection;\n  if (\n    state.selection instanceof NodeSelection &&\n    state.selection.node.isBlock\n  ) {\n    if (!$from.parentOffset || !canSplit(state.doc, $from.pos)) return false;\n    if (dispatch) dispatch(state.tr.split($from.pos).scrollIntoView());\n    return true;\n  }\n\n  if (!$from.parent.isBlock) return false;\n\n  if (dispatch) {\n    let atEnd = $to.parentOffset == $to.parent.content.size;\n    let tr = state.tr;\n    if (state.selection instanceof TextSelection) tr.deleteSelection();\n    let deflt =\n      $from.depth == 0\n        ? null\n        : $from.node(-1).contentMatchAt($from.indexAfter(-1)).defaultType;\n    let types = atEnd && deflt ? [{ type: deflt }] : null;\n    let can = canSplit(tr.doc, tr.mapping.map($from.pos), 1, types);\n    if (\n      !types &&\n      !can &&\n      canSplit(tr.doc, tr.mapping.map($from.pos), 1, deflt && [{ type: deflt }])\n    ) {\n      types = [{ type: deflt }];\n      can = true;\n    }\n    if (can) {\n      tr.split(tr.mapping.map($from.pos), 1, types);\n      if (\n        !atEnd &&\n        !$from.parentOffset &&\n        $from.parent.type != deflt &&\n        $from\n          .node(-1)\n          .canReplace(\n            $from.index(-1),\n            $from.indexAfter(-1),\n            Fragment.from(deflt.create(), $from.parent)\n          )\n      )\n        tr.setNodeMarkup(tr.mapping.map($from.before()), deflt);\n    }\n\n    const textContent = getTextContent($from.parent);\n    Object.values(RepeatableDecorations).forEach(d => {\n      let match;\n      if (!(match = textContent.match(d))) {\n        return;\n      }\n\n      if (match[0] === textContent.trim()) {\n        tr.delete(\n          $from.pos - textContent.length,\n          $from.pos + textContent.length\n        );\n      } else {\n        let text = match[0];\n        if (match[0] == \"+\" || match[0] == \"-\") {\n          text = \"- \";\n        } else if (d === RepeatableDecorations.ordered) {\n          text = match[0].replace(/(?<=\\s*|^)\\d+/, v => v * 1 + 1);\n        }\n\n        tr.insertText(toVisibleSpaces(text + \" \"));\n      }\n    });\n\n    if (WholeNodeDecorations.tableRow.test(textContent)) {\n      tr.insertText(toVisibleSpaces(\"| \"));\n    }\n\n    dispatch(tr.scrollIntoView());\n  }\n  return true;\n}\n\n// =============================================================================\n// Tables\n\nexport function formatTable(state, dispatch, view) {\n  const { $from, to } = state.selection;\n  const same = $from.sharedDepth(to);\n  if (same == 0) return false;\n\n  const proseNode = $from.before(same);\n  const currentNode = view.nodeDOM(proseNode);\n  const domNodes = [currentNode];\n\n  if (!currentNode.classList.contains(\"tableRow\")) return false;\n\n  let next = currentNode;\n  while (\n    (next = next.nextElementSibling) &&\n    next.classList.contains(\"tableRow\")\n  ) {\n    domNodes.push(next);\n  }\n\n  let prev = currentNode;\n  while (\n    (prev = prev.previousElementSibling) &&\n    prev.classList.contains(\"tableRow\")\n  ) {\n    domNodes.unshift(prev);\n  }\n\n  const rows = domNodes.map(n => n.textContent);\n\n  const [result, nextSelectedRow, nextSelectedCell] = getFormattedTable(\n    rows,\n    domNodes.indexOf(currentNode),\n    $from.pos - proseNode - 1\n  );\n\n  domNodes.forEach((node, i) => {\n    const text = result[i].replace(new RegExp(\" \", \"g\"), `\\u00a0`); // &nbsp\n    const pos = view.posAtDOM(node);\n    const n = view.state.doc.nodeAt(pos);\n\n    const tr = view.state.tr.insertText(text, pos, pos + n.nodeSize);\n    if (i === nextSelectedRow) {\n      let posInCell = text\n        .split(\"|\")\n        .slice(0, nextSelectedCell + 2)\n        .join(\"|\")\n        .trim().length;\n\n      if (posInCell === 1) {\n        // Give some space if it is first empty cell.\n        posInCell = 2;\n      }\n\n      tr.setSelection(\n        TextSelection.create(tr.doc, pos + posInCell, pos + posInCell - 2)\n      );\n    }\n\n    dispatch(tr);\n  });\n}\n\nfunction getFormattedTable(rows, selectedRow, selectedChar) {\n  const isLineRow = row => row.slice(0, 2) === \"|-\";\n\n  const dataRows = rows\n    .filter(row => !isLineRow(row))\n    .map(row =>\n      row\n        .replace(/\\s\\s*/g, \" \")\n        .trim()\n        .split(\"|\")\n    );\n\n  const separatorRowsIdxs = rows\n    .map((row, i) => (isLineRow(row) ? i : null))\n    .filter(index => index !== null);\n\n  const maxCellsNum = Math.max(...dataRows.map(r => r.length));\n  const table = dataRows.map(row => {\n    const extraEmptyCells = \" \".repeat(maxCellsNum - row.length).split(\" \");\n    return [...row, ...extraEmptyCells];\n  });\n\n  for (let i = 0; i < maxCellsNum; i++) {\n    const maxWidth = Math.max(...table.map(row => row[i].length));\n    table.forEach(row => (row[i] = padBothToLength(row[i], maxWidth, \" \")));\n  }\n\n  const outputTable = table.map(\n    row => `| ${row.filter((c, i) => c !== \"\").join(\" | \")} |`\n  );\n\n  const lineRow = [...outputTable[0]].map(c => (c !== \"|\" ? \"-\" : c)).join(\"\");\n  separatorRowsIdxs.forEach(index => {\n    outputTable.splice(index, 0, lineRow);\n  });\n\n  const selectedCell =\n    rows[selectedRow].slice(0, selectedChar).split(\"|\").length - 2;\n  const resultCellsLength = outputTable[0].split(\"|\").length - 2;\n\n  let nextSelectedRow = selectedRow;\n  let nextSelectedCell = selectedCell + 1;\n\n  if (nextSelectedCell === resultCellsLength) {\n    nextSelectedCell = 0;\n    do {\n      nextSelectedRow += 1;\n    } while (separatorRowsIdxs.includes(nextSelectedRow));\n\n    if (!outputTable[nextSelectedRow]) {\n      nextSelectedRow = 0;\n    }\n  }\n\n  return [outputTable, nextSelectedRow, nextSelectedCell];\n}\n\nfunction padBothToLength(str, toLength, padStr = \" \") {\n  const fromLength = str.length;\n  const fromStart = Math.floor((toLength - fromLength) / 2);\n  const fromEnd = Math.ceil((toLength - fromLength) / 2);\n\n  return `${padStr.repeat(fromStart)}${str}${padStr.repeat(fromEnd)}`;\n}\n\n// =============================================================================\n// Headers navigation\n\nfunction selectHeader(prop, state, dispatch, view) {\n  const { $from, to } = state.selection;\n  const same = $from.sharedDepth(to);\n  if (same == 0) return false;\n\n  const proseNode = $from.before(same);\n  let currentNode = view.nodeDOM(proseNode);\n\n  while (!currentNode.parentNode.classList.contains(\"ProseMirror\")) {\n    currentNode = currentNode.parentNode;\n  }\n\n  let next = currentNode;\n  while ((next = next[prop])) {\n    if (next.classList.contains(\"heading\")) {\n      next.scrollIntoView({\n        block: \"start\",\n        inline: \"nearest\",\n        behavior: \"smooth\"\n      });\n      const pos = view.posAtDOM(next);\n      let offset = 0;\n      if (next.classList.contains(\"heading-1\")) offset = 1;\n      else if (next.classList.contains(\"heading-2\")) offset = 2;\n      else if (next.classList.contains(\"heading-3\")) offset = 3;\n      else if (next.classList.contains(\"heading-4\")) offset = 4;\n      else if (next.classList.contains(\"heading-4\")) offset = 4;\n      dispatch(\n        view.state.tr.setSelection(\n          Selection.near(view.state.doc.resolve(pos + offset))\n        )\n      );\n      return true;\n    }\n  }\n}\n\nexport function selectNextHeader(...args) {\n  return selectHeader(\"nextElementSibling\", ...args);\n}\n\nexport function selectPrevHeader(...args) {\n  return selectHeader(\"previousElementSibling\", ...args);\n}\n\n// =============================================================================\n// Files\n\nexport function insertImage(view) {\n  return uploadFile(view.state, view.dispatch, view);\n}\n\nexport function uploadFile(state, dispatch, view) {\n  const input = document.createElement(\"input\");\n  input.type = \"file\";\n  input.addEventListener(\"change\", () => {\n    const images = Array.from(input.files).filter(file =>\n      /image/i.test(file.type)\n    );\n    if (images.length === 0) {\n      // TODO: Show error that only images are supported.\n      // TODO: Show error on wrong filessize;\n      return;\n    }\n\n    getStorage()\n      .uploadFile(images[0])\n      .then(url => {\n        dispatch(state.tr.insertText(` [${url}] `).scrollIntoView());\n      })\n      .catch(err => {\n        showError(err);\n      });\n  });\n  input.click();\n\n  return true;\n}\n\n// =============================================================================\n// Insert\n\nexport function showHelp() {\n  document.querySelector(\"#prose-show-help\").click();\n}\nexport function showStats() {\n  document.querySelector(\"#prose-show-stats\").click();\n}\nexport function showSlides() {\n  document.querySelector(\"#prose-show-slides\").click();\n}\nexport function showAgenda() {\n  document.querySelector(\"#prose-show-agenda\").click();\n}\nexport function showEditor() {\n  document.querySelector(\"#prose-show-editor\").click();\n}\n\nconst isWithinNode = (className, state, view) => {\n  const { $from, to } = state.selection;\n  const same = $from.sharedDepth(to);\n  if (same == 0) return false;\n\n  const proseNode = $from.before(same);\n  const currentNode = view.nodeDOM(proseNode);\n  return currentNode.classList.contains(className) && currentNode;\n};\n\nexport function insertTable() {}\nexport function insertLink() {}\nexport function insertCode(_, dispatch, view) {\n  dispatch(view.tr.insertText(\"```\"));\n  dispatch(view.tr.insertText(\"\"));\n  dispatch(view.tr.insertText(\"```\"));\n}\nexport function insertQuote(view) {\n  // state.tr.replaceSelectionWith(br.create()).scrollIntoView()\n  // view.state.tr.insertText(toVisibleSpaces(\"> \")).scrollIntoView()\n  const { schema } = view.state;\n  debugger;\n  view.dispatch(\n    view.state.tr\n      .replaceSelectionWith(\n        schema.nodes.paragraph.create(null, schema.text(toVisibleSpaces(\"> \")))\n      )\n      .scrollIntoView()\n  );\n}\nexport function insertCounter(view) {\n  view.dispatch(\n    view.state.tr.insertText(toVisibleSpaces(\"[0]\")).scrollIntoView()\n  );\n}\nexport function insertQuantity(view) {\n  view.dispatch(\n    view.state.tr.insertText(toVisibleSpaces(\"[0/10]\")).scrollIntoView()\n  );\n}\n\n// =============================================================================\n// Duration\n\nconst clickDurationButton = (state, view) => {\n  const { $from, to } = state.selection;\n  const same = $from.sharedDepth(to);\n  if (same == 0) return false;\n\n  const proseNode = $from.before(same);\n  const currentNode = view.nodeDOM(proseNode);\n\n  const durationButton = currentNode.querySelector(\".duration--button\");\n  if (!durationButton) return false;\n  durationButton.click();\n  return true;\n};\nexport function durationStart(state, dispatch, view) {\n  if (clickDurationButton(state, view)) {\n    document.querySelector(\"#duration--countdown\").click();\n    return true;\n  }\n  return false;\n}\nexport function durationContinue(state, dispatch, view) {\n  if (clickDurationButton(state, view)) {\n    document.querySelector(\"#duration--continue\").click();\n    return true;\n  }\n  return false;\n}\nexport function durationDouble(state, dispatch, view) {\n  if (clickDurationButton(state, view)) {\n    document.querySelector(\"#duration--double\").click();\n    return true;\n  }\n  return false;\n}\n\n// =============================================================================\n// Date\n\n// TODO: multiple dates in the same node\n// TODO: in todo item\nexport function dateSelect(state, dispatch, view) {\n  const { $from, to } = state.selection;\n  const same = $from.sharedDepth(to);\n  if (same == 0) return false;\n\n  const proseNode = $from.before(same);\n  const currentNode = view.nodeDOM(proseNode);\n\n  const dateButton = currentNode.querySelector(\".date--button\");\n  if (!dateButton) return false;\n  dateButton.click();\n  return true;\n}\n\n// =============================================================================\n// Todo\n\nconst getTodoIndicatorNode = (state, view) => {\n  const { $from, to } = state.selection;\n  const same = $from.sharedDepth(to);\n  if (same == 0) return false;\n\n  const proseNode = $from.before(same);\n  let currentNode = view.nodeDOM(proseNode);\n  if (!currentNode.querySelector(\".todo\")) return false;\n\n  while (\n    currentNode.querySelector(\".todo\") &&\n    !currentNode.querySelector(\".todo-indicator\")\n  ) {\n    currentNode = currentNode.previousElementSibling;\n  }\n\n  return currentNode.querySelector(\".todo\") ? currentNode : false;\n};\n\nexport function todoReset(state, dispatch, view) {\n  const node = getTodoIndicatorNode(state, view);\n  if (!node) return false;\n\n  node.querySelector(\"[data-value=reset]\").click();\n  return true;\n}\nexport function todoPlay(state, dispatch, view) {\n  const node = getTodoIndicatorNode(state, view);\n  if (!node) return false;\n\n  node.querySelector(\"[data-value=play]\").click();\n  return true;\n}\nexport function todoClearCompleted(state, dispatch, view) {\n  const node = getTodoIndicatorNode(state, view);\n  if (!node) return false;\n\n  node.querySelector(\"[data-value=delete_completed]\").click();\n  return true;\n}\nexport function todoClearUnfinished(state, dispatch, view) {\n  const node = getTodoIndicatorNode(state, view);\n  if (!node) return false;\n\n  node.querySelector(\"[data-value=delete_unfinished]\").click();\n  return true;\n}\n\n// =============================================================================\n// Counter\n\nexport function counterInc() {}\nexport function counterDec() {}\n\n// =============================================================================\n// Foldable\n\nexport function foldedToggle() {}\n","import React from \"react\";\nimport Mousetrap from \"mousetrap\";\nimport { Icon, Menu, Dropdown } from \"semantic-ui-react\";\n\nimport {\n  insertQuote,\n  insertCounter,\n  insertQuantity,\n  showHelp,\n  showStats,\n  showSlides,\n  showAgenda,\n  showEditor,\n  insertImage\n} from \"./commands\";\n\nimport \"./CommandsMenu.css\";\n\nMousetrap.bind(\"ctrl+1\", showEditor);\nMousetrap.bind(\"ctrl+2\", showAgenda);\nMousetrap.bind(\"ctrl+3\", showSlides);\nMousetrap.bind(\"ctrl+4\", showStats);\nMousetrap.bind(\"ctrl+5\", showHelp);\n\nexport default function CommandsMenu({ disabled, getView }) {\n  // const subscription = props.source.subscribe();\n  // return () => {\n  //   // Clean up the subscription\n  //   subscription.unsubscribe();\n  // };\n\n  const items = [\n    [\"file\", \"Image\", insertImage, false],\n    [\"linkify\", \"Link\", () => {}, true],\n    [\"code\", \"Code\", () => {}, true],\n    [\"quote left\", \"Quote\", insertQuote, false],\n    [\"th\", \"Table\", () => {}, true],\n    [\"sort numeric up\", \"Counter\", insertCounter, false],\n    [\"percent\", \"Quantity\", insertQuantity, false]\n  ];\n  return (\n    <Dropdown\n      item\n      icon={null}\n      floated=\"right\"\n      disabled={disabled}\n      trigger={\n        <>\n          <Icon name=\"code\" /> Commands\n        </>\n      }\n      className=\"link\"\n      as=\"a\"\n    >\n      <Dropdown.Menu className=\"CommandsMenu\">\n        <Dropdown.Header>Insert</Dropdown.Header>\n        {items.map(([icon, text, onClick, disabled], key) => (\n          <Dropdown.Item\n            {...{\n              key,\n              icon,\n              text,\n              disabled,\n              onClick: () => {\n                const v = getView();\n                v.focus();\n                onClick(v);\n              }\n            }}\n          />\n        ))}\n        <Dropdown.Divider />\n        <Dropdown.Header>Format</Dropdown.Header>\n        <Dropdown.Item\n          icon=\"arrows alternate vertical\"\n          text=\"Fold Selection\"\n          disabled\n        />\n\n        <Dropdown.Header>View</Dropdown.Header>\n        <Dropdown.Item\n          icon=\"file alternate outline\"\n          text=\"Show Editor\"\n          description=\"ctrl + 1\"\n          onClick={showEditor}\n        />\n        <Dropdown.Item\n          icon=\"clipboard list\"\n          text=\"Show Agenda\"\n          description=\"ctrl + 2\"\n          onClick={showAgenda}\n        />\n        <Dropdown.Item\n          icon=\"chart line\"\n          text=\"Show Stats\"\n          description=\"ctrl + 3\"\n          onClick={showStats}\n        />\n        <Dropdown.Item\n          icon=\"help\"\n          text=\"Show Help\"\n          description=\"ctrl + 4\"\n          onClick={showHelp}\n        />\n        <Dropdown.Item\n          disabled\n          icon=\"share square\"\n          text=\"Show Preview\"\n          description=\"ctrl + shift + p\"\n          onClick={\n            /* TODO: generate preview */\n            () => alert(\"TODO: generate preview\")\n          }\n        />\n      </Dropdown.Menu>\n    </Dropdown>\n  );\n}\n","import chrono from \"chrono-node\";\n\nimport { Schema, Fragment } from \"prosemirror-model\";\n\nimport { keymap } from \"prosemirror-keymap\";\nimport { gapCursor } from \"prosemirror-gapcursor\";\nimport { dropCursor } from \"prosemirror-dropcursor\";\nimport { history, undo, redo } from \"prosemirror-history\";\nimport {\n  selectParentNode,\n  baseKeymap,\n  chainCommands\n} from \"prosemirror-commands\";\n\nimport { InputRule, inputRules } from \"prosemirror-inputrules\";\n\nimport decorations from \"./decorations\";\nimport {\n  formatDate,\n  getZeroBasedNum,\n  getDaysInMonthByWeeks,\n  monthNumToName\n} from \"../util\";\nimport {\n  splitBlockWithDecorations,\n  selectNextHeader,\n  selectPrevHeader,\n  formatTable,\n\n  // View\n  showHelp,\n  showStats,\n  showSlides,\n  showAgenda,\n  showEditor,\n\n  // Todo\n  todoReset,\n  todoPlay,\n  todoClearCompleted,\n\n  // Date\n  dateSelect,\n\n  // Duration\n  durationStart,\n  durationContinue,\n  durationDouble,\n\n  // Files\n  uploadFile\n} from \"./commands\";\n\n// =============================================================================\n// Schema\n\nexport const schema = new Schema({\n  nodes: {\n    doc: {\n      content: \"block+\"\n    },\n\n    paragraph: {\n      content: \"inline*\",\n      group: \"block\",\n      parseDOM: [{ tag: \"p\" }],\n      toDOM() {\n        return [\"p\", 0];\n      }\n    },\n\n    text: {\n      group: \"inline\",\n      toDOM(node) {\n        return node.text;\n      }\n    },\n\n    hard_break: {\n      inline: true,\n      group: \"inline\",\n      selectable: false,\n      parseDOM: [{ tag: \"br\" }],\n      toDOM: () => [\"br\"]\n    }\n  }\n});\n\n// =============================================================================\n// Plugins\n\nconst INPUT_RULES = (function() {\n  let rules = [\n    new InputRule(/<calendar:?(\\s\\d\\d\\d\\d-\\d\\d?)?>/, function(\n      state,\n      match,\n      start,\n      end\n    ) {\n      const { paragraph } = state.schema.nodes;\n      const today = match[1] ? new Date(...match[1].split(\"-\"), 0) : new Date();\n\n      const nodes = Fragment.from([\n        paragraph.create(\n          null,\n          schema.text(\n            `*${monthNumToName[today.getMonth()]} ${today.getFullYear()}*`\n          )\n        ),\n        paragraph.create(\n          null,\n          schema.text(\n            \"|---------|---------|---------|---------|---------|---------|---------|\"\n          )\n        ),\n        paragraph.create(\n          null,\n          schema.text(\n            \"|*Mon*|*Tue*|*Wed*|*Thu*|*Fri*|*Sat*|*Sun*|\"\n          )\n        ),\n        paragraph.create(\n          null,\n          schema.text(\n            \"|---------|---------|---------|---------|---------|---------|---------|\"\n          )\n        ),\n        ...getDaysInMonthByWeeks(\n          today.getMonth(),\n          today.getFullYear()\n        ).map(week =>\n          paragraph.create(\n            null,\n            state.schema.text(\n              \"| \" +\n                week\n                  .map(d =>\n                    d ? `${getZeroBasedNum(d.getDate())}` : \"\"\n                  )\n                  .join(\"|\") +\n                \"|\"\n            )\n          )\n        ),\n        paragraph.create(\n          null,\n          schema.text(\n            \"|---------|---------|---------|---------|---------|---------|---------|\"\n          )\n        )\n      ]);\n\n      return state.tr.replaceWith(start, end, nodes);\n    }),\n    new InputRule(/<[^>]+>/, function(state, match, start, end) {\n      const parsed = chrono.parse(match[0])[0];\n      if (!parsed || parsed.index !== 1) {\n        return null;\n      }\n\n      let insert = chrono.parseDate(match[0]);\n      insert = formatDate(insert);\n\n      return state.tr.insertText(insert, start, end);\n    })\n  ];\n\n  return inputRules({ rules });\n})();\n\n// =============================================================================\n// Plugins\n\nexport const plugins = [\n  INPUT_RULES,\n\n  history(),\n  dropCursor(),\n  gapCursor(),\n\n  keymap({\n    \"Mod-z\": undo,\n    \"Shift-Mod-z\": redo,\n    \"Mod-i\": selectParentNode, // TODO: use it to kill row\n\n    \"Shift-Enter\": baseKeymap[\"Enter\"],\n    \"Ctrl-Enter\": baseKeymap[\"Enter\"], // TODO: add table row\n    // Ctrl-l -> clone line\n\n    Tab: formatTable,\n    Enter: splitBlockWithDecorations,\n\n    \"Ctrl-1\": showEditor,\n    \"Ctrl-2\": showAgenda,\n    \"Ctrl-3\": showSlides,\n    \"Ctrl-4\": showStats,\n    \"Ctrl-5\": showHelp,\n\n    \"Ctrl-r\": todoReset,\n    \"Ctrl-Shift-r\": todoClearCompleted,\n\n    \"Ctrl-u\": uploadFile,\n\n    ...(/Mac/.test(navigator.platform)\n      ? {\n          \"Mod-Enter\": chainCommands(\n            todoPlay,\n            dateSelect,\n            durationStart,\n            baseKeymap[\"Enter\"]\n          ),\n          \"Mod-Shift-Enter\": durationContinue,\n          \"Mod-Shift-8\": durationDouble,\n          \"Mod-ArrowDown\": selectNextHeader,\n          \"Mod-ArrowUp\": selectPrevHeader\n        }\n      : {\n          \"Ctrl-y\": redo,\n          \"Ctrl-ArrowDown\": selectNextHeader,\n          \"Ctrl-ArrowUp\": selectPrevHeader\n        })\n  }),\n  keymap(baseKeymap),\n\n  decorations\n];\n","import React, { createRef } from \"react\";\nimport { EditorView } from \"prosemirror-view\";\nimport { EditorState } from \"prosemirror-state\";\nimport { Icon, Menu, Segment, Ref, Sticky, Dropdown } from \"semantic-ui-react\";\n\nimport Stats from \"../Stats/Stats\";\nimport Slides from \"../Slides/Slides\";\nimport Agenda from \"../Agenda/Agenda\";\nimport CheatSheet from \"../CheatSheet/CheatSheet\";\nimport CommandsMenu from \"./CommandsMenu\";\n\nimport { showError } from \"../errors\";\nimport { getStorage } from \"../Storage\";\nimport { parseTodoNode } from \"../util\";\nimport { schema, plugins } from \"./setup\";\nimport { decorationsHandlers } from \"./decorations\";\n\nimport \"./Editor.css\";\n\n// This is used as part of the Prose element key. If you\n// increment it and re-render <Editor>, Prose will remount.\nlet __remountKey = 0;\n\nconst EDITOR_SHOWN = \"EDITOR_SHOWN\";\nconst HELP_SHOWN = \"HELP_SHOWN\";\nconst AGENDA_SHOWN = \"AGENDA_SHOWN\";\nconst STATS_SHOWN = \"STATS_SHOWN\";\nconst SLIDES_SHOWN = \"SLIDES_SHOWN\";\n\nclass Editor extends React.Component {\n  _componentElementRef = createRef();\n  _stickyMenuContextRef = createRef();\n\n  constructor(props) {\n    super(props);\n\n    const store = getStorage();\n\n    this._editorNode = null;\n    this._editorView = null;\n    this._editorState = null;\n\n    this.state = {\n      shown: EDITOR_SHOWN,\n      uploading: false,\n      note: store.getSelectedNote()\n    };\n\n    this.rerender = this.forceUpdate.bind(this);\n    this.storeUnsubscribe = store.subscribe(meta => {\n      const selected = store.getSelectedNote();\n\n      // Server updates should remount Prose in order to show\n      // updated state.\n      if (meta && meta.isServer) {\n        console.count(\"EDITOR_REMOUNT\"); // TODO: Prevent initial remount.\n\n        __remountKey++;\n        this.setState({ note: selected });\n        return;\n      }\n\n      if (this.state.note.id !== selected.id) {\n        this.setState({\n          note: selected,\n          shown: EDITOR_SHOWN\n        });\n      }\n    });\n  }\n\n  componentDidMount() {\n    const elm = this._componentElementRef.current;\n    elm.addEventListener(\"drop\", this.handleDrop, false);\n    elm.addEventListener(\"click\", this.handleClick, false);\n    elm.addEventListener(\"keyup\", this.handleCTRLUp, false);\n    elm.addEventListener(\"keydown\", this.handleCTRLDown, false);\n  }\n\n  componentWillUnmount() {\n    if (this._editorView) {\n      this._editorView.destroy();\n    }\n\n    const elm = this._componentElementRef.current;\n    elm.removeEventListener(\"drop\", this.handleDrop);\n    elm.removeEventListener(\"click\", this.handleClick);\n    elm.removeEventListener(\"keyup\", this.handleCTRLUp);\n    elm.removeEventListener(\"keydown\", this.handleCTRLDown);\n\n    this.storeUnsubscribe();\n  }\n\n  _createEditorView = element => {\n    if (element != null) {\n      this._editorNode = element;\n      const store = getStorage();\n      const { note } = this.state;\n      const content = store.getSelectedNoteContent();\n\n      this._editorState =\n        // NOTE: If content is an empty Object just create a new one.\n        content && Object.keys(content).length > 0\n          ? EditorState.fromJSON(\n              {\n                schema,\n                plugins\n              },\n              content\n            )\n          : EditorState.create({\n              schema,\n              plugins\n            });\n\n      this._editorView = new EditorView(element, {\n        state: this._editorState,\n        dispatchTransaction: tx => {\n          this._editorState = this._editorState.apply(tx);\n          this._editorView.updateState(this._editorState);\n\n          if (!tx.docChanged) return;\n\n          store.updateNote(\n            this.state.note.id,\n            // TODO: Delay these to the actual\n            // saving to improve performance.\n            {\n              meta: {\n                title: this.getTitle(),\n                tags: this.getTags(),\n                todos: this.getTodos().map(t => t.toJSON()),\n                images: this.getImages(),\n                summary: this.getSummary(),\n                highlights: this.getHighlights()\n              }\n            },\n            this._editorState.toJSON()\n          );\n        }\n      });\n\n      this.onFocus();\n    }\n  };\n\n  // ===========================================================================\n  // Handlers\n\n  handleCTRLDown = e => {\n    // Prevent default tab behavior.\n    if (e.keyCode === 9) {\n      e.preventDefault();\n      return;\n    }\n\n    // Allow clicking links when pressing control.\n    if (e.keyCode === 91) {\n      [...document.querySelectorAll(\"a\")].forEach(\n        a => (a.contentEditable = false)\n      );\n    }\n  };\n\n  handleCTRLUp = e => {\n    if (e.keyCode === 91) {\n      [...document.querySelectorAll(\"a\")].forEach(\n        a => (a.contentEditable = true)\n      );\n    }\n  };\n\n  handleClick = e => {\n    Object.keys(decorationsHandlers).forEach(className => {\n      if (e.target.classList.contains(className)) {\n        decorationsHandlers[className](e, e.target, this._editorView);\n      }\n    });\n  };\n\n  handleDrop = e => {\n    if (\n      !(\n        e.dataTransfer &&\n        e.dataTransfer.files &&\n        e.dataTransfer.files.length > 0\n      )\n    )\n      return;\n\n    const images = Array.from(e.dataTransfer.files).filter(file =>\n      /image/i.test(file.type)\n    );\n    if (images.length === 0) {\n      // TODO: Show error that only images are supported.\n      // TODO: Show error on wrong filessize;\n      return;\n    }\n\n    e.preventDefault();\n    this.setState({ uploading: true });\n\n    getStorage()\n      .uploadFile(images[0])\n      .then(url => {\n        this._editorView.dispatch(\n          this._editorView.state.tr.insertText(` [${url}] `).scrollIntoView()\n        );\n        this.setState({ uploading: false });\n      })\n      .catch(err => {\n        showError(err);\n        this.setState({ uploading: false });\n      });\n  };\n\n  // ===========================================================================\n  // Commands\n\n  getTitle() {\n    const heading =\n      this._editorNode && this._editorNode.querySelector(\".heading\");\n    return heading\n      ? heading.lastChild.textContent.trim().replace(/#+/g, \"\")\n      : \"--\";\n  }\n\n  getTodos() {\n    return (\n      this._editorNode &&\n      [...this._editorNode.querySelectorAll(\".todo\")]\n        .map(n => n.parentNode)\n        .map(n => parseTodoNode(n))\n    );\n  }\n\n  getImages() {\n    return (\n      this._editorNode &&\n      [...this._editorNode.querySelectorAll(\".img-text\")].map(n =>\n        n.textContent.trim().slice(1, -1)\n      )\n    );\n  }\n\n  getTags() {\n    const tags = this._editorNode && this._editorNode.querySelectorAll(\".tag\");\n    return tags ? [...tags].map(t => t.textContent.slice(1)) : [];\n  }\n\n  getSummary() {\n    return (\n      this._editorNode &&\n      Array.from(\n        this._editorNode.querySelectorAll(\n          \".ProseMirror > p:not(.ProseMirror-widget):nth-of-type(-n+5)\"\n        )\n      )\n        .map(p => p.innerText)\n        .join(\" \")\n        .replace(/\\.\\.\\./g, \"\")\n        .slice(0, 100)\n    );\n  }\n\n  getHighlights() {\n    return (\n      this._editorNode &&\n      Array.from(this._editorNode.querySelectorAll(\".highlight\")).map(p =>\n        p.innerText.slice(1, -1)\n      )\n    );\n  }\n\n  getTextContent = () => {\n    const editor = this._editorNode\n      .querySelector(\".ProseMirror\")\n      .cloneNode(true);\n\n    editor\n      .querySelectorAll(\".ProseMirror-widget\")\n      .forEach(w => w.parentNode.removeChild(w));\n\n    return Array.from(editor.childNodes)\n      .map((n, i) =>\n        /H\\d/i.test(n.tagName) && !!i ? `\\n${n.textContent}\\n` : n.textContent\n      )\n      .join(\"\\n\")\n      .replace(new RegExp(\"\", \"g\"), \" \");\n  };\n\n  // ===========================================================================\n  // Handlers\n\n  toggleMenuItem = item => {\n    this._editorNode.parentNode.scrollTo({\n      top: 0,\n      behavior: \"smooth\"\n    });\n    this.setState({ shown: item });\n  };\n  showEditor = () => this.toggleMenuItem(EDITOR_SHOWN);\n  toggleHelp = () => this.toggleMenuItem(HELP_SHOWN);\n  toggleStats = () => this.toggleMenuItem(STATS_SHOWN);\n  toggleSlides = () => this.toggleMenuItem(SLIDES_SHOWN);\n  toggleAgenda = () => this.toggleMenuItem(AGENDA_SHOWN);\n\n  // TODO: Example of commands for menu or something\n  onFocus() {\n    if (this._editorView) {\n      this._editorView.focus();\n    }\n  }\n\n  // ===========================================================================\n  // Rendering\n\n  renderHelp() {\n    return (\n      <div className=\"Editor--help\">\n        <CheatSheet />\n      </div>\n    );\n  }\n\n  renderMenu() {\n    const { shown } = this.state;\n    return (\n      <Sticky context={this._stickyMenuContextRef}>\n        <div className=\"Editor--menu\">\n          <Menu icon=\"labeled\">\n            <Menu.Item\n              name=\"file alternate outline\"\n              active={shown === EDITOR_SHOWN}\n              onClick={this.showEditor}\n              id=\"prose-show-editor\"\n            >\n              <Icon name=\"file alternate outline\" />\n              Editor\n            </Menu.Item>\n            <Menu.Item\n              name=\"clipboard list\"\n              active={shown === AGENDA_SHOWN}\n              onClick={this.toggleAgenda}\n              id=\"prose-show-agenda\"\n            >\n              <Icon name=\"clipboard list\" />\n              Agenda\n            </Menu.Item>\n\n            <Menu.Item\n              name=\"tv\"\n              active={shown === SLIDES_SHOWN}\n              onClick={this.toggleSlides}\n              id=\"prose-show-slides\"\n            >\n              <Icon name=\"tv\" />\n              Slides\n            </Menu.Item>\n\n            <Menu.Item\n              name=\"chart line\"\n              active={shown === STATS_SHOWN}\n              onClick={this.toggleStats}\n              id=\"prose-show-stats\"\n            >\n              <Icon name=\"chart line\" />\n              Stats\n            </Menu.Item>\n\n            <Menu.Item\n              name=\"help\"\n              active={shown === HELP_SHOWN}\n              onClick={this.toggleHelp}\n              id=\"prose-show-help\"\n            >\n              <Icon name=\"help\" />\n              Help\n            </Menu.Item>\n\n            <Menu.Menu position=\"right\">\n              <CommandsMenu\n                getView={() => this._editorView}\n                disabled={shown !== EDITOR_SHOWN}\n              />\n            </Menu.Menu>\n          </Menu>\n        </div>\n      </Sticky>\n    );\n  }\n\n  render() {\n    const { note, shown, uploading } = this.state;\n\n    return (\n      <Ref innerRef={this._stickyMenuContextRef}>\n        <div className=\"Editor\" ref={this._componentElementRef}>\n          {this.renderMenu()}\n          {uploading && <div className=\"Editor--Uploading\">Loading....</div>}\n          {shown === STATS_SHOWN && (\n            <Stats\n              todos={this.getTodos()}\n              getTextContent={this.getTextContent}\n            />\n          )}\n          {shown === AGENDA_SHOWN && (\n            <Agenda todos={this.getTodos()} rerender={this.rerender} />\n          )}\n          {shown === HELP_SHOWN && this.renderHelp()}\n          {shown === SLIDES_SHOWN && <Slides editor={this._editorNode} />}\n          <div\n            className=\"EditorWrapper\"\n            key={note.id + __remountKey}\n            ref={this._createEditorView}\n            style={shown === EDITOR_SHOWN ? {} : { display: \"none\" }}\n          />\n        </div>\n      </Ref>\n    );\n  }\n}\n\nexport default Editor;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport Menu from \"./Menu/Menu\";\nimport Editor from \"./Editor/Editor.js\";\n\nimport \"./App.css\";\n\nclass App extends Component {\n  static propTypes = {\n    firebase: PropTypes.object.isRequired\n  };\n\n  render() {\n    const { firebase } = this.props;\n    return (\n      <>\n        <Menu firebase={firebase} />\n        <Editor />\n      </>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport * as firebase from \"firebase/app\";\nimport * as firebaseui from \"firebaseui\";\nimport \"firebase/analytics\";\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\nimport \"firebase/storage\";\n\nimport App from \"./App\";\nimport { createStorage, getStorage } from \"./Storage\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nimport \"semantic-ui-css/semantic.min.css\";\nimport \"./index.css\";\n\nwindow._firebase = firebase;\nif (process.env.NODE_ENV !== \"development\") {\n  console.debug = () => {};\n  console.count = () => {};\n\n  delete window._firebase;\n}\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyBhVeDAZGXGaNZmPz0u4NSajNR9jhSZXMk\",\n  authDomain: \"prose-app.firebaseapp.com\",\n  databaseURL: \"https://prose-app.firebaseio.com\",\n  projectId: \"prose-app\",\n  storageBucket: \"prose-app.appspot.com\",\n  messagingSenderId: \"383371015272\",\n  appId: \"1:383371015272:web:549a0ff32e65d9062a77dd\",\n  measurementId: \"G-5GV4HX47QL\"\n};\n// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\nfirebase.analytics();\n\nconst uiConfig = {\n  // Providers setup\n  signInOptions: [\n    {\n      provider: firebase.auth.GoogleAuthProvider.PROVIDER_ID,\n      // Required to enable this provider in one-tap sign-up.\n      // authMethod: 'https://accounts.google.com',\n      scopes: [\"https://www.googleapis.com/auth/contacts.readonly\"],\n      customParameters: {\n        // Forces account selection even when one account\n        // is available.\n        prompt: \"select_account\"\n      }\n    },\n    {\n      provider: firebase.auth.EmailAuthProvider.PROVIDER_ID,\n      requireDisplayName: true\n    }\n  ],\n\n  // Will use popup for IDP Providers sign-in flow instead of the default, redirect.\n  signInFlow: \"popup\",\n\n  // Terms of service url/callback.\n  tosUrl: () => alert(\"TODO: Terms of service.\"),\n  // Privacy policy url/callback.\n  privacyPolicyUrl: () => alert(\"TODO: PrivacyPolicy\"),\n\n  credentialHelper: firebaseui.auth.CredentialHelper.NONE,\n\n  callbacks: {\n    // signInSuccess: () => false\n    signInSuccessWithAuthResult: function(authResult, redirectUrl) {\n      return false;\n    }\n  }\n};\n\nfirebase.auth().onAuthStateChanged(user => {\n  const container = document.getElementById(\"root\");\n  if (user) {\n    createStorage(firebase, () => {\n      container.innerHTML = \"\";\n      ReactDOM.render(<App firebase={firebase} />, container);\n    });\n\n    window.Store = getStorage();\n  } else {\n    // Initialize the FirebaseUI Widget using Firebase.\n    const initUI = () => {\n      const ui = new firebaseui.auth.AuthUI(firebase.auth());\n      // The start method will wait until the DOM is loaded.\n      container.innerHTML = \"\";\n      ui.start(\"#root\", uiConfig);\n    };\n\n    ReactDOM.unmountComponentAtNode(container);\n    const prevUI = firebaseui.auth.AuthUI.getInstance();\n    if (prevUI) {\n      prevUI.delete().then(initUI);\n    } else {\n      initUI();\n    }\n  }\n});\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}
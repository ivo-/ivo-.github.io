(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{295:function(e,t,n){},296:function(e,t,n){},297:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(21),i=n.n(o),c=(n(44),n(1)),l=n(3),u=n(11),s=n(5),d=n(10),h=n(18),f=n(14),m=n(13),p="__prose-editor-state__",g=new(function(){function e(){var t=this;Object(c.a)(this,e),this.addNewNote=function(){var e=t.getNextNoteId();t.setState({notes:[].concat(Object(m.a)(t.state.notes),[{id:e,content:null,meta:{title:null,tags:[]},created_at:new Date,updated_at:new Date,deleted_at:null}]),selectedNote:e})},this.selectNote=function(e){if(!t.state.notes.find(function(t){return t.id===e}))throw new Error("Cannot find note with id: ".concat(e));t.setState({selectedNote:e})},this.updateNote=function(e){t.setState({notes:t.state.notes.map(function(t){return t.id!==e.id?t:Object(f.a)({},t,e,{updated_at:new Date})})})},this.deleteNote=function(e){t.updateNote(Object(f.a)({},e,{deleted_at:new Date}))},this.restoreNote=function(e){t.updateNote(Object(f.a)({},e,{deleted_at:null}))},this.permanentlyDeleteNote=function(e){var n=t.state,a=n.notes,r=n.selectedNote,o=a.filter(function(t){return t!==e});t.setState({notes:o,selectedNote:r===e.id?o[0].id:r})},this.handlers=[],this.state=window.localStorage.getItem(p)?JSON.parse(window.localStorage.getItem(p)):{notes:[],selectedNote:null},0===this.state.notes.length&&this.addNewNote(),this.state.selectedNote&&this.getSelectedNote()||this.selectNote(this.state.notes[0].id)}return Object(l.a)(e,[{key:"subscribe",value:function(e){var t=this;return this.handlers.push(e),function(){t.handlers=t.handlers.filter(function(t){return t!==e})}}},{key:"setState",value:function(e){var t=Object(f.a)({},this.state,e);this.state=t,window.localStorage.setItem(p,JSON.stringify(t)),this.handlers.forEach(function(e){return e()})}},{key:"getActiveNotes",value:function(){return this.state.notes.filter(function(e){return!e.deleted_at})}},{key:"getInactiveNotes",value:function(){return this.state.notes.filter(function(e){return!!e.deleted_at})}},{key:"getNextNoteId",value:function(){return Math.max.apply(Math,Object(m.a)(this.state.notes.map(function(e){return e.id})).concat([0]))+1}},{key:"getSelectedNote",value:function(){var e=this.state,t=e.selectedNote,n=e.notes;return t&&n.find(function(e){return e.id===t})}},{key:"getNotesByTagsAndDate",value:function(){var e={};return this.getActiveNotes().sort(function(e,t){return e.updated_at-t.updated_at}).forEach(function(t){t.meta.tags.forEach(function(n){e[n]||(e[n]=[]),e[n].push(t)})}),e}}]),e}()),v=(n(45),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).handleToggleHidden=function(){n.setState({isHidden:!n.state.isHidden})},n.handleSearch=function(e){n.setState({search:e.target.value})},n.state={isHidden:!1,search:""},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.unsubscribe=g.subscribe(function(){return e.forceUpdate()})}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"render",value:function(){var e=this.state,t=e.isHidden,n=e.search,a=g.getSelectedNote(),o=g.getActiveNotes(),i=g.getInactiveNotes();if(n){var c=function(e){return e.meta.title.toLowerCase().includes(n.toLowerCase())};o=o.filter(c),i=i.filter(c)}return t?r.a.createElement("section",{className:"MenuTrigger",onClick:this.handleToggleHidden},"\u2907"):r.a.createElement("section",{className:"Menu"},r.a.createElement("button",{onClick:function(){return g.addNewNote()}},"+"),r.a.createElement("button",{onClick:this.handleToggleHidden},"Hide"),r.a.createElement("hr",null),r.a.createElement("input",{type:"text",placeholder:"Search...",value:n,onChange:this.handleSearch}),r.a.createElement("hr",null),r.a.createElement("h3",{className:"Menu--header"},"Notes"),r.a.createElement("ul",null,o.map(function(e){return r.a.createElement("li",{key:e.id,onClick:function(){return g.selectNote(e.id)},className:"Menu--item".concat(e===a?" active":"")},e.meta.title||"--",r.a.createElement("button",{onClick:function(t){t.stopPropagation(),g.deleteNote(e)}},"X"))})),r.a.createElement("h3",{className:"Menu--header"},"Archive"),r.a.createElement("ul",null,i.map(function(e){return r.a.createElement("li",{key:e.id,onClick:function(){return g.selectNote(e.id)},className:"Menu--item".concat(e===a?" active":"")},e.meta.title||"--",r.a.createElement("button",{onClick:function(t){t.stopPropagation(),g.permanentlyDeleteNote(e)}},"X"),r.a.createElement("button",{onClick:function(t){t.stopPropagation(),g.restoreNote(e)}},"^"))})),r.a.createElement("h3",{className:"Menu--header"},"Tags"),r.a.createElement("ul",null,Object.entries(g.getNotesByTagsAndDate()).map(function(e){var t=Object(h.a)(e,2),n=t[0],a=t[1];return r.a.createElement("li",null,"#",n," (",a.length,")")})))}}]),t}(r.a.Component)),b=n(12),E=n(4);function y(e){var t=new Date(e),n=""+(t.getMonth()+1),a=""+t.getDate(),r=t.getFullYear();return n.length<2&&(n="0"+n),a.length<2&&(a="0"+a),[r,n,a].join("-")}function w(){var e=function(e,t){for(var n=new Date(Date.UTC(t,e,1)),a=[];n.getMonth()===e;)a.push(new Date(n)),n.setDate(n.getDate()+1);return a}.apply(void 0,arguments),t=[],n=0;e.forEach(function(e){t[n]||(t[n]=[]),t[n].push(e),0===e.getDay()&&n++});for(var a=Math.max.apply(Math,Object(m.a)(t.map(function(e){return e.length})));t[0].length!==a;)t[0].unshift(null);for(;t[t.length-1].length!==a;)t[t.length-1].push(null);return t}function k(e){return e<10?"0".concat(e):e}var x=["January","February","March","April","May","June","July","August","September","October","November","December"];function S(e){var t={h:0,m:0,s:Math.round(e/1e3)};return N(t),t}function O(e){return e.slice(1).filter(Boolean).reduce(function(e,t){return e[t[t.length-1]]+=1*parseInt(t,10),e},{h:0,m:0,s:0})}function N(e){e.s>=60&&(e.m+=Math.floor(e.s/60),e.s=e.s%60),e.m>=60&&(e.h+=Math.floor(e.m/60),e.m=e.m%60)}function j(e){return"".concat(e.h?e.h+"h":"").concat(e.m?e.m+"m":"").concat(e.s?e.s+"s":"")||"0s"}var M=/(\d\d\d\d)-(\d\d)-(\d\d)(:?\s(\d\d):(\d\d))?/;function D(e){var t=function(e){var t=y(new Date),n=e.filter(function(e){return e.date&&e.date.includes(t)}).map(function(e){return Object(f.a)({},e,{dateMatch:e.date.match(M)})});if(0===n.length)return null;var a=n.filter(function(e){return!e.dateMatch[4]});return{withHour:n.filter(function(e){return!!e.dateMatch[4]}).sort(function(e,t){var n=e.dateMatch.slice(5),a=Object(h.a)(n,2),r=a[0],o=a[1],i=t.dateMatch.slice(5),c=Object(h.a)(i,2);return 60*r+1*o-(60*c[0]+1*c[1])}),noHour:a}}(e.todos);if(!t)return r.a.createElement("div",{className:"Editor--agenda"},r.a.createElement("h3",null,"Agenda"),"----");var n=t.withHour,a=t.noHour,o="00:00";return r.a.createElement("div",{className:"Editor--agenda"},r.a.createElement("h3",null,"Agenda"),r.a.createElement("ul",null,n.map(function(e,t){var n=e.dateMatch.slice(5),a=Object(h.a)(n,2),i=a[0],c=a[1],l="".concat(i,":").concat(c),u="";if(e.duration){var s=O(e.duration.match(/\b(\d\d?[hms])(\d\d?[ms])?(\d\d?s)?\b/));s.h+=1*i,s.m+=1*c,N(s),u="".concat(k(s.h),":").concat(k(s.m))}var d=null;return o!==l&&(d=r.a.createElement("li",{key:o},r.a.createElement("b",null,"[",o,"-",l,"]"),": ---------------------")),o=u||l,r.a.createElement(r.a.Fragment,null,d,r.a.createElement("li",{key:t},r.a.createElement("b",null,"[",l,u?"-".concat(u):"","]")," ",r.a.createElement("input",{type:"checkbox",defaultChecked:e.done,onClick:e.toggle}),e.text))}),"23:59"!==o&&r.a.createElement("li",{key:"last"},r.a.createElement("b",null,"[",o,"-23:59]"),": ---------------------")),r.a.createElement("h3",null,"Task for the day"),r.a.createElement("ul",null,a.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("input",{type:"checkbox",defaultChecked:e.done,onClick:e.toggle}),e.text)})))}function C(e){var t=e.todos,n=t.filter(function(e){return!e.done}),a=y(new Date);return r.a.createElement("div",{className:"Editor--stats"},r.a.createElement("ul",null,r.a.createElement("li",null,"You have ",r.a.createElement("b",null,n.length)," of ",t.length," items to do."),r.a.createElement("li",null,"You have"," ",r.a.createElement("b",null,n.filter(function(e){return e.date&&e.date.includes(a)}).length)," ","items to do today.")))}n(46);function T(){return r.a.createElement("div",{className:"CheatSheet"},r.a.createElement("button",{onClick:function(){}},"X"),r.a.createElement("ul",null,r.a.createElement("li",null,"# Heading 1"),r.a.createElement("li",null,"## Heading 2"),r.a.createElement("li",null,"### Heading 3"),r.a.createElement("li",null,"--- line separator")),r.a.createElement("ul",null,r.a.createElement("li",null,"#tag"),r.a.createElement("li",null,"*Bold*"),r.a.createElement("li",null,"/Italic/"),r.a.createElement("li",null,"_Underline_"),r.a.createElement("li",null,"-Striketrough-"),r.a.createElement("li",null,"`highlight`"),r.a.createElement("li",null,"http://somelink.com/")),r.a.createElement("ul",null,r.a.createElement("li",null,"* list"),r.a.createElement("li",null,"1. Ordered list"),r.a.createElement("li",null,"- Todo list"),r.a.createElement("li",null,"~Striketrough~")),r.a.createElement("ul",null,r.a.createElement("li",null,"<today>")),r.a.createElement("ul",null,r.a.createElement("li",null,"Counter [2]"),r.a.createElement("li",null,"Checkbox [-]"),r.a.createElement("li",null,"Quantity [1/10]"),r.a.createElement("li",null,"Timer [10m20s]"),r.a.createElement("li",null,"Date [01/20/2019]")),r.a.createElement("ul",null,r.a.createElement("li",null,"```",r.a.createElement("br",null),"comment",r.a.createElement("br",null),"```",r.a.createElement("br",null)),r.a.createElement("li",null,"===",r.a.createElement("br",null),"|--------|------------|--------|",r.a.createElement("br",null),"| *Name* | *Email* | *Date* |",r.a.createElement("br",null),"|--------|------------|--------|",r.a.createElement("br",null),"| ivo | ivo@abv.bg | |",r.a.createElement("br",null),"|--------|------------|--------|",r.a.createElement("br",null),r.a.createElement("br",null),"===",r.a.createElement("br",null))))}var _=n(35),L=n(32),A=n.n(L),H=n(2),I=n(9),q=n(23),P=n(38),U=n(36),V=n(24),z=n(19),F=n(29),B=n(37),R=n.n(B),J=n(33),W=n.n(J),$=document.createElement("div");$.classList.add("popup"),$.innerHTML='\n  <div class="content">\n    <header>\n      <h2>Popup</h2>\n      <button class="close">close</button>\n    </header>\n    <section>\n      some text\n    </section>\n    <footer></footer>\n  </div>\n',$.querySelector(".close").addEventListener("click",Z);var Y=$.querySelector("h2"),X=$.querySelector("section"),Q=$.querySelector("footer"),G=[];function K(e){var t=e.title,n=e.content,a=e.centered,o=void 0!==a&&a,c=e.actions,l=void 0===c?[]:c,u=e.onHide;$.parentNode||document.body.appendChild($),Y.innerHTML=t||"",X.innerHTML="",r.a.isValidElement(n)?i.a.render(n,X):X.innerHTML=n||"",o?X.classList.add("centered"):X.classList.remove("centered"),u&&G.push(u),Q.innerHTML="",l.forEach(function(e){var t=e.text,n=e.fn,a=document.createElement("button");a.innerHTML=t,a.addEventListener("click",n),Q.appendChild(a)})}function Z(){$.parentNode&&$.parentNode.removeChild($),i.a.unmountComponentAtNode(X),G.splice(0).forEach(function(e){return e()})}var ee=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).handleTogglePause=function(){var e=n.state.paused;e?n.componentDidMount():n.componentWillUnmount(),n.setState(Object(f.a)({paused:!e},e?{time:new Date}:{}))},n.handleStart=function(e){n.setState({automatic:e,current:0,time:new Date})},n.handleNextItem=function(e){var t=n.props.todos,a=n.state,r=a.current,o=a.data,i=a.time,c=r+1,l=new Date;n.setState({time:l,data:[].concat(Object(m.a)(o),[{done:e,time:l-i}]),current:c,finished:c===t.length})},n.state={time:new Date,data:[],current:-1,finished:!1,automatic:!1,paused:!1},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this._timer=setInterval(this.forceUpdate.bind(this),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this._timer)}},{key:"componentDidUpdate",value:function(){var e=this.props.todos,t=this.state,n=t.time,a=t.current,r=t.automatic;if(!t.finished&&r){var o=new Date,i=e[a],c=j(S(o-n));i.duration===c&&this.handleNextItem(!0)}}},{key:"getCurrentItem",value:function(){return this.props.todos[this.state.current]}},{key:"render",value:function(){var e=this,t=this.props,n=t.todos,a=t.onFinish,o=this.state,i=o.current,c=o.data,l=o.time,u=o.finished,s=o.automatic,d=o.paused,h=new Date,f=n[i],m=j(S(h-l)),p=n.find(function(e){return!e.duration});return u?r.a.createElement("div",null,c.filter(function(e){return e.done}).length," / ",c.length," items done.",r.a.createElement("button",{onClick:function(){return a(c)}},"Close")):f?r.a.createElement("div",null,r.a.createElement("div",{className:"TodoPlayer--text"},f.text),r.a.createElement("div",{className:"TodoPlayer--time"},m,f.duration&&" / ".concat(f.duration)),r.a.createElement("div",{className:"TodoPlayer--footer"},s?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:this.handleTogglePause},d?"Resume":"Pause")):r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(){return e.handleNextItem(!1)}},"Skip"),r.a.createElement("button",{onClick:function(){return e.handleNextItem(!0)}},"Done")))):r.a.createElement("div",{style:{textAlign:"left"}},r.a.createElement("p",null,r.a.createElement("button",{onClick:function(){return e.handleStart(!1)}},"Play Manual")," ","Manually switch tasks."),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("p",null,r.a.createElement("button",{onClick:function(){return e.handleStart(!0)},disabled:p},"Play Automatic")," ","Automatically switch task when its duration is over."," ",r.a.createElement("i",null,"Every task should have duration in order to play automatically.")))}}]),t}(r.a.Component),te=function(e){var t=document.createElement("div");return t.classList.add("indicator"),t.classList.add("todo-indicator"),t.innerHTML='\n    <button class="trigger">\n      ...\n    </button>\n    <div class="options">\n      <button data-action="start">Start</button>\n      <button data-action="reset">Reset</button>\n      <button data-action="delete_completed">Delete Completed</button>\n      <button data-action="delete_unfinished">Delete Unfinished</button>\n      <button data-action="copy">Copy list</button>\n    </div>\n  ',t.addEventListener("click",function(n){n.preventDefault();for(var a,o=n.target.dataset.action,i=[t.parentNode];(a=i[i.length-1])&&(a=a.nextElementSibling)&&a.querySelector(".todo");)i.push(a);switch(o){case"start":var c=i.map(function(e){var t=e.querySelector(".date"),n=e.querySelector(".duration"),a=e.cloneNode(!0);return Array.from(a.children).filter(function(e){return e.classList.contains("ProseMirror-widget")}).forEach(function(e){return e.parentNode.removeChild(e)}),{text:a.innerText.replace(/^(\-|\+)\s/,""),date:t&&t.innerText,duration:n&&n.innerText}});return void K({content:r.a.createElement(ee,{todos:c,onFinish:function(e){e.forEach(function(e,t){var n=e.done,a=(e.time,i[t].querySelector("input[type=checkbox]:not(:checked)"));n&&a.click()}),Z()}}),centered:!0});case"reset":return void i.map(function(e){return e.querySelector("input[type=checkbox]:checked")}).filter(Boolean).forEach(function(e){return e.click()});case"delete_unfinished":case"delete_completed":i.filter(function(e){return!!e.querySelector("input[type=checkbox]".concat("delete_unfinished"===o?":not(:checked)":":checked"))}).reverse().forEach(function(t){if(t.parentNode){var n=e.posAtDOM(t),a=e.state.doc.nodeAt(n),r=e.state.tr.deleteRange(n-2,n+a.nodeSize);e.dispatch(r)}});case"copy":default:return}}),t},ne=function(e,t,n){var a=document.createElement("span");return a.classList.add("duration--menu"),a.innerHTML='\n        <button class="duration--menu--trigger">\u25bc</button>\n        <div class="duration--menu--options">\n          <button data-action="play">Play</button>\n          <button data-action="start">Continue</button>\n          <button data-action="double">Double</button>\n        </div>\n      ',a.addEventListener("click",function(a){switch(a.target.dataset.action){case"start":var r=O(e),o={centered:!0,actions:[{text:"Stop",fn:Z}]},i=setInterval(function(){r.s+=1,N(r),K(Object(f.a)({content:j(r)},o))},1e3),c=j(r);return void K(Object(f.a)({},o,{content:j(r),onHide:function(){clearInterval(i),t.dispatch(t.state.tr.insertText(j(r),n(),n()+c.length))}}));case"double":var l=O(e);Object.keys(l).forEach(function(e){l[e]=2*l[e]}),N(l);var u=j(l);return void t.dispatch(t.state.tr.insertText(u,n(),n()+e[0].length));case"play":var s=j(O(e)),d=O([]),h={centered:!0,actions:[{text:"Stop",fn:Z}]},m=setInterval(function(){d.s+=1,N(d);var e=j(d);K(Object(f.a)({content:"".concat(e,"/").concat(s)},h)),e===s&&(clearInterval(m),K(Object(f.a)({},h,{content:"".concat(e,"/").concat(s),actions:[{text:"End",fn:Z}]})))},1e3);j(d);return void K(Object(f.a)({},h,{content:j(d),onHide:function(){clearInterval(m)}}))}}),a},ae=(n(293),n(294),{code:/^```/gi}),re={tableRow:/^\|(?:\s|\-|=).*$/gi,_heading:/^(#{1,5})\s.*$/gi},oe={quote:/^>\s/gi,bullet:/^\*\s/gi,ordered:/^\d+\.\s/gi,todo:/^(\-|\+)\s/gi},ie=Object(f.a)({bold:/\*\w[\w\s]*\w\*/gi,italic:/\/\w[\w\s]*\w\//gi,highlight:/(\`[^\`]+\`)|important|now|TODO:|NOTE:/gi,underline:/\_[^\_\s]+\_/gi,striketrough:/\~[^\~\s]+\~/gi,tag:/#[^\b\s#]+/gi,hr:/^\-\-\-$/gi,url:/https?:\/\/[a-z0-9\.]+/gi,explication:/\([^\)]+\)/gi,date:/\b(\d\d\d\d)-(\d\d)-(\d\d)(:?\s(\d\d):(\d\d))?\b/gi,duration:/\b(\d\d?[hms])(\d\d?[ms])?(\d\d?s)?\b/gi,_counter:/\[(\d+)\]/gi,_checkbox:/\[(\+|\-)\]\s/gi,_proportion:/\[(\d+)\/(\d+)\]/gi},oe),ce={todo:function(e,t,n){var a=[],r=n.resolve(t).node(),o=n.resolve(t-1).nodeBefore,i=n.resolve(t+r.nodeSize).node();a.push(b.a.widget(t+e.index,function(t,n){var a=document.createElement("input");return a.style.zIndex=2,a.style.position="relative",a.type="checkbox",a.checked="+"===e[1],a.addEventListener("click",function(a){t.dispatch(t.state.tr.insertText("+"===e[1]?"-":"+",n(),n()+1))}),a},{key:e[0]})),o&&/(\+|\-)\s/.test(o.textContent.slice(0,2))||!i||!/(\+|\-)\s/.test(i.textContent.slice(0,2))||a.push(b.a.widget(t+e.index,function(e){return te(e)},{key:r.textContent}));return a},duration:function(e,t){return[b.a.widget(t+e.index,function(t,n){return ne(e,t,n)},{key:e[0]})]},date:function(e,t){return[b.a.widget(t+e.index,function(t,n){var a=document.createElement("span");a.classList.add("date--menu"),a.innerHTML='\n          <button class="date--menu--trigger">\u25bc</button>\n        ';var r=document.createElement("input"),o=new Date(Date.parse(e[0]));r.value=y(o);new R.a({field:r,trigger:a.querySelector("button.date--menu--trigger"),firstDay:1,defaultDate:o,onSelect:function(){t.dispatch(t.state.tr.insertText(y(this.getDate()),n(),n()+e[0].length))}});return a},{key:e[0]})]},_checkbox:function(e,t){return[b.a.inline(t+e.index,t+e.index+e[0].length-1,{class:"checkbox",contenteditable:!1}),b.a.widget(t+e.index,function(t,n){var a=document.createElement("input");return a.style.zIndex=2,a.style.position="relative",a.type="checkbox",a.checked="+"===e[1],a.addEventListener("click",function(a){t.dispatch(t.state.tr.insertText("+"===e[1]?"-":"+",n()+1,n()+2))}),a},{key:e[0]})]},_counter:de,_proportion:de,_heading:function(e,t,n,a){return[b.a.node(t+e.index,t+e.index+a.nodeSize,{class:"heading",nodeName:"h".concat(e[1].length)}),b.a.inline(t+e.index+1,t+e.index+1+e[1].length,{class:"heading--hidden",contenteditable:!1}),b.a.widget(t+e.index+1,function(t,n){var a=document.createElement("div");return a.classList.add("indicator"),a.innerHTML="H".concat(e[1].length),a.addEventListener("click",function(a){a.preventDefault(),t.dispatch(t.state.tr.insertText(5===e[1].length?"#":"".concat(e[1],"#"),n(),n()+e[1].length))}),a},{key:e[0]})]}},le={},ue={_counter:!0,_checkbox:!0,_proportion:!0,date:!0,duration:!0};function se(e){var t=[],n={};return e.descendants(function(a,r){if(!le[e.resolve(r).node().type.name])if(a.isText){var o=!!a.text.match(re.tableRow);Object.keys(ie).forEach(function(n){for(var i=ie[n];;){var c=i.exec(a.text);if(!c)return;if(ue[n]&&o)return;"_"!==n[0]&&t.push(b.a.inline(r+c.index,r+c.index+c[0].length,Object(f.a)({class:n},"url"===n?{nodeName:"a",href:a.text,title:a.text}:{}))),ce[n]&&t.push.apply(t,Object(m.a)(ce[n](c,r,e,a)))}})}else Object.keys(re).forEach(function(n){for(var o=re[n];;){var i=o.exec(a.textContent);if(!i)return;"_"!==n[0]&&t.push(b.a.node(r+i.index,r+i.index+a.nodeSize,{class:n})),ce[n]&&t.push.apply(t,Object(m.a)(ce[n](i,r,e,a)))}}),Object.keys(ae).forEach(function(o){for(var i=ae[o];;){if(!i.exec(a.textContent))return;if(n[o]){if(n[o])if("continue"===function(){var a=r,i=n[o],c=[];return e.nodesBetween(i.pos,a+1,function(e,n){e.isText||(c.push(e.textContent),t.push(b.a.node(n,n+e.nodeSize,{class:o})))}),delete n[o],t.push(b.a.widget(i.pos+1,function(e,t){var n=document.createElement("pre"),a=c[0].replace("```",""),r=W.a.getLanguage(a)?W.a.highlight(a,c.slice(1,-1).join("\n")).value:c.slice(1,-1).join("\n");return n.innerHTML="".concat(c[0],"\n").concat(r,"\n").concat(c[c.length-1]),n.classList.add("code-highlight"),n},{key:c.join("\n")})),"continue"}())continue}else n[o]={node:a,pos:r}}})}),b.b.create(e,t)}function de(e,t){return[b.a.inline(t+e.index,t+e.index+1,{class:"counter--hidden"}),b.a.widget(t+e.index,function(t,n){var a=document.createElement("button");return a.className="counter--left",a.innerHTML="-",a.addEventListener("mousedown",function(e){e.preventDefault(),e.stopPropagation()}),a.addEventListener("click",function(a){a.stopPropagation(),a.preventDefault(),t.dispatch(t.state.tr.insertText("[".concat(Math.max(1*e[1]-1,0)).concat(e[2]?"/".concat(e[2]):"","]"),n(),n()+e[0].length))}),a},{key:e[0]}),b.a.inline(t+e.index+1,t+e.index+e[0].length-1,{class:"counter"}),b.a.inline(t+e.index+e[0].length-1,t+e.index+e[0].length,{class:"counter--hidden right"}),b.a.widget(t+e.index+e[0].length-1,function(t,n){var a=document.createElement("button");return a.className="counter--right",a.innerHTML="+",a.addEventListener("mousedown",function(e){e.preventDefault(),e.stopPropagation()}),a.addEventListener("click",function(a){a.preventDefault(),t.dispatch(t.state.tr.insertText("[".concat(Math.min(1*e[1]+1,e[2]?e[2]:1/0)).concat(e[2]?"/".concat(e[2]):"","]"),n()-e[0].length+1,n()+1))}),a},{key:e[0]})]}var he=new E.c({state:{init:function(e,t){return se(t.doc)},apply:function(e,t){return e.docChanged?se(e.doc):t}},props:{decorations:function(e){return this.getState(e)}}});function fe(e,t,n,a){var r=t.selection,o=r.$from,i=r.to,c=o.sharedDepth(i);if(0==c)return!1;for(var l=o.before(c),u=a.nodeDOM(l);!u.parentNode.classList.contains("ProseMirror");)u=u.parentNode;for(var s=u;s=s[e];)if(s.classList.contains("heading")){s.scrollIntoView({block:"start",inline:"nearest",behavior:"smooth"});var d=a.posAtDOM(s);return n(a.state.tr.setSelection(E.e.near(a.state.doc.resolve(d+1*s.tagName[1])))),!0}}function me(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return fe.apply(void 0,["nextElementSibling"].concat(t))}function pe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return fe.apply(void 0,["previousElementSibling"].concat(t))}var ge=new H.h({nodes:{doc:{content:"block+"},paragraph:{content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:function(){return["p",0]}},text:{group:"inline",toDOM:function(e){return e.text}},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:function(){return["br"]}}}}),ve=[function(){var e=[new F.a(/<calendar:?(\s\d\d\d\d-\d\d?)?>/,function(e,t,n,a){var r=e.schema.nodes.paragraph,o=t[1]?Object(_.a)(Date,Object(m.a)(t[1].split("-")).concat([0])):new Date,i=H.c.from([r.create(null,ge.text("*".concat(x[o.getMonth()]," ").concat(o.getFullYear(),"*"))),r.create(null,ge.text("|---------|---------|---------|---------|---------|---------|---------|")),r.create(null,ge.text("|\xa0\xa0*Mon*\xa0\xa0|\xa0\xa0*Tue*\xa0\xa0|\xa0\xa0*Wed*\xa0\xa0|\xa0\xa0*Thu*\xa0\xa0|\xa0\xa0*Fri*\xa0\xa0|\xa0\xa0*Sat*\xa0\xa0|\xa0\xa0*Sun*\xa0\xa0|")),r.create(null,ge.text("|---------|---------|---------|---------|---------|---------|---------|"))].concat(Object(m.a)(w(o.getMonth(),o.getFullYear()).map(function(t){return r.create(null,e.schema.text("| "+t.map(function(e){return e?"\xa0\xa0\xa0".concat(k(e.getDate()),"\xa0\xa0\xa0"):"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"}).join("|\xa0")+"|"))})),[r.create(null,ge.text("|---------|---------|---------|---------|---------|---------|---------|"))]));return e.tr.replaceWith(n,a,i)}),new F.a(/<[^>]+>/,function(e,t,n,a){var r=A.a.parse(t[0])[0];if(!r||1!==r.index)return null;var o=A.a.parseDate(t[0]);return o=y(o),e.tr.insertText(o,n,a)})];return Object(F.b)({rules:e})}(),Object(V.a)(),Object(U.a)(),Object(P.a)(),Object(q.b)(Object(f.a)({"Mod-z":V.c,"Shift-Mod-z":V.b,"Mod-i":z.b,"Shift-Enter":z.a.Enter,"Ctrl-Enter":z.a.Enter,Tab:function(e,t,n){var a=e.selection,r=a.$from,o=a.to,i=r.sharedDepth(o);if(0==i)return!1;var c=r.before(i),l=n.nodeDOM(c),u=[l];if(!l.classList.contains("tableRow"))return!1;for(var s=l;(s=s.nextElementSibling)&&s.classList.contains("tableRow");)u.push(s);for(var d=l;(d=d.previousElementSibling)&&d.classList.contains("tableRow");)u.unshift(d);var f=function(e,t,n){for(var a=function(e){return"|-"===e.slice(0,2)},r=e.filter(function(e){return!a(e)}).map(function(e){return e.replace(/\s\s*/g," ").trim().split("|")}),o=e.map(function(e,t){return a(e)?t:null}).filter(function(e){return null!==e}),i=Math.max.apply(Math,Object(m.a)(r.map(function(e){return e.length}))),c=r.map(function(e){var t=" ".repeat(i-e.length).split(" ");return[].concat(Object(m.a)(e),Object(m.a)(t))}),l=function(e){var t=Math.max.apply(Math,Object(m.a)(c.map(function(t){return t[e].length})));c.forEach(function(n){return n[e]=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ",a=e.length,r=Math.floor((t-a)/2),o=Math.ceil((t-a)/2);return"".concat(n.repeat(r)).concat(e).concat(n.repeat(o))}(n[e],t," ")})},u=0;u<i;u++)l(u);var s=c.map(function(e){return"| ".concat(e.filter(function(e,t){return""!==e}).join(" | ")," |")}),d=Object(m.a)(s[0]).map(function(e){return"|"!==e?"-":e}).join("");o.forEach(function(e){s.splice(e,0,d)});var h=e[t].slice(0,n).split("|").length-2,f=s[0].split("|").length-2,p=t,g=h+1;if(g===f){g=0;do{p+=1}while(o.includes(p));s[p]||(p=0)}return[s,p,g]}(u.map(function(e){return e.innerText}),u.indexOf(l),r.pos-c-1),p=Object(h.a)(f,3),g=p[0],v=p[1],b=p[2];u.forEach(function(e,a){var r=g[a].replace(new RegExp(" ","g"),"\xa0"),o=n.posAtDOM(e),i=n.state.doc.nodeAt(o),c=n.state.tr.insertText(r,o,o+i.nodeSize);if(a===v){var l=r.split("|").slice(0,b+2).join("|").trim().length;1===l&&(l=2),c.setSelection(E.f.create(c.doc,o+l,o+l-2))}t(c)})},Enter:function(e,t){var n=e.selection,a=n.$from,r=n.$to;if(e.selection instanceof E.b&&e.selection.node.isBlock)return!(!a.parentOffset||!Object(I.f)(e.doc,a.pos))&&(t&&t(e.tr.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(t){var o=r.parentOffset==r.parent.content.size,i=e.tr;e.selection instanceof E.f&&i.deleteSelection();var c=0==a.depth?null:a.node(-1).contentMatchAt(a.indexAfter(-1)).defaultType,l=o&&c?[{type:c}]:null,u=Object(I.f)(i.doc,i.mapping.map(a.pos),1,l);l||u||!Object(I.f)(i.doc,i.mapping.map(a.pos),1,c&&[{type:c}])||(l=[{type:c}],u=!0),u&&(i.split(i.mapping.map(a.pos),1,l),o||a.parentOffset||a.parent.type==c||!a.node(-1).canReplace(a.index(-1),a.indexAfter(-1),H.c.from(c.create(),a.parent))||i.setNodeMarkup(i.mapping.map(a.before()),c));var s=a.parent.textContent;Object.values(oe).forEach(function(e){var t;if(t=s.match(e))if(t[0]===s)i.delete(a.pos-2,a.pos+2);else{var n=t[0];"+ "==t[0]?n="- ":oe.ordered.test(t[0])&&(n="".concat(1*t[0][0]+1).concat(t[0].slice(1))),i.insertText(n.replace(" ","\xa0"))}}),re.tableRow.test(s)&&i.insertText("| ".replace(" ","\xa0")),t(i.scrollIntoView())}return!0}},/Mac/.test(navigator.platform)?{"Mod-Enter":z.a.Enter,"Mod-ArrowDown":me,"Mod-ArrowUp":pe}:{"Ctrl-y":V.b,"Ctrl-ArrowDown":me,"Ctrl-ArrowUp":pe})),Object(q.b)(z.a),he],be=(n(295),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).showEditor=function(){n.setState({helpShown:!1,agendaShown:!1,statsShown:!1})},n.toggleHelp=function(){return n.setState({helpShown:!n.state.helpShown,agendaShown:!1,statsShown:!1})},n.toggleStats=function(){return n.setState({statsShown:!n.state.statsShown,helpShown:!1,agendaShown:!1})},n.toggleAgenda=function(){return n.setState({agendaShown:!n.state.agendaShown,helpShown:!1,statsShown:!1})},n._createEditorView=function(e){null!=e&&(n.elm=e,n._editorState=n.note.content?E.a.fromJSON({schema:ge,plugins:ve},n.note.content):E.a.create({schema:ge,plugins:ve}),n._editorView=new b.c(e,{state:n._editorState,dispatchTransaction:function(e){n._editorState=n._editorState.apply(e),n._editorView.updateState(n._editorState),g.updateNote(Object(f.a)({},n.note,{content:n._editorState.toJSON(),meta:{title:n.getTitle(),tags:n.getTags()}}))}}))},n.elm=null,n._editorView=null,n._editorState=null,n.note=g.getSelectedNote(),n.unsubscribe=g.subscribe(function(){var e=g.getSelectedNote();n.note.id!==e.id&&(n.note=e,n.forceUpdate())}),n.state={helpShown:!1,agendaShown:!1,statsShown:!1},n}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",function(e){9!==e.keyCode?91===e.keyCode&&Object(m.a)(document.querySelectorAll("a")).forEach(function(e){return e.contentEditable=!1}):e.preventDefault()},!1),document.addEventListener("keyup",function(e){91===e.keyCode&&Object(m.a)(document.querySelectorAll("a")).forEach(function(e){return e.contentEditable=!0})},!1)}},{key:"componentWillUnmount",value:function(){this._editorView&&this._editorView.destroy(),this.unsubscribe()}},{key:"getTitle",value:function(){var e=this.elm&&this.elm.querySelector(".heading p");return e?e.lastChild.textContent.trim().replace(/#+/g,""):"--"}},{key:"getTodos",value:function(){return Object(m.a)(this.elm.querySelectorAll(".todo")).map(function(e){return e.parentNode}).map(function(e){var t=e.querySelector(".date"),n=e.querySelector(".duration"),a=e.cloneNode(!0);Array.from(a.children).filter(function(e){return e.classList.contains("ProseMirror-widget")}).forEach(function(e){return e.parentNode.removeChild(e)});var r=function(e){return e&&e.parentNode.removeChild(e)};return r(a.querySelector(".date")),r(a.querySelector(".duration")),{text:a.innerText.replace(/^(\-|\+)\s/,""),date:t&&t.innerText,done:"+"===a.innerText[0],duration:n&&n.innerText,toggle:function(){return e.querySelector("input[type=checkbox]").click()}}})}},{key:"getTags",value:function(){var e=this.elm&&this.elm.querySelectorAll(".tag");return e?Object(m.a)(e).map(function(e){return e.textContent.slice(1)}):[]}},{key:"getSummary",value:function(){}},{key:"onFocus",value:function(){this._editorView&&this._editorView.focus()}},{key:"renderHelp",value:function(){return r.a.createElement("div",{className:"Editor--help"},r.a.createElement(T,null))}},{key:"renderMenu",value:function(){var e=this.state,t=e.statsShown,n=e.agendaShown,a=e.helpShown,o=t||n||a;return r.a.createElement("div",{className:"Editor--menu"},r.a.createElement("button",{className:!o&&"active",onClick:this.showEditor},"Editor"),r.a.createElement("button",{className:n&&"active",onClick:this.toggleAgenda},"Agenda"),r.a.createElement("button",{className:t&&"active",onClick:this.toggleStats},"Stats"),r.a.createElement("button",{className:a&&"active",onClick:this.toggleHelp},"Help"))}},{key:"render",value:function(){var e=this.state,t=e.statsShown,n=e.agendaShown,a=e.helpShown,o=t||n||a;return r.a.createElement("div",{className:"Editor"},this.renderMenu(),t&&r.a.createElement(C,{todos:this.getTodos()}),n&&r.a.createElement(D,{todos:this.getTodos()}),a&&this.renderHelp(),r.a.createElement("div",{className:"EditorWrapper",key:this.note.id,ref:this._createEditorView,style:o?{display:"none"}:{}}))}}]),t}(r.a.Component)),Ee=(n(296),function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(v,null),r.a.createElement(be,null))}}]),t}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(Ee,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},39:function(e,t,n){e.exports=n(297)},44:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){}},[[39,1,2]]]);
//# sourceMappingURL=main.b6cd6afd.chunk.js.map
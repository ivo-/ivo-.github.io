{"version":3,"sources":["initial.js","errors.js","visibility.js","StorageFirebase.js","StorageInMemory.js","Storage.js","Menu/Menu.js","util.js","Stats/Stats.js","Slides/Slides.js","Sound.js","DatePicker/DatePicker.js","Editor/popup.js","Editor/PopupTodo.js","Editor/WidgetTodo.js","Editor/WidgetDuration.js","Editor/decorations.js","Agenda/Agenda.js","CheatSheet/CheatSheet.js","Editor/commands.js","Editor/CommandsMenu.js","Editor/setup.js","Editor/Editor.js","App.js","serviceWorker.js","index.js"],"names":["notes","meta","title","tags","todos","done","text","date","duration","images","summary","highlights","content","doc","type","selection","anchor","head","showError","err","alert","console","error","visibilityChangeHandlers","hidden","visibilityChange","document","msHidden","webkitHidden","addEventListener","isHidden","forEach","h","LOCAL_STORAGE_KEY","getNoteTemplate","id","userId","db","contentRef","concat","created_at","Date","updated_at","deleted_at","Storage","firebase","callback","f","_this","this","Object","classCallCheck","hasPendingUpdates","__pendingUpdates","setPendingUpdates","val","selectNote","_ref","asyncToGenerator","regenerator_default","a","mark","_callee","preventUpdate","newContent","_args","arguments","wrap","_context","prev","next","length","undefined","abrupt","state","Error","get","sent","_updateNoteDebounced","flush","_selectedNote","_selectedNoteContent","data","count","window","localStorage","setItem","handleUpdate","stop","_x","apply","addNewNote","noteData","_callee2","note","_context2","getNextNoteId","_userId","_db","getUserDoc","update","defineProperty","objectSpread","set","catch","_updateNote","_callee3","d","_context3","log","JSON","stringify","then","debounce","maxWait","updateNote","updateData","_firebase","firestore","Timestamp","now","deleteNote","_callee4","_context4","restoreNote","_callee5","_context5","permanentlyDeleteNote","_callee6","_context6","Promise","all","delete","FieldValue","uploadFile","file","name","getDate","toLocaleString","month","getFullYear","split","slice","storageRef","storage","ref","child","put","getDownloadURL","auth","currentUser","uid","_handlers","_callee8","userDoc","userData","i","_initialNotes$i","_context8","exists","initialNotes","objectWithoutProperties","keys","getItem","noteExists","Math","max","toConsumableArray","onSnapshot","_ref8","_callee7","_","newState","isServer","lastNote","_context7","metadata","hasPendingWrites","values","sort","b","seconds","deepEqual","_x2","_x3","e","preventDefault","returnValue","setTimeout","push","createClass","key","value","_this2","filter","fn","_len","args","Array","_key","collection","getNotesList","n","result","getActiveNotes","tag","instance","createStorage","_len2","_key2","construct","getStorage","LOCAL_STORAGE_STATE_KEY","LOCAL_STORAGE_SELECTED_KEY","reject","parse","reduce","sss","getSelectedNote","SideMenu","props","possibleConstructorReturn","getPrototypeOf","call","handleToggleExpanded","expanded","setState","includes","item","handleSearch","search","target","handleClearSearch","handleToggleTag","handleLogOut","signOut","location","reload","handleDelete","unsubscribe","subscribe","forceUpdate","_this$state","store","activeNotes","toLowerCase","react_default","createElement","Dropdown","displayName","icon","basic","size","compact","floating","labeled","button","className","Menu","direction","Menu_Menu","Item","disabled","Label","Icon","email","Divider","onClick","_this3","activeTags","getActiveFilteredNotes","entries","getNotesByTagsAndDate","map","_ref2","slicedToArray","active","color","_this4","_this$state2","selected","allActiveNotes","inactiveNotes","getInactiveNotes","_this$props","visible","onToggle","isSmallScreen","Sidebar","as","animation","onHide","vertical","renderUserInfo","Button","floated","Input","assign","placeholder","onChange","trim","link","Message","classNames","stopPropagation","open","Fragment","renderTags","React","Component","formatDate","getMonth","day","year","join","getDaysInMonthByWeeks","days","UTC","setDate","weeks","currentWeek","getDay","maxLen","w","unshift","getZeroBasedNum","num","monthNumToName","formatDateTime","moment","format","DAYS_OF_THE_WEEK","matchRecurringDay","_dayOfTheWeekNum","dayOfTheWeekStr","dayOfTheWeekNum","dayIndex","indexOf","_dayOfTheWeekStr$spli","_dayOfTheWeekStr$spli2","fromDay","toDay","fromDayIndex","toDayIndex","parseDuration","str","match","Boolean","parseInt","m","s","normalizeDuration","floor","durationToStr","getTextContent","textContent","toVisibleSpaces","toRealSpaces","parseTodoNode","querySelector","clone","cloneNode","from","children","c","classList","contains","parentNode","removeChild","node","innerText","replace","querySelectorAll","toggle","click","toJSON","blurOnTouchScreens","editor","TouchEvent","DocumentTouch","blur","Stats","today","notDone","words","readingTime","hours","minutes","Header","subheader","Grid","columns","textAlign","Column","Content","Subheader","Statistic","Group","widths","Value","horizontal","blob","Blob","saveAs","Or","Slides","_useState","useState","_useState2","page","setPage","currentSlide","slides","Pagination","defaultActivePage","totalPages","onPageChange","activePage","Segment","dangerouslySetInnerHTML","__html","outerHTML","positive","labelPosition","style","clear","Howl","volume","src","html5","alarm","Sound","play","_style","display","width","margin","backgroundColor","borderRadius","DatePicker","onSelect","setValue","showTime","isValid","react_datepicker_min_default","inline","toDate","showTimeInput","shouldCloseOnSelect","todayButton","fluid","ModalComponent","_ref$actions","actions","_ref$rawContent","rawContent","modalProps","handleClose","hidePopup","Modal","onClose","closeIcon","Actions","actionProps","popup","ReactDOM","unmountComponentAtNode","innerHTML","showPopup","body","appendChild","render","showDuration","PopupTodo","_React$Component","handleTogglePause","time","paused","pausedAtDuration","componentDidMount","componentWillUnmount","handleStart","automatic","current","handleNextItem","nextItem","nextTime","finished","inherits","_timer","setInterval","bind","clearInterval","_this$state3","currentTime","currentItem","currentDuration","itemDuration","getItemDuration","asSeconds","toFixed","isNoDurationItem","find","negative","onFinish","totalTime","List","verticalAlign","todo","maxDuration","Checkbox","label","defaultChecked","Popup","trigger","_this$props2","_this$state4","renderFinal","url","Image","wrapped","circular","renderInitial","handleClick","WidgetTodo","view","dom","add","WidgetTodo_Menu","action","fullTodoList","nextElementSibling","parsedNodes","PopupTodo_PopupTodo","_ref3","reverse","pos","posAtDOM","pN","nodeAt","tr","deleteRange","nodeSize","dispatch","setSelection","TextSelection","create","dateNode","createTextNode","TimeTracker","initial","currentTimeRef","setDuration","useEffect","timer","clearTimeout","Timer","_useState3","_useState4","subtract","WidgetDuration","prevText","WidgetDuration_Timer","WidgetDuration_TimeTracker","insertText","k","OpenCloseDecorations","code","folded","WholeNodeDecorations","tableRow","_heading","RepeatableDecorations","quote","bullet","ordered","_todo","genInlineDecorationRegex","char","RegExp","Decorations","hr","bold","italic","highlight","underline","striketrough","toggleFolded","_url","_img","_tag","_link","_date","_duration","_checkbox","_counter","_proportion","DecorationsWidgets","decos","Decoration","index","class","nodeName","data-pos","checked","currentNode","resolve","nodeBefore","nodeAfter","todoRegEx","test","widget","isInTableRow","data-startpos","data-endpos","href","getCounterWidgets","excludedNodes","excludedInTable","decorationsHandlers","getDecorations","openClose","descendants","isText","isTableRow","regex","exec","closing","opening","nodesBetween","p","getPos","lang","source","hljs","getLanguage","DecorationSet","start","end","elm","dataset","overlay","menu","WidgetDuration_WidgetDuration","createPopper","placement","startPos","endPos","previousElementSibling","min","Infinity","level","decorations","Plugin","init","decorationsSet","docChanged","getState","matchDate","lastIndex","matchRecurringDate","SMALL_PADDING","BIG_PADDING","Agenda","rerender","startOf","groups","forToday","recurring","dayNum","dayStr","isSame","_recurring$slice","_recurring$slice2","_matchDate$slice","_matchDate$slice2","fromTime","toTime","noHour","withHour","processTodos","info","prevTime","relaxed","doubling","divided","spaceTime","asMinutes","FEATURES","CheatSheet","Table","Row","HeaderCell","Body","pattern","keybindings","Cell","collapsing","_ref4","desc","getaTableDomNodes","_state$selection2","$from","to","same","sharedDepth","proseNode","before","nodeDOM","domNodes","selectHeader","prop","_state$selection4","scrollIntoView","block","behavior","offset","Selection","near","selectNextHeader","selectPrevHeader","insertImage","input","files","showHelp","showStats","showAgenda","showEditor","insertTable","schema","replaceSelectionWith","nodes","paragraph","insertLink","insertCode","_view$state$selection","insertQuote","insertCounter","insertQuantity","clickDurationButton","_state$selection7","durationButton","getTodoIndicatorNode","_state$selection9","CommandsMenu","getView","items","v","focus","description","Mousetrap","Schema","group","parseDOM","toDOM","hard_break","selectable","plugins","rules","InputRule","week","replaceWith","parsed","chrono","insert","parseDate","inputRules","history","dropCursor","gapCursor","keymap","Mod-z","undo","Shift-Mod-z","redo","Mod-l","selectParentNode","Mod-x","_state$selection13","NodeSelection","deleteSelection","Mod-Shift-l","_state$selection14","nodeSel","Shift-Enter","baseKeymap","Ctrl-Enter","Tab","chainCommands","rows","_state$selection3","_getFormattedTable","selectedRow","selectedChar","isLineRow","row","dataRows","separatorRowsIdxs","maxCellsNum","r","table","extraEmptyCells","repeat","_loop","maxWidth","toLength","padStr","fromLength","fromStart","fromEnd","ceil","padBothToLength","outputTable","lineRow","splice","selectedCell","resultCellsLength","nextSelectedRow","nextSelectedCell","findIndex","getFormattedTable","_getFormattedTable2","updatedNodes","posInCell","_state$selection10","_state$selection11","_state$selection5","currentHeader","nextHeader","firstBetween","lastBetween","opeing","insertBefore","nextSibling","Shift-Tab","_state$selection12","Enter","_state$selection","$to","isBlock","parentOffset","canSplit","parent","atEnd","deflt","depth","contentMatchAt","indexAfter","defaultType","types","can","mapping","canReplace","setNodeMarkup","Ctrl-1","Ctrl-2","Ctrl-3","Ctrl-4","Ctrl-5","Ctrl-r","Ctrl-Shift-r","Ctrl-u","navigator","platform","Mod-Enter","_state$selection8","dateButton","Mod-Shift-Enter","Mod-Shift-8","Mod-ArrowDown","Mod-ArrowUp","Ctrl-y","Ctrl-ArrowDown","Ctrl-ArrowUp","__remountKey","EDITOR_SHOWN","HELP_SHOWN","AGENDA_SHOWN","STATS_SHOWN","SLIDES_SHOWN","Editor","_componentElementRef","createRef","_stickyMenuContextRef","_createEditorView","element","_editorNode","getSelectedNoteContent","_editorState","EditorState","fromJSON","_editorView","EditorView","dispatchTransaction","tx","updateState","getTitle","getTags","getTodos","t","getImages","getSummary","getHighlights","onFocus","handleCTRLDown","keyCode","contentEditable","handleCTRLUp","handleDrop","dataTransfer","uploading","childNodes","tagName","toggleMenuItem","scrollTo","top","shown","toggleHelp","toggleStats","toggleSlides","toggleAgenda","assertThisInitialized","storeUnsubscribe","destroy","removeEventListener","heading","lastChild","headings","CheatSheet_CheatSheet","Sticky","context","Responsive","CommandsMenu_CommandsMenu","minWidth","position","Ref","innerRef","renderMenu","Stats_Stats","Agenda_Agenda","renderHelp","Slides_Slides","App","height","updateWindowDimensions","innerWidth","innerHeight","Pushable","Menu_SideMenu","Pusher","dimmed","src_Editor_Editor","hostname","debug","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","uiConfig","signInOptions","provider","EmailAuthProvider","PROVIDER_ID","requireDisplayName","signInFlow","tosUrl","privacyPolicyUrl","credentialHelper","firebaseui","CredentialHelper","NONE","callbacks","signInSuccessWithAuthResult","authResult","redirectUrl","onAuthStateChanged","user","container","getElementById","isUsingProductionStorage","FirebaseStorage","InMemoryStorage","src_App_0","Store","initUI","ui","AuthUI","prevUI","getInstance","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.917adb10.chunk.js","sourcesContent":["const notes = [\n  {\n    meta: {\n      title: \"Здрасти!\",\n      tags: [\"tag\"],\n      todos: [\n        {\n          done: false,\n          text: \"Обади се на майка си\",\n          date: null,\n          duration: null,\n          images: []\n        },\n        {\n          done: true,\n          text: \" Отиди да трнираш\",\n          date: null,\n          duration: null,\n          images: []\n        },\n        {\n          done: false,\n          text: \" Направи си вечеря\",\n          date: null,\n          duration: null,\n          images: []\n        },\n        {\n          done: false,\n          text: \" Отиди на пазар\",\n          date: null,\n          duration: null,\n          images: []\n        },\n        {\n          done: false,\n          text: \" Гледай филм\",\n          date: null,\n          duration: null,\n          images: []\n        },\n        {\n          done: false,\n          text: \"Задача 1\",\n          date: null,\n          duration: null,\n          images: []\n        },\n        {\n          done: false,\n          text: \" Задача 2\",\n          date: null,\n          duration: null,\n          images: []\n        },\n        {\n          done: false,\n          text: \" Jumping jacks\",\n          date: null,\n          duration: \"30s\",\n          images: []\n        },\n        { done: false, text: \" Rest\", date: null, duration: \"10s\", images: [] },\n        {\n          done: false,\n          text: \" Wall sit\",\n          date: null,\n          duration: \"30s\",\n          images: []\n        },\n        {\n          done: false,\n          text: \" Push-up\",\n          date: null,\n          duration: \"30s\",\n          images: []\n        },\n        {\n          done: false,\n          text: \" Rest \",\n          date: null,\n          duration: \"10s\",\n          images: []\n        },\n        {\n          done: false,\n          text: \" Abdominal crunch \",\n          date: null,\n          duration: \"30s\",\n          images: []\n        },\n        { done: false, text: \" Rest\", date: null, duration: \"10s\", images: [] },\n        {\n          done: false,\n          text: \"Step-up onto a chair  (може да стои на произволно място)\",\n          date: null,\n          duration: \"30s\",\n          images: []\n        },\n        {\n          done: false,\n          text: \"Get up and make your bed  \",\n          date: \"mon-fri 08:30\",\n          duration: \"5m\",\n          images: []\n        },\n        {\n          done: false,\n          text: \"Brush your teeth  \",\n          date: \"mon-fri 08:35\",\n          duration: \"3m\",\n          images: []\n        },\n        {\n          done: false,\n          text: \"Wash your face  \",\n          date: \"mon-fri 08:38\",\n          duration: \"2m\",\n          images: []\n        },\n        {\n          done: false,\n          text: \"Do a 10 min workout  \",\n          date: \"mon-fri 08:40\",\n          duration: \"10m\",\n          images: []\n        },\n        {\n          done: false,\n          text: \"Meditate for 20 min   \",\n          date: \"mon-fri 08:50\",\n          duration: \"20m\",\n          images: []\n        },\n        {\n          done: false,\n          text: \"Get up and make your bed  \",\n          date: \"sat-sun 10:00\",\n          duration: \"5m\",\n          images: []\n        },\n        {\n          done: false,\n          text: \"Brush your teeth  \",\n          date: \"mon-fri 10:05\",\n          duration: \"3m\",\n          images: []\n        },\n        {\n          done: false,\n          text: \"Brush your teeth \",\n          date: \"everyday 23:00\",\n          duration: null,\n          images: []\n        },\n        {\n          done: false,\n          text: \"Go to bed \",\n          date: \"everyday 23:30\",\n          duration: null,\n          images: []\n        },\n        {\n          done: false,\n          text:\n            \"Call your mother  (това е задача за деня без час и продължителност)\",\n          date: \"2020-02-20\",\n          duration: null,\n          images: []\n        },\n        {\n          done: false,\n          text: \"Interview   \",\n          date: \"2020-02-20 12:00\",\n          duration: \"1h\",\n          images: []\n        },\n        {\n          done: false,\n          text: \"[0/10] Кисели млека \",\n          date: \"2020-02-20\",\n          duration: null,\n          images: []\n        },\n        {\n          done: false,\n          text: \"[0/2] Хлляба\",\n          date: null,\n          duration: null,\n          images: []\n        },\n        {\n          done: false,\n          text: \"[1/9] Вафли боровец\",\n          date: null,\n          duration: null,\n          images: []\n        }\n      ],\n      images: [],\n      summary:\n        \" Здрасти! \\n Това е Private Beta версията на Prose. Prose представлява един нов (или поне малко по-ра\",\n      highlights: [\n        \"ivailo.nikolaev.hristov@gmail.com\",\n        \"HELP\",\n        \"Важен\",\n        \">\",\n        \"*\",\n        \"-\",\n        \"+\",\n        \"[71/88]\",\n        \"[51]\",\n        \"[-] или [+]\",\n        \"---\",\n        \"...\",\n        \"...\",\n        \"....\",\n        \"[https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png]\",\n        \"TAB\",\n        \"|\",\n        \"TAB\",\n        \"|-\",\n        \"TAB\",\n        \"<today>\",\n        \"<next friday at 5am>\",\n        \"<calendar>\",\n        \"<calendar: 2020-05>\",\n        \"reset\",\n        \"delete completed/unfinished\",\n        \"mark all for today\",\n        \"play\",\n        \"play\",\n        \"automatic\",\n        \"Agenda\",\n        \"<today\",\n        \"mark all for today\",\n        \"continue\",\n        \"countdown\",\n        \"Commands\"\n      ]\n    },\n    content: {\n      doc: {\n        type: \"doc\",\n        content: [\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"# Здрасти!\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"Това е Private Beta версията на Prose. Prose представлява един нов  (или поне малко по-различен) поглед върху типичните note taking и TODO приложеня. Основни характеристики: \"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"* Markdown базиран редактор за текст с някои  разширения - дати, продължителности, таблици, ...\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"* Заляга се основно върху работа с текст, вместо работа с User Interfaces.\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"* Някои текстови шаблони динамично се заменят от UI елементи (вместо UI елементите да се добавят с цъкане по менюта). Когато UI елемента бъдеизтрит, се връща текстовото му представяне.\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"* Предлага  автоматизация върху TODO листовете, датите, продължителностите, таблиците и някои други елементи. В повечето алтернативи тези елементи са просто статични.\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"* Мощни TODO листове, които работят в комбинация с дати и продължителности..\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"* Agenda view - график на задачите от текущия документ по дни, седмици (не е готово) и мсеци (не е готово).\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"* Slides view - възможност да се генерира презентация от текущата бележка.\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"Ако познаваш Markdown ще се оправиш. Можеш да мислиш за приложението като markdown редактор с доста автоматизация. \"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"Пиши ми за всякакви бъгове, feedback или идеи на `ivailo.nikolaev.hristov@gmail.com` \"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"След като прегледаш този докоумент виж и `HELP`  менюто за всички опции.\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"## Декорации\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"Декорациите на шаблони, които автоматично се ситилизират в текста.\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"* *Удебелен* текст\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"* /Наклонен/ текст\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"* _Подчертан_ текст\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"* ~Зачертан~ текст\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"* `Важен` текст \" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"* http://google.com линк (задръжте контрол и кликнете на линка за да се отвори)\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text: \"* [google](http://google.com) markdown линк със заглавие\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"* #tag таг (записките се организират по тагове в менюто от ляво, повече за менюто надолу)\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"## Блокови декорации \" }]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"*Цитати* - всеки ред, който започва с `>`  се декорира като цитат.\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"> Roses are red\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \">   Violets are blue\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"> Some poems ryme\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \">  But this one doesn't!\" }]\n          },\n          { type: \"paragraph\", content: [{ type: \"text\", text: \">  \" }] },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"*Подредени списъци* - всеки ред, който започва с число и точка се декорира като ред от подреден списък.\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"1. John Cena\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"2. The Rock\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"3. The Undertaker \" }]\n          },\n          { type: \"paragraph\", content: [{ type: \"text\", text: \"4. Kane\" }] },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"5. Jeff Hardy\" }]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"*Неподредени списъци* - всеки ред, който започва с `*` се декорира като ред от неподреден списък.\"\n              }\n            ]\n          },\n          { type: \"paragraph\", content: [{ type: \"text\", text: \"* Apples\" }] },\n          { type: \"paragraph\", content: [{ type: \"text\", text: \"* Oranges\" }] },\n          { type: \"paragraph\", content: [{ type: \"text\", text: \"* Peaches\" }] },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"*Списъци от задачи* - всеки ред, който започва с `-` или `+` се декорира като задача. (за задачите има специална секция надолу)\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"-  Обади се на майка си\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"-  Отиди да трнираш\" }]\n          },\n          { type: \"paragraph\", content: [{ type: \"text\", text: \"- \" }] },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"-  Направи си вечеря\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"-  Отиди на пазар\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"-  Гледай филм\" }]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"*Блок от код* - като в markdown. \" }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"```javascript\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"var a = 10;\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"var b = 20;\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"var e = 20;\" }]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"function sum(x, y){\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"  alert(x + y);\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"  return x + y;\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"  // comment is here\" }]\n          },\n          { type: \"paragraph\", content: [{ type: \"text\", text: \"}\" }] },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"alert('ffdfd');\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: 'var c = \"fasfasf\";' }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"const c =  + b;\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: 'new Error(\"fsdfsdfsdfsdf\");' }]\n          },\n          { type: \"paragraph\", content: [{ type: \"text\", text: \"```\" }] },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"## Елементи\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"Една от основите идеи в Prose е, че документа се миксират UI и текст. UI елементите могат да се кликат, копират, изтриват и т.н. Всеки елемент се явява декорация върху някакъв текстов шаблон, ако напишете шаблона, той автоматично ще се трансформира в съответния елемент.\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"*Количество* [71/88]                         Шаблон: `[71/88]`\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"*Брояч*            [51]                                 Шаблон: `[51]`\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"*Чекбокс*         [-] или [-]                        Шаблон: `[-] или [+]`\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"*Хоризонтална линия* - `---`\" }]\n          },\n          { type: \"paragraph\", content: [{ type: \"text\", text: \"---\" }] },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"*Дата и време*  - шаблона е самата дата, която просто се декорира. Кликенете на дата за да изберете друга такава.\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"* 2020-01-30 \" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"* 2019-12-20 11:30 (с време)\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"* mon-fri 13:30 (повтаряща се дата)\" }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"* everyday 08:17 | mon 19:20\" }]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"*Продлжителност* - обозначава продължителност от време, може да се използва също като таймер или time tracker. Кликнете за опции.\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text: \"* 20h43m15s  - 20 часа, 43  минути и 14 секунди\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"* 20m - 20 минути\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"* 17s - 17 секунди\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"* 1h04s - 1 час с 4 секунди\" }]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"*Свиване на съдържание*\" }]\n          },\n          { type: \"paragraph\", content: [{ type: \"text\", text: \"....\" }] },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"Дълъг текст който може да бъде скрит.\" }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"(натинете на зеленото квадратче по-горе)\" }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"Всички редове между `...` и `...` биват скрити. Когато първата част от макета е с четири точки `....` тя става бутон.\"\n              }\n            ]\n          },\n          { type: \"paragraph\", content: [{ type: \"text\", text: \"...\" }] },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"*Картинки*\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"Шаблон: `[https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png]`\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"[https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png]\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"## Таблици\" }]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"*December 2020*\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"|---------|---------|---------|---------|---------|---------|---------|\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"|  *Mon*  |  *Tue*  |  *Wed*  |  *Thu*  |  *Fri*  |  *Sat*  |  *Sun*  |\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"|---------|---------|---------|---------|---------|---------|---------|\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"|         |    01   |    02   |    03   |    04   |    05   |    06   |\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"|    07   |    08   |    09   |    10   |    11   |    12   |    13   |\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"|    14   |    15   |    16   |    17   |    18   |    19   |    20   |\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"|    21   |    22   |    23   |    24   |    25   |    26   |    27   |\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"|    28   |    29   |    30   |    31   |         |         |         |\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"|---------|---------|---------|---------|---------|---------|---------|\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"* Направете промяна в таблицата и натистенте `TAB` за да се реформатира.\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"* Добавете нов ред в края на таблицата започващ с `|` и натиснете `TAB`.\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"* Добавете нов ред в края на таблицата започващ с `|-`  и натиснете `TAB`.\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text: \"* За момента не е позволено да има елементи в таблицата.\"\n              }\n            ]\n          },\n          { type: \"paragraph\", content: [{ type: \"text\", text: \"## Откъси\" }] },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"Откъсите текстови шаблони, които биват заменяни динамично с друг текст. Пробвайте да препишете някой от шаблоните.\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"* Днешната дата - `<today>`\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text: \"* Дата в свободен текст - `<next friday at 5am>`\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text: \"* Календар за текущия месец - `<calendar>`\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text: \"* Календар за избран месец - `<calendar: 2020-05>`\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"## Листове от задачи\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"За една от основните иновации в Prose, смятаме TODO листовете. Две или повече задачи написани една след друга, формират TODO лист.\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"- Задача 1\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"-  Задача 2\" }]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text: \"Prose предлага някои автоматизации върху TODO листвете:\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"* `reset` - нулира всички готови задачи.\" }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"* `delete completed/unfinished` - изтрива съответно свършените или несвършените задачи.\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"* `mark all for today` - добавя днешната дата към всяка от задачите.\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"* `play` - стартира задачите в TODO листа последователно и до пълното изпълнение на целия лист. Повече за тази опция надолу.\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"`play` опцията може да се използва за дефиниране на рутини или всякакви последователности от действия като готвене, тренировки и т.н. Можете да добавите продължителност към всяка задача в листа. Стартирайте долния лист в `automatic` режим.\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"- 30s Jumping jacks\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"- 10s Rest\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"- 30s Wall sit\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"- 30s Push-up\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"- 10s Rest \" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"- 30s Abdominal crunch \" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"- 10s Rest\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"- Step-up onto a chair 30s (може да стои на произволно място)\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text: \"* Някои от опциите имат клаившни комбинации.\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"## Agenda - График за деня\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"Prose документите могат да се изпозлват за генериране на график за деня. В менюто `Agenda` са извлечени и представени в хронологичен ред всички задачи от всички TODO листове в *текущия документ*, които трябва да бъдат свършени в съответния ден. Забележете как към всяка задача има дата и продължителност.\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"*Сутришна рутина*\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text: \"- Get up and make your bed mon-fri 08:30 5m\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"- Brush your teeth mon-fri 08:35 3m\" }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"- Wash your face mon-fri 08:38 2m\" }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"- Do a 10 min workout mon-fri 08:40 10m\" }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"- Meditate for 20 min  mon-fri 08:50 20m\" }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"*Сутришна рутина - weekend*\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text: \"- Get up and make your bed sat-sun 10:00 5m\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"- Brush your teeth mon-fri 10:05 3m\" }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"*Вечерна рутина*\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"- Brush your teeth everyday 23:00\" }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"- Go to bed everyday 23:30\" }]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"*Задачи с дати* (променете датите за текущия ден, може да използвате `<today` откъса или опцията от менюто `mark all for today`)\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"- Call your mother 2020-02-20 (това е задача за деня без час и продължителност)\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"- Interview 2020-02-21 12:00 1h \" }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"-  kamen 2020-02-21 17:30\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"## Комбинации \" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"Елементие могат да се комбинират в системи, които да пасват нуждите и удобството на потребителите. Примери:\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"*Seinfeld календар* - може да се имплементира с таблица, чекбокси или тодо лист.\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"|----------|----------|----------|----------|----------|----------|----------|\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"|   Mon    |   Tue    |   Wed    |   Thu    |   Fri    |   Sat    |   Sun    |\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"|----------|----------|----------|----------|----------|----------|----------|\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"|          |          |          |          |          |          |  01 [-]  |\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"|  02 [-]  |  03 [-]  |  04 [-]  |  05 [-]  |  06 [-]  |  07 [-]  |  08 [-]  |\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"|  09 [-]  |  10 [-]  |  11 [-]  |  12 [-]  |  13 [-]  |  14 [-]  |  15 [-]  |\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"|  16 [-]  |  17 [-]  |  18 [-]  |  19 [-]  |  20 [-]  |  21 [-]  |  22 [-]  |\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"|  23 [-]  |  24 [-]  |  25 [-]  |  26 [-]  |  27 [-]  |  28 [-]  |  29 [-]  |\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"|  30 [-]  |  31 [-]  |          |          |          |          |          |\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"|----------|----------|----------|----------|----------|----------|----------|\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"*Shopping list*\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"- [3/10] Кисели млека\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"- [1/2] Хлляба\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"- [3/9] Вафли боровец\" }]\n          },\n          { type: \"paragraph\" },\n          { type: \"paragraph\", content: [{ type: \"text\", text: \"*Брояч*\" }] },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"Колко пъти ходих до тоалетна днес? [7] \" }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"Колко калории изядох днес ? [1482] \" }\n            ]\n          },\n          { type: \"paragraph\" },\n          { type: \"paragraph\", content: [{ type: \"text\", text: \"*Време*\" }] },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"Колко медитирах този месец? 20m (използвайте `continue` опцията)\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"Стартиране на помодоро 25m (използвайте `countdown` опцията) \"\n              }\n            ]\n          },\n          { type: \"paragraph\", content: [{ type: \"text\", text: \"## Други\" }] },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"* Меню (от ляво) - показва всички създадени бележки, могат да се филтрират по таговете в докуемнта. (в стил http://bear.app/)\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"* Качване на картинка - завлечете и пуснете картинката на желаното място в документа или използвайте менюто с команди.\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text: \"* Статистики - статистики за *текущия документ*.\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"* Презентации - генерира презентация от съдържанието на документа (това е незавършена и екпериментална функционалност за сега)\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"* Команди - виж меню `Commands`\" }]\n          }\n        ]\n      },\n      selection: { type: \"text\", anchor: 187, head: 187 }\n    }\n  }\n\n  // {\n  //   content: {\n  //     doc: {\n  //       type: \"doc\",\n  //       content: [\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"# PRD\" }] },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"## Описане\" }]\n  //         },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"---\" }] },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text:\n  //                 \"`Prose` - smart documents and a toolkit for personal organization. You just write markdown and prose performs various automation for you. A toolkit to organize your life and work.\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"## Пробем\" }]\n  //         },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"---\" }] },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text:\n  //                 \"Пазарът с ТОДО приложенията и тези за записки като цяло е доста препълнен. Постоянно се създават нови, но някакак еднакви приложения. Основните проблеми на приложенията от този тип са:\"\n  //             }\n  //           ]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"* Прекалено сложни\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"* Прекалено прости и лишени от функционалности\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"* Неудобен и/или бавен потребителски интерфейс\"\n  //             }\n  //           ]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text:\n  //                 \"Хората, които ползват такива неща обикновено са много чувствителни на тема продуктивност и не обичат да си губят времето и инструмента им да им пречи. За това много от тях прибягват просто до статични текстови файлове. Това, което целим е да запзим простотата на текстовите файлове и да добавим функциите на UI приложенията + още, които не биха били възможни ако не боравехме само с текст.\"\n  //             }\n  //           ]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text:\n  //                 \"Идеята е потребителят пише текст и този текст автоматично се певръща в UI елементи.\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"## Алтернативни приложения\" }]\n  //         },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"---\" }] },\n  //         { type: \"paragraph\" },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"* Bear\" }] },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"* Evernote\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"* Notion\" }]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"Ключови разлики:\" }]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text:\n  //                 \"1. Интерфейс - изцяло базиран на текст, който рисува UI елементи. Писането на текст е по-бързо от цъкане по менюта.\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             { type: \"text\", text: \"2. Изключително мощни TODO листове\" }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"3. Таблици\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"4. Статистики и автоматиазции\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"5. Мултиплатформеност (не е вързан с Apple)\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"## Елементи\" }]\n  //         },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"---\" }] },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"### Декорации и листове\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"* Дебел тескт: *пример*\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"* Подчертан текст: _пример_\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"* Наклонен текст: /пример/\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"* Зачертан текст: ~пример~\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"* Подчертан текст: _пример_\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"* Пояснение: (пример)\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"* Важен текст: `пример`\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"* Хоризонтална лияния:  \" }]\n  //         },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"---\" }] },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: '(трансофмрирмация от \"---\" в началото на реда)'\n  //             }\n  //           ]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text:\n  //                 \"^^ Горното е пример за неподреден сиписък. Поддържат се също така и подредени спицъци:\"\n  //             }\n  //           ]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"1. Ябълки\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"2. Банани\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"3. Круши\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"4. Пъпеши\" }]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"`<Enter>` създава нов елемент на текущия списък.\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text:\n  //                 \"`<Shift+Enter>` създава нов ред, без той да е елемент на текущия списк. \"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"### Линкове\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"Засичат се автоматично: http://google.com\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text:\n  //                 \"Редактират се свободно като останлия текст. Потребителят може да ги натисне като задържи ключа CTRL.\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"Има пояснение (title) за това поведение на hover.\"\n  //             }\n  //           ]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"`<CTRL + Click>`  - отваряне на линка в нов прозорец.\"\n  //             }\n  //           ]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"### Хедъри\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"Навигация\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"### Дати\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"### Таймери/Продължителности\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"### Количества и броячи\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"Използват се \" }]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"`[ 1/3 ]` създава [0/3]\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"`[1 ]`      създава [1]\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"### TODO листове\" }]\n  //         },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"Звуци \" }] },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"Дати\" }] },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"Таймери\" }] },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"### Код\" }] },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"### Цитати\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"### Таблици\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"|------------------|---------|--------------------|\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"|      *Name*      |  *Age*  |    *Profession*    |\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"|------------------|---------|--------------------|\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"|    Brad Pitt     |   56    |       Actor        |\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"|  Britney Spears  |   32    |   Singer / Actor   |\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"|   Donald Trump   |   73    |  President of USA  |\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"|    Jeff Bezos    |   52    |    Entrepeneur     |\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"|------------------|---------|--------------------|\"\n  //             }\n  //           ]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"### Тагове\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text:\n  //                 \"Таговете са средство за огранизация на бележките, както и за включване и изключване на определни опции. Бележките се групират по тагове в менюто за бележки.\"\n  //             }\n  //           ]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"#таг #друг-таг \" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"### Вмъквания\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"`<дата >`\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"`<calendar>`\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"`<calendar: 2019-11>`\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"### Комбинации\" }]\n  //         },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"Streak:\" }] },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"Labeld checkbox \" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"## Меню с бележки\" }]\n  //         },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"---\" }] },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"Последни\" }]\n  //         },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"Архив\" }] },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"Тагове\" }] },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"## Статистики\" }]\n  //         },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"---\" }] },\n  //         { type: \"paragraph\" },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"## Опции за документ\" }]\n  //         },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"---\" }] },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text:\n  //                 \"Опциите представляват като тагове и са локални за съотвения документ. За да активира някоя опция, потребителят просто трябва да добави съответния таг, към желания документ.\"\n  //             }\n  //           ]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"#notify - изпращай известия за предстоящи събития\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             { type: \"text\", text: \"#watch - синхонизирай с AppleWatch\" }\n  //           ]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text:\n  //                 \"Трябва да имаме меню, къдто да са изброени всички опции. Когато потребителят избира опция от менюто, ще се добавя съответния таг в края на документа.\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"## Клавишни комбинации\" }]\n  //         },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"---\" }] },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"* Стандартни\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"`Mod-ArrowUp`\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"`Mod-ArrowDown`\" }]\n  //         },\n  //         { type: \"paragraph\" },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"* Вим \" }] },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"* Емакс\" }] },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"Навигация по хедърите.\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"## Бизнес модел\" }]\n  //         },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"---\" }] },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text:\n  //                 \"* Безплатен -> ти съхваняваш файловете си и ги дистрибутираш на желаните платформи.\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text:\n  //                 \"* Платен -> ние съхраняваме файловете ти и ги синхронизираме с Iphone и Apple watch app\"\n  //             }\n  //           ]\n  //         },\n  //         { type: \"paragraph\" }\n  //       ]\n  //     },\n  //     selection: { type: \"text\", anchor: 2, head: 2 }\n  //   },\n  //   meta: { title: \"PRD\", tags: [\"таг\", \"друг-таг\", \"notify\", \"watch\"] }\n  // },\n];\n\nexport default notes;\n","export function showError(err) {\n  alert(err);\n  console.error(err);\n}\n","let visibilityChangeHandlers = [];\n(() => {\n  let hidden, visibilityChange;\n  if (typeof document.hidden !== \"undefined\") {\n    // Opera 12.10 and Firefox 18 and later support\n    hidden = \"hidden\";\n    visibilityChange = \"visibilitychange\";\n  } else if (typeof document.msHidden !== \"undefined\") {\n    hidden = \"msHidden\";\n    visibilityChange = \"msvisibilitychange\";\n  } else if (typeof document.webkitHidden !== \"undefined\") {\n    hidden = \"webkitHidden\";\n    visibilityChange = \"webkitvisibilitychange\";\n  }\n\n  document.addEventListener(\n    visibilityChange,\n    () => {\n      const isHidden = document[hidden];\n      visibilityChangeHandlers.forEach(h => h(isHidden));\n    },\n    false\n  );\n})();\n\nexport function onVisibilityChange(f) {\n  visibilityChangeHandlers.push(f);\n  return () => {\n    visibilityChangeHandlers = visibilityChangeHandlers.filter(h => h !== f);\n  };\n}\n","import debounce from \"lodash.debounce\";\nimport deepEqual from \"deep-equal\";\n\nimport initialNotes from \"./initial.js\";\nimport { showError } from \"./errors\";\nimport { onVisibilityChange } from \"./visibility\";\n\n// TODO:\n//\n// - [ ] Store last update to local storage and restore on next load\n//       if failed. Maybe create copy of note like bear does.\n// - [ ] Do an alternative localstorage storage.\n//\n\nconst LOCAL_STORAGE_KEY = \"__prose-editor-selected_note__\";\n\nfunction getUserTemplate() {\n  return {\n    notes: {}\n  };\n}\n\nfunction getNoteTemplate(id, userId, db) {\n  return {\n    id,\n    contentRef: db.doc(`${userId}/${id}`),\n    meta: {\n      title: null,\n      tags: []\n    },\n    created_at: new Date(),\n    updated_at: new Date(),\n    deleted_at: null\n  };\n}\n\nexport class Storage {\n  constructor(firebase, callback) {\n    this._userId = firebase.auth().currentUser.uid;\n    this._firebase = firebase;\n\n    this._db = firebase.firestore(); // Firebase data\n    this._handlers = []; // Storage for update handlers.\n\n    // TODO:\n    // this._db.enablePersistence({ synchronizeTabs: true });\n\n    // Selected note is not part of the state as user may have multiple\n    // app instances at the same time. It is kept only in local storage.\n    this._selectedNote = null;\n    this._selectedNoteContent = null;\n\n    // State is the data persisted in Firebase.\n    this.state = null; // TODO: Eventually rename to user data.\n\n    (async () => {\n      const userDoc = this.getUserDoc();\n\n      console.count(\"FIREBASE_READ\");\n      let userData = await userDoc.get();\n      if (!userData.exists) {\n        console.count(\"FIREBASE_WRITE\");\n        await userDoc.set(getUserTemplate());\n\n        console.count(\"FIREBASE_READ\");\n        userData = await userDoc.get();\n        this.state = userData.data();\n\n        for (let i = 0; i < initialNotes.length; i++) {\n          const { content, ...noteData } = initialNotes[i];\n          await this.addNewNote(content, noteData);\n        }\n      } else {\n        userData = userData.data();\n        this.state = userData;\n      }\n\n      if (Object.keys(this.state.notes).length === 0) {\n        await this.addNewNote();\n      }\n\n      const id = window.localStorage.getItem(LOCAL_STORAGE_KEY);\n      if (this.noteExists(id)) {\n        await this.selectNote(id, true);\n      } else {\n        await this.selectNote(Math.max(...Object.keys(this.state.notes)), true);\n      }\n\n      userDoc.onSnapshot(async (doc, _) => {\n        console.count(\"FIREBASE_READ\");\n\n        const newState = doc.data();\n        const isServer = !doc.metadata.hasPendingWrites;\n        if (!newState.notes[this._selectedNote]) {\n          // NOTE: If selected note is missing, select the last updated\n          //       note is there are notes at all.\n          const lastNote = Object.values(newState.notes).sort(\n            (a, b) => b.updated_at.seconds - a.updated_at.seconds\n          )[0];\n\n          if (lastNote) {\n            await this.selectNote(lastNote.id);\n          }\n        } else if (\n          isServer &&\n          !deepEqual(\n            newState.notes[this._selectedNote],\n            this.state.notes[this._selectedNote]\n          )\n        ) {\n          // NOTE: If we have a server update for current note re-select\n          //       in order to reaload its content.\n          await this.selectNote(this._selectedNote, true);\n        }\n\n        this.state = newState;\n        if (Object.keys(this.state.notes).length === 0) {\n          this.addNewNote().then(() => {\n            this.handleUpdate();\n          });\n        } else {\n          this.handleUpdate({ isServer });\n        }\n      });\n    })()\n      .then(() => {\n        callback();\n      })\n      .catch(error => {\n        showError(error);\n      });\n\n    // NOTE: Prevent accidental tab close when update is not finished.\n    window.addEventListener(\"beforeunload\", e => {\n      if (this.hasPendingUpdates()) {\n        e.preventDefault();\n        e.returnValue = \"\"; // Chrome requires returnValue to be set\n        setTimeout(() => {\n          // NOTE: If user ends up allowing the update, do it immediately.\n          this._updateNoteDebounced.flush();\n        }, 1);\n        return false;\n      }\n\n      return true;\n    });\n\n    // NOTE: Run the pending updates every time user switch to\n    //       other tab or application.\n    onVisibilityChange(() => {\n      if (this.hasPendingUpdates()) {\n        this._updateNoteDebounced.flush();\n      }\n    });\n  }\n\n  // ===========================================================================\n  // Subscription\n\n  subscribe(f) {\n    this._handlers.push(f);\n    return () => {\n      this._handlers = this._handlers.filter(fn => fn !== f);\n    };\n  }\n\n  handleUpdate(...args) {\n    this._handlers.forEach(h => h(...args));\n  }\n\n  // ===========================================================================\n  // Pending updates\n\n  hasPendingUpdates = () => this.__pendingUpdates;\n  setPendingUpdates = val => (this.__pendingUpdates = val);\n\n  // ===========================================================================\n  // Selectors\n\n  getUserDoc() {\n    return this._db.collection(\"users\").doc(this._userId);\n  }\n\n  getSelectedNote() {\n    return this.state.notes[this._selectedNote];\n  }\n\n  getSelectedNoteContent() {\n    return this._selectedNoteContent;\n  }\n\n  noteExists(id) {\n    return !!this.state.notes[id];\n  }\n\n  getNextNoteId() {\n    return Math.max(...Object.keys(this.state.notes), 0) + 1;\n  }\n\n  getNotesList() {\n    return Object.values(this.state.notes).sort(\n      (a, b) => b.updated_at.seconds - a.updated_at.seconds\n    );\n  }\n\n  getActiveNotes() {\n    return this.getNotesList().filter(n => !n.deleted_at);\n  }\n\n  getInactiveNotes() {\n    return this.getNotesList().filter(n => !!n.deleted_at);\n  }\n\n  getNotesByTagsAndDate() {\n    const result = {};\n    this.getActiveNotes()\n      .sort((a, b) => a.updated_at - b.updated_at)\n      .forEach(note => {\n        note.meta.tags.forEach(tag => {\n          if (!result[tag]) result[tag] = [];\n          result[tag].push(note);\n        });\n      });\n\n    return result;\n  }\n\n  // ===========================================================================\n  // Mutations\n\n  selectNote = async (id, preventUpdate = false) => {\n    if (id === this.selectNote) return;\n\n    if (!this.state.notes[id]) {\n      throw new Error(`No note with id: ${id}`);\n    }\n\n    // NOTE: Make sure calls are in parallel.\n    const newContent = await this.state.notes[id].contentRef.get();\n    if (this.hasPendingUpdates()) {\n      await this._updateNoteDebounced.flush();\n    }\n\n    this._selectedNote = id;\n    this._selectedNoteContent = (await newContent).data();\n\n    console.count(\"FIREBASE_READ\");\n    window.localStorage.setItem(LOCAL_STORAGE_KEY, id);\n\n    if (!preventUpdate) this.handleUpdate();\n  };\n\n  addNewNote = (content = {}, noteData = {}) => {\n    return (async () => {\n      const id = this.getNextNoteId();\n      const note = getNoteTemplate(id, this._userId, this._db);\n\n      console.count(\"FIREBASE_WRITE\");\n      await this.getUserDoc().update({\n        [`notes.${id}`]: { ...note, ...noteData }\n      });\n\n      console.count(\"FIREBASE_WRITE\");\n      await note.contentRef.set(content);\n      this.state.notes[id] = note;\n\n      this.selectNote(id);\n    })().catch(error => {\n      showError(error);\n    });\n  };\n\n  _updateNote = (id, data, content) => {\n    const { notes } = this.state;\n\n    return (async () => {\n      if (content) {\n        console.count(\"FIREBASE_WRITE\");\n        await notes[id].contentRef.set(content);\n      }\n\n      console.count(\"FIREBASE_WRITE\");\n      const d = { ...notes[id], ...data, content, contentRef: null };\n      console.log(JSON.stringify(d));\n      await this.getUserDoc().update({\n        [`notes.${id}`]: {\n          ...notes[id],\n          ...data\n        }\n      });\n    })()\n      .then(() => {\n        this.handleUpdate();\n        this.setPendingUpdates(false);\n      })\n      .catch(error => {\n        showError(error);\n      });\n  };\n\n  _updateNoteDebounced = debounce(this._updateNote, 5 * 1000, {\n    maxWait: 15 * 1000\n  });\n\n  updateNote = (id, data, content) => {\n    const updateData = {\n      ...data,\n      updated_at: this._firebase.firestore.Timestamp.now()\n    };\n\n    // NOTE: Optimistic instant update. It will be overridden\n    // when update notification is received.\n    this.state.notes[id] = {\n      ...this.state.notes[id],\n      ...updateData\n    };\n\n    this.setPendingUpdates(true);\n    this._updateNoteDebounced(id, data, content);\n\n    // NOTE: Skip content update it is here either ways.\n    if (content) this._selectedNoteContent = content;\n\n    this.handleUpdate();\n  };\n\n  deleteNote = id => {\n    (async () => {\n      if (this.hasPendingUpdates()) {\n        await this._updateNoteDebounced.flush();\n      }\n      await this._updateNote(id, {\n        deleted_at: this._firebase.firestore.Timestamp.now()\n      });\n    })().catch(error => {\n      showError(error);\n    });\n  };\n\n  restoreNote = id => {\n    (async () => {\n      if (this.hasPendingUpdates()) {\n        await this._updateNoteDebounced.flush();\n      }\n      await this._updateNote(id, {\n        deleted_at: null\n      });\n    })().catch(error => {\n      showError(error);\n    });\n  };\n\n  permanentlyDeleteNote = id => {\n    (async () => {\n      if (this.hasPendingUpdates()) {\n        await this._updateNoteDebounced.flush();\n      }\n\n      const note = this.state.notes[id];\n      await Promise.all([\n        note.contentRef.delete(),\n        this.getUserDoc().update({\n          [`notes.${id}`]: this._firebase.firestore.FieldValue.delete()\n        })\n      ]);\n    })().catch(error => {\n      showError(error);\n    });\n  };\n\n  // ===========================================================================\n  // Files\n\n  uploadFile = file => {\n    const { _firebase, _userId } = this;\n\n    const now = new Date();\n    const name = `Photo ${now.getDate()} ${now.toLocaleString(\"default\", {\n      month: \"long\"\n    })} ${now.getFullYear()}, ${Date.now()}.${\n      file.name.split(\".\").slice(-1)[0]\n    }`;\n\n    const userDirRef = _firebase.storage().ref(_userId);\n    const storageRef = userDirRef.child(name);\n\n    return storageRef.put(file).then(doc => storageRef.getDownloadURL());\n  };\n}\n\n// =============================================================================\n// Exports\n\nlet instance = null;\n\nexport function createStorage(...args) {\n  return (instance = new Storage(...args));\n}\n\nexport function getStorage() {\n  if (!instance) {\n    throw new Error(\"Create store before using it\");\n  }\n  return instance;\n}\n","import initialNotes from \"./initial.js\";\nimport { showError } from \"./errors\";\n\nconst LOCAL_STORAGE_STATE_KEY = \"__prose-editor-in-memory-store__\";\nconst LOCAL_STORAGE_SELECTED_KEY = \"__prose-editor-in-memory-store-selected__\";\n\nfunction getNoteTemplate(id, content = null, noteData = {}) {\n  return {\n    id,\n    content,\n    meta: {\n      title: null,\n      tags: []\n    },\n    created_at: new Date(),\n    updated_at: new Date(),\n    deleted_at: null,\n    ...noteData\n  };\n}\n\n// TODO: Move to pro in a callback.\nexport class Storage {\n  constructor(firebase, callback) {\n    this._userId = firebase.auth().currentUser.uid;\n    this._firebase = firebase;\n\n    this._handlers = []; // Storage for update handlers.\n\n    // Selected note is not part of the state as user may have multiple\n    // app instances at the same time. It is kept only in local storage.\n    this._selectedNote =\n      window.localStorage.getItem(LOCAL_STORAGE_SELECTED_KEY) || null;\n\n    // State is the data persisted in Firebase.\n    this.state = window.localStorage.getItem(LOCAL_STORAGE_STATE_KEY)\n      ? JSON.parse(window.localStorage.getItem(LOCAL_STORAGE_STATE_KEY))\n      : {\n          notes: initialNotes.reduce((result, { content, ...noteData }, i) => {\n            result[i + 1] = getNoteTemplate(i + 1, content, noteData);\n            return result;\n          }, {})\n        };\n\n    if (Object.keys(this.state.notes).length === 0) {\n      this.addNewNote();\n    }\n\n    if (!this.noteExists(this._selectedNote)) {\n      this.selectNote(Math.max(...Object.keys(this.state.notes)), true);\n    }\n\n    window.sss = this;\n\n    setTimeout(() => {\n      callback();\n    }, 10);\n  }\n\n  // ===========================================================================\n  // Subscription\n\n  subscribe(f) {\n    this._handlers.push(f);\n    return () => {\n      this._handlers = this._handlers.filter(fn => fn !== f);\n    };\n  }\n\n  handleUpdate(...args) {\n    if (!this.noteExists(this._selectedNote)) {\n      this.selectNote(Math.max(...Object.keys(this.state.notes)), true);\n    }\n\n    if (Object.keys(this.state.notes).length === 0) {\n      this.addNewNote();\n    }\n\n    window.localStorage.setItem(\n      LOCAL_STORAGE_STATE_KEY,\n      JSON.stringify(this.state)\n    );\n\n    this._handlers.forEach(h => h(...args));\n  }\n\n  // ===========================================================================\n  // Selectors\n\n  getSelectedNote() {\n    return this.state.notes[this._selectedNote];\n  }\n\n  getSelectedNoteContent() {\n    return this.getSelectedNote().content;\n  }\n\n  noteExists(id) {\n    return !!this.state.notes[id];\n  }\n\n  getNextNoteId() {\n    return Math.max(...Object.keys(this.state.notes), 0) + 1;\n  }\n\n  getNotesList() {\n    return Object.values(this.state.notes).sort(\n      (a, b) => b.updated_at.seconds - a.updated_at.seconds\n    );\n  }\n\n  getActiveNotes() {\n    return this.getNotesList().filter(n => !n.deleted_at);\n  }\n\n  getInactiveNotes() {\n    return this.getNotesList().filter(n => !!n.deleted_at);\n  }\n\n  getNotesByTagsAndDate() {\n    const result = {};\n    this.getActiveNotes()\n      .sort((a, b) => a.updated_at - b.updated_at)\n      .forEach(note => {\n        note.meta.tags.forEach(tag => {\n          if (!result[tag]) result[tag] = [];\n          result[tag].push(note);\n        });\n      });\n\n    return result;\n  }\n\n  // ===========================================================================\n  // Mutations\n\n  selectNote = id => {\n    if (id === this.selectNote) return;\n\n    if (!this.state.notes[id]) {\n      throw new Error(`No note with id: ${id}`);\n    }\n\n    this._selectedNote = id;\n    window.localStorage.setItem(LOCAL_STORAGE_SELECTED_KEY, id);\n    this.handleUpdate();\n  };\n\n  addNewNote = () => {\n    const id = this.getNextNoteId();\n    const note = getNoteTemplate(id);\n\n    this.state.notes[id] = note;\n    this.selectNote(id);\n  };\n\n  updateNote = (id, data, content) => {\n    const updateData = {\n      ...data,\n      content,\n      updated_at: this._firebase.firestore.Timestamp.now()\n    };\n\n    console.log(JSON.stringify(content));\n\n    this.state.notes[id] = {\n      ...this.state.notes[id],\n      ...updateData\n    };\n\n    this.handleUpdate();\n  };\n\n  deleteNote = id => {\n    this.state.notes[id] = {\n      ...this.state.notes[id],\n      deleted_at: this._firebase.firestore.Timestamp.now()\n    };\n    this.handleUpdate();\n  };\n\n  restoreNote = id => {\n    this.state.notes[id] = {\n      ...this.state.notes[id],\n      deleted_at: null\n    };\n    this.handleUpdate();\n  };\n\n  permanentlyDeleteNote = id => {\n    delete this.state.notes[id];\n    this.handleUpdate();\n  };\n\n  // ===========================================================================\n  // Files\n\n  uploadFile = () => {\n    return Promise.reject(\n      new Error(\"Uploading files is not supported in the free version.\")\n    );\n  };\n}\n\n// =============================================================================\n// Exports\n\nlet instance = null;\n\nexport function createStorage(...args) {\n  return (instance = new Storage(...args));\n}\n\nexport function getStorage() {\n  if (!instance) {\n    throw new Error(\"Create store before using it\");\n  }\n  return instance;\n}\n","import * as FirebaseStorage from \"./StorageFirebase\";\nimport * as InMemoryStorage from \"./StorageInMemory\";\n\nlet instance = null;\n\nexport function createStorage(...args) {\n  const [firebase] = args;\n  const { email } = firebase.auth().currentUser;\n  const isUsingProductionStorage = /@prose\\.com$/.test(email);\n\n  if (isUsingProductionStorage) {\n    console.log(\"You are using PRODUCTION storage\");\n  } else {\n    console.log(\"You are using IN MEMORY storage\");\n  }\n\n  // TODO: Support for premium accounts.\n  instance = isUsingProductionStorage\n    ? FirebaseStorage.createStorage(...args)\n    : InMemoryStorage.createStorage(...args);\n}\n\nexport function getStorage() {\n  if (!instance) {\n    throw new Error(\"Create store before using it\");\n  }\n  return instance;\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport {\n  Dropdown,\n  Icon,\n  Input,\n  Menu,\n  Label,\n  Button,\n  Segment,\n  Rail,\n  Message,\n  Divider,\n  List,\n  Sidebar\n} from \"semantic-ui-react\";\n\nimport { getStorage } from \"../Storage\";\nimport \"./Menu.css\";\n\nexport default class SideMenu extends React.Component {\n  static propTypes = {\n    firebase: PropTypes.object.isRequired\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      search: \"\",\n      tag: null,\n      expanded: []\n    };\n  }\n\n  // ===========================================================================\n  // Handlers\n\n  handleToggleExpanded = (e, name) => {\n    const { expanded } = this.state;\n    this.setState({\n      expanded: expanded.includes(name)\n        ? expanded.filter(item => item !== name)\n        : [...expanded, name]\n    });\n  };\n\n  handleSearch = e => {\n    this.setState({ search: e.target.value });\n  };\n\n  handleClearSearch = () => {\n    this.setState({ search: \"\" });\n  };\n\n  handleToggleTag = tag => {\n    this.setState({ tag: this.state.tag === tag ? null : tag });\n  };\n\n  handleLogOut = () =>\n    this.props.firebase\n      .auth()\n      .signOut()\n      .then(() => window.location.reload());\n\n  handleDelete = () =>\n    this.props.firebase\n      .auth()\n      .currentUser.delete()\n      .then(() => window.location.reload())\n      .catch(e => {\n        // TODO:\n        alert(\"nooo\");\n      });\n\n  // ===========================================================================\n  // Hooks\n\n  componentDidMount() {\n    this.unsubscribe = getStorage().subscribe(() => this.forceUpdate());\n  }\n\n  componentWillUnmount() {\n    this.unsubscribe();\n  }\n\n  // ===========================================================================\n  // Rendering\n\n  getActiveFilteredNotes() {\n    const { search, tag } = this.state;\n    const store = getStorage();\n    const selected = store.getSelectedNote();\n\n    const allActiveNotes = store.getActiveNotes();\n    let activeNotes = allActiveNotes;\n    if (search) {\n      const filterFn = n =>\n        n.meta.title.toLowerCase().includes(search.toLowerCase());\n      activeNotes = activeNotes.filter(filterFn);\n    }\n\n    if (tag) {\n      const filterFn = n => n.meta.tags.includes(tag);\n      activeNotes = activeNotes.filter(filterFn);\n    }\n\n    return activeNotes;\n  }\n\n  renderUserInfo() {\n    const { currentUser } = this.props.firebase.auth();\n    return (\n      <Dropdown\n        text={currentUser.displayName + \" \"}\n        icon=\"user\"\n        basic\n        size=\"tiny\"\n        compact\n        floating\n        labeled\n        button\n        className=\"icon\"\n      >\n        <Dropdown.Menu direction=\"left\">\n          <Menu.Item disabled>\n            <Label>\n              <Icon name=\"user\" /> {currentUser.displayName}\n            </Label>\n            <br /> <br />\n            <Label>\n              <Icon name=\"mail\" /> {currentUser.email}\n            </Label>\n          </Menu.Item>\n          <Divider />\n          <Dropdown.Item\n            icon=\"log out\"\n            text=\"Logout\"\n            onClick={this.handleLogOut}\n          />\n          <Dropdown.Item\n            icon=\"delete\"\n            text=\"Delete\"\n            onClick={this.handleDelete}\n          />\n          <Dropdown.Item\n            icon=\"edit\"\n            text=\"Edit\"\n            onClick={() => {\n              // TODO:\n              alert(\"TODO:\");\n            }}\n          />\n        </Dropdown.Menu>\n      </Dropdown>\n    );\n  }\n\n  renderTags() {\n    const store = getStorage();\n    const activeTags = this.getActiveFilteredNotes().reduce((result, note) => {\n      note.meta.tags.forEach(tag => {\n        result[tag] = true;\n      });\n      return result;\n    }, {});\n    return (\n      <Menu.Menu>\n        {Object.entries(store.getNotesByTagsAndDate()).map(([tag, notes]) => (\n          <Menu.Item\n            key={tag}\n            active={this.state.tag === tag}\n            disabled={!activeTags[tag]}\n            onClick={() => this.handleToggleTag(tag)}\n          >\n            #{tag}\n            {activeTags[tag] && (\n              <Label {...(this.state.tag === tag ? { color: \"teal\" } : {})}>\n                {notes.length}\n              </Label>\n            )}\n          </Menu.Item>\n        ))}\n      </Menu.Menu>\n    );\n  }\n\n  render() {\n    const { search, expanded } = this.state;\n    const store = getStorage();\n    const selected = store.getSelectedNote();\n\n    const allActiveNotes = store.getActiveNotes();\n    const inactiveNotes = store.getInactiveNotes();\n\n    let activeNotes = this.getActiveFilteredNotes();\n    const { visible, onToggle, isSmallScreen } = this.props;\n\n    if (visible === false) return null;\n\n    return (\n      <Sidebar\n        as={Menu}\n        animation=\"push\"\n        onHide={isSmallScreen ? onToggle : () => {}}\n        visible={visible}\n        className=\"Menu\"\n        vertical\n      >\n        <Menu.Item>\n          {this.renderUserInfo()}\n          <Button\n            icon={{ name: \"plus\", color: \"olive\" }}\n            basic\n            size=\"tiny\"\n            floated=\"right\"\n            onClick={() => store.addNewNote()}\n          />\n        </Menu.Item>\n        <Menu.Item>\n          <Input\n            placeholder=\"Search...\"\n            value={search}\n            onChange={this.handleSearch}\n            {...(!!search.trim()\n              ? {\n                  icon: {\n                    name: \"close\",\n                    link: true,\n                    onClick: this.handleClearSearch\n                  }\n                }\n              : {})}\n          />\n        </Menu.Item>\n\n        <Menu.Item className=\"Menu--Notes\">\n          Notes\n          {activeNotes.length !== allActiveNotes.length && (\n            <Label>\n              {activeNotes.length} / {allActiveNotes.length}\n            </Label>\n          )}\n          <Divider />\n          <Menu.Menu>\n            {activeNotes.length === 0 && (\n              <Message visible className=\"Menu--Notes--Message\">\n                No notes found.\n              </Message>\n            )}\n\n            {activeNotes.map(n => (\n              <Dropdown\n                item\n                key={n.id}\n                text={n.meta.title || \"--\"}\n                direction=\"left\"\n                className={classNames(n === selected && \"active\")}\n                onClick={e => {\n                  e.stopPropagation();\n                  store.selectNote(n.id);\n                }}\n                {...(n !== selected ? { open: false } : {})}\n              >\n                <Dropdown.Menu>\n                  <Dropdown.Item\n                    icon=\"archive\"\n                    text=\"Archive\"\n                    onClick={e => {\n                      e.stopPropagation();\n                      store.deleteNote(n.id);\n                    }}\n                  />\n                </Dropdown.Menu>\n              </Dropdown>\n            ))}\n          </Menu.Menu>\n        </Menu.Item>\n\n        <Menu.Item\n          className={classNames(\n            \"Menu--Archive\",\n            expanded.includes(\"archive\") && \"Menu--Archive-active\"\n          )}\n          onClick={e => this.handleToggleExpanded(e, \"archive\")}\n          active={expanded.includes(\"archive\")}\n        >\n          Archive\n          <Icon name=\"trash\" />\n          {expanded.includes(\"archive\") && (\n            <>\n              <Menu.Menu>\n                {inactiveNotes.map(n => (\n                  <Dropdown\n                    key={n.id}\n                    item\n                    text={n.meta.title || \"--\"}\n                    direction=\"left\"\n                    className={classNames(n === selected && \"active\")}\n                  >\n                    <Dropdown.Menu>\n                      <Dropdown.Item\n                        icon=\"edit\"\n                        text=\"Open\"\n                        onClick={() => store.selectNote(n.id)}\n                      />\n                      <Dropdown.Item\n                        icon=\"undo\"\n                        text=\"Restore\"\n                        onClick={e => {\n                          e.stopPropagation();\n                          store.restoreNote(n.id);\n                        }}\n                      />\n                      <Dropdown.Item\n                        icon=\"delete\"\n                        text=\"Delete\"\n                        onClick={e => {\n                          e.stopPropagation();\n                          store.permanentlyDeleteNote(n.id);\n                        }}\n                      />\n                    </Dropdown.Menu>\n                  </Dropdown>\n                ))}\n              </Menu.Menu>\n            </>\n          )}\n        </Menu.Item>\n        <Menu.Item>{this.renderTags()}</Menu.Item>\n      </Sidebar>\n    );\n  }\n}\n","import moment from \"moment\";\n\nexport function formatDate(date) {\n  let d = new Date(date),\n    month = \"\" + (d.getMonth() + 1),\n    day = \"\" + d.getDate(),\n    year = d.getFullYear();\n\n  if (month.length < 2) month = \"0\" + month;\n  if (day.length < 2) day = \"0\" + day;\n\n  return [year, month, day].join(\"-\");\n}\n\nexport function getDaysInMonth(month, year) {\n  const date = new Date(Date.UTC(year, month, 1));\n  const days = [];\n  while (date.getMonth() === month) {\n    days.push(new Date(date));\n    date.setDate(date.getDate() + 1);\n  }\n  return days;\n}\n\nexport function getDaysInMonthByWeeks(...args) {\n  const days = getDaysInMonth(...args);\n  const weeks = [];\n\n  let currentWeek = 0;\n  days.forEach(day => {\n    if (!weeks[currentWeek]) weeks[currentWeek] = [];\n    weeks[currentWeek].push(day);\n\n    if (day.getDay() === 0) {\n      currentWeek++;\n    }\n  });\n  const maxLen = Math.max(...weeks.map(w => w.length));\n\n  while (weeks[0].length !== maxLen) {\n    weeks[0].unshift(null);\n  }\n\n  while (weeks[weeks.length - 1].length !== maxLen) {\n    weeks[weeks.length - 1].push(null);\n  }\n\n  return weeks;\n}\n\nexport function getZeroBasedNum(num) {\n  return num < 10 ? `0${num}` : num;\n}\n\nexport const monthNumToName = [\n  \"January\",\n  \"February\",\n  \"March\",\n  \"April\",\n  \"May\",\n  \"June\",\n  \"July\",\n  \"August\",\n  \"September\",\n  \"October\",\n  \"November\",\n  \"December\"\n];\n\n// TODO: refactor\nexport const formatDateTime = item => {\n  return moment(item.seconds * 1000).format(\"MMMM Do YYYY, h:mm:ss a\");\n};\n\nexport const EVERYDAY = \"everyday\";\nexport const DAYS_OF_THE_WEEK = [\n  \"mon\",\n  \"tue\",\n  \"wed\",\n  \"thu\",\n  \"fri\",\n  \"sat\",\n  \"sun\"\n];\n\nexport const matchRecurringDay = (_dayOfTheWeekNum, dayOfTheWeekStr) => {\n  const dayOfTheWeekNum = _dayOfTheWeekNum === 0 ? 6 : _dayOfTheWeekNum - 1;\n  if (dayOfTheWeekStr === EVERYDAY) return true;\n\n  const dayIndex = DAYS_OF_THE_WEEK.indexOf(dayOfTheWeekStr);\n  if (dayIndex !== -1) {\n    return dayOfTheWeekNum === dayIndex;\n  }\n\n  const [fromDay, toDay] = dayOfTheWeekStr.split(\"-\");\n  if (!fromDay || !toDay) return false;\n\n  const fromDayIndex = DAYS_OF_THE_WEEK.indexOf(fromDay);\n  const toDayIndex = DAYS_OF_THE_WEEK.indexOf(toDay);\n  if (fromDayIndex === -1 || toDayIndex === -1) return false;\n\n  return fromDayIndex <= dayOfTheWeekNum && dayOfTheWeekNum <= toDayIndex;\n};\n\n// =============================================================================\n// Duration\n\nexport function msToDuration(ms) {\n  const d = {\n    h: 0,\n    m: 0,\n    s: Math.round(ms / 1000)\n  };\n  normalizeDuration(d);\n  return d;\n}\n\nexport function parseDuration(str) {\n  return parseDurationMatch(str.match(/\\b(\\d\\d?[hms])(\\d\\d?[ms])?(\\d\\d?s)?\\b/));\n}\n\nexport function parseDurationMatch(match) {\n  return match\n    .slice(1)\n    .filter(Boolean)\n    .reduce(\n      (result, item) => {\n        result[item[item.length - 1]] += parseInt(item, 10) * 1;\n        return result;\n      },\n      {\n        h: 0,\n        m: 0,\n        s: 0\n      }\n    );\n}\n\nexport function normalizeDuration(d) {\n  if (d.s >= 60) {\n    d.m += Math.floor(d.s / 60);\n    d.s = d.s % 60;\n  }\n\n  if (d.m >= 60) {\n    d.h += Math.floor(d.m / 60);\n    d.m = d.m % 60;\n  }\n}\n\nexport function durationToStr(d) {\n  return (\n    `${d.h ? d.h + \"h\" : \"\"}${d.m ? d.m + \"m\" : \"\"}${d.s ? d.s + \"s\" : \"\"}` ||\n    \"0s\"\n  );\n}\n\n// =============================================================================\n// Text\n\nexport function getTextContent(n) {\n  return n.textContent.split(\"\\u00a0\").join(\" \");\n}\n\nexport function toVisibleSpaces(text) {\n  return text.split(\" \").join(\"\\u00a0\");\n}\n\nexport function toRealSpaces(text) {\n  return text.split(\"\\u00a0\").join(\" \");\n}\n\n// =============================================================================\n// Todo\n\nexport function parseTodoNode(n) {\n  const date = n.querySelector(\".date\");\n  const duration = n.querySelector(\".duration\");\n\n  const clone = n.cloneNode(true);\n  Array.from(clone.children)\n    .filter(\n      c =>\n        c.classList.contains(\"ProseMirror-widget\") ||\n        // Clean extracted data\n        c.classList.contains(\"duration\") ||\n        c.classList.contains(\"date\") ||\n        c.classList.contains(\"img\") ||\n        c.classList.contains(\"img-text\")\n    )\n    .forEach(c => c.parentNode.removeChild(c));\n\n  return {\n    node: n,\n    done: clone.innerText[0] === \"+\",\n    text: toRealSpaces(clone.innerText.replace(/^(-|\\+)\\s/, \"\")),\n    date: date && toRealSpaces(date.innerText),\n    duration: duration && duration.innerText,\n\n    images: Array.from(n.querySelectorAll(\".img-text\")).map(item =>\n      item.innerText.replace(/(\\[|\\])/g, \"\").trim()\n    ),\n\n    toggle: () => n.querySelector(\"input[type=checkbox]\").click(),\n    toJSON() {\n      const result = { ...this };\n      delete result.node;\n      delete result.toggle;\n      delete result.toJSON;\n\n      return result;\n    }\n  };\n}\n\nexport function blurOnTouchScreens() {\n  const editor = document.querySelector(\".ProseMirror\");\n  if (!editor) return;\n\n  if (\n    \"ontouchstart\" in window ||\n    window.TouchEvent ||\n    (window.DocumentTouch && document instanceof window.DocumentTouch)\n  ) {\n    editor.blur();\n  }\n}\n","import React from \"react\";\nimport moment from \"moment\";\nimport { saveAs } from \"file-saver\";\nimport { count } from \"@wordpress/wordcount\";\nimport {\n  Statistic,\n  Header,\n  Icon,\n  Label,\n  Divider,\n  Button,\n  Grid\n} from \"semantic-ui-react\";\n\nimport { getStorage } from \"../Storage\";\nimport { formatDate, formatDateTime, getZeroBasedNum } from \"../util\";\n\nimport \"./Stats.css\";\n\nexport default function Stats({ todos, getTextContent }) {\n  const today = formatDate(new Date());\n  const notDone = todos.filter(item => !item.done);\n  const selected = getStorage().getSelectedNote();\n  const text = getTextContent();\n  const words = count(text, \"words\", {});\n  const readingTime = (d => `${\n    d.hours() ? d.hours() + \"h\" : \"\"\n  }${\" \"}${getZeroBasedNum(d.minutes())}m\n  `)(moment.duration(words / 200, \"minutes\"));\n\n  window.getTextContent = getTextContent;\n  const exportAsText = e => {\n    e.preventDefault();\n    const blob = new Blob([text], { type: \"text/plain;charset=utf-8\" });\n    saveAs(blob, `${selected.meta.title}.txt`);\n  };\n\n  return (\n    <div className=\"Editor--stats\">\n      <Header\n        as=\"h2\"\n        className=\"Stats--title\"\n        content={`Statistics`}\n        subheader={` for ${selected.meta.title}`}\n      />\n      <Grid columns=\"equal\" textAlign=\"center\">\n        <Grid.Column>\n          <Header as=\"h3\">\n            <Icon name=\"time\" />\n            <Header.Content>\n              Creation Date\n              <Header.Subheader>\n                {formatDateTime(selected.created_at)}\n              </Header.Subheader>\n            </Header.Content>\n          </Header>\n        </Grid.Column>\n        <Grid.Column>\n          <Header as=\"h3\">\n            <Icon name=\"time\" />\n            <Header.Content>\n              Modification Date\n              <Header.Subheader>\n                {formatDateTime(selected.updated_at)}\n              </Header.Subheader>\n            </Header.Content>\n          </Header>\n        </Grid.Column>\n      </Grid>\n      <Divider className=\"Stats--divider\" />\n      <Statistic.Group widths={3} className=\"Stats--group\">\n        <Statistic>\n          <Statistic.Value>{notDone.length}</Statistic.Value>\n          <Statistic.Label>items to do</Statistic.Label>\n        </Statistic>\n        <Statistic>\n          <Statistic.Value>\n            {\n              notDone.filter(item => item.date && item.date.includes(today))\n                .length\n            }\n          </Statistic.Value>\n          <Statistic.Label>items to do today</Statistic.Label>\n        </Statistic>\n        <Statistic className=\"Stats--stat\">\n          <Statistic.Value>{todos.length - notDone.length}</Statistic.Value>\n          <Statistic.Label>items done</Statistic.Label>\n        </Statistic>\n      </Statistic.Group>\n      <Statistic.Group widths={3}>\n        <Statistic className=\"Stats--stat\">\n          <Statistic.Value>{text.length}</Statistic.Value>\n          <Statistic.Label>Characters</Statistic.Label>\n        </Statistic>\n        <Statistic className=\"Stats--stat\">\n          <Statistic.Value>{words}</Statistic.Value>\n          <Statistic.Label>Words</Statistic.Label>\n        </Statistic>\n        <Statistic className=\"Stats--stat\" size=\"mini\">\n          <Statistic.Value>{readingTime}</Statistic.Value>\n          <Statistic.Label>Read Time</Statistic.Label>\n        </Statistic>\n      </Statistic.Group>\n      <Grid columns=\"equal\" textAlign=\"center\">\n        <Grid.Column>\n          <Divider horizontal className=\"Stats--divider\">\n            <Header as=\"h4\">\n              <Icon name=\"tags\" color=\"grey\" />\n              Tags\n            </Header>\n          </Divider>\n          {selected.meta.tags.map((tag, i) => (\n            <Label key={tag} as=\"a\" tag>\n              {tag}\n            </Label>\n          ))}\n        </Grid.Column>\n        <Grid.Column>\n          <Divider horizontal className=\"Stats--divider\">\n            <Header as=\"h4\">\n              <Icon name=\"download\" color=\"grey\" />\n              Download\n            </Header>\n          </Divider>\n          <Button.Group>\n            <Button onClick={exportAsText}>.TXT</Button>\n            <Button.Or />\n            <Button disabled>.PDF</Button>\n            <Button.Or />\n            <Button disabled>.HTML</Button>\n          </Button.Group>\n        </Grid.Column>\n      </Grid>\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\nimport { Pagination, Segment, Button } from \"semantic-ui-react\";\n\nimport \"./Slides.css\";\n\nexport default function Slides({ editor }) {\n  const [page, setPage] = useState(0);\n  const content = editor.querySelector(\".ProseMirror\").cloneNode(true);\n\n  let currentSlide = [];\n  const slides = [currentSlide];\n  Array.from(content.children).forEach((node, i) => {\n    if (i === 0) {\n      currentSlide.push(node);\n      return;\n    }\n\n    if (node.classList.contains(\"heading\")) {\n      currentSlide = [node];\n      slides.push(currentSlide);\n      return;\n    }\n\n    currentSlide.push(node);\n  });\n\n  return (\n    <div className=\"Editor--slides\">\n      <Pagination\n        defaultActivePage={1}\n        totalPages={slides.length}\n        onPageChange={(_, { activePage }) => {\n          setPage(activePage - 1);\n        }}\n      />\n      <Segment>\n        <div\n          dangerouslySetInnerHTML={{\n            __html: slides[page].map(node => node.outerHTML).join(\"\")\n          }}\n        />\n      </Segment>\n\n      <Button\n        content=\"Download\"\n        positive\n        icon=\"down arrow\"\n        labelPosition=\"left\"\n        floated=\"right\"\n      />\n      <Button\n        content=\"Preview\"\n        icon=\"play\"\n        labelPosition=\"left\"\n        floated=\"right\"\n      />\n      <div style={{ clear: \"both\" }} />\n    </div>\n  );\n}\n","import { Howl } from \"howler\";\n\nconst click = new Howl({\n  volume: 0.3,\n  src: [\"./click.mp3\"],\n  html5: true\n});\n\nconst alarm = new Howl({\n  volume: 0.9,\n  src: [\"./alarm.mp3\"],\n  html5: true\n});\n\nexport default {\n  click: () => click.play(),\n  alarm: () => alarm.play()\n};\n","import moment from \"moment\";\nimport React, { useState } from \"react\";\nimport OriginalDatePicker from \"react-datepicker\";\nimport { Button } from \"semantic-ui-react\";\n\nimport \"react-datepicker/dist/react-datepicker.css\";\n\nconst style = {\n  display: \"inline-block\",\n  width: \"4rem\",\n  margin: \"2px\",\n  backgroundColor: \"#216ba5\",\n  borderRadius: \".3rem\",\n  color: \"#fff\",\n  width: \"56px\",\n  height: \"21px\",\n  cursor: \"pointer\",\n  position: \"relative\",\n  textAlign: \"center\"\n};\n\nexport function DatePicker({ selected, onSelect, ...props }) {\n  const [value, setValue] = useState(moment(selected));\n  const showTime = moment(selected, \"YYYY-MM-DD HH:mm\", true).isValid();\n\n  return (\n    <OriginalDatePicker\n      inline\n      selected={value.toDate()}\n      showTimeInput={showTime}\n      shouldCloseOnSelect={false}\n      todayButton=\"Select Today\"\n      onChange={date => {\n        setValue(moment(date));\n      }}\n      {...props}\n    >\n      <Button\n        positive\n        fluid\n        onClick={() => {\n          onSelect(value.format(showTime ? \"YYYY-MM-DD HH:mm\" : \"YYYY-MM-DD\"));\n        }}\n      >\n        Close\n      </Button>\n    </OriginalDatePicker>\n  );\n}\n","import React, { useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Modal, Image, Header, Button } from \"semantic-ui-react\";\n\nexport function ModalComponent({\n  title,\n  content,\n  actions = [],\n  onHide,\n  rawContent = false,\n  ...modalProps\n}) {\n  const handleClose = () => {\n    hidePopup();\n    if (onHide) onHide();\n  };\n\n  return (\n    <Modal onClose={handleClose} open closeIcon {...modalProps}>\n      {title && <Modal.Header>{title}</Modal.Header>}\n      {rawContent ? content : <Modal.Content>{content}</Modal.Content>}\n      {actions.length > 0 && (\n        <Modal.Actions>\n          {actions.map(({ text, fn, ...actionProps }, i) => (\n            <Button\n              key={i}\n              onClick={fn === \"hide\" ? handleClose : fn}\n              {...actionProps}\n            >\n              {text}\n            </Button>\n          ))}\n        </Modal.Actions>\n      )}\n    </Modal>\n  );\n}\n\nconst popup = document.createElement(\"div\");\nexport function hidePopup() {\n  if (popup.parentNode) popup.parentNode.removeChild(popup);\n  ReactDOM.unmountComponentAtNode(popup);\n  popup.innerHTML = \"\";\n}\n\nexport function showPopup(props) {\n  if (!popup.parentNode) document.body.appendChild(popup);\n  ReactDOM.render(<ModalComponent {...props} />, popup);\n}\n","import moment from \"moment\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  Modal,\n  Grid,\n  Icon,\n  Label,\n  Button,\n  Header,\n  Image,\n  Divider,\n  List,\n  Checkbox,\n  Popup\n} from \"semantic-ui-react\";\n\nimport Sound from \"../Sound\";\nimport {\n  msToDuration,\n  durationToStr,\n  getZeroBasedNum,\n  parseDuration\n} from \"../util\";\nimport { hidePopup } from \"./popup\";\n\nconst showDuration = d => (\n  <>\n    {d.hours() ? getZeroBasedNum(d.hours()) + \":\" : \"\"}\n    {getZeroBasedNum(d.minutes())}:{getZeroBasedNum(d.seconds())}\n  </>\n);\n\nexport class PopupTodo extends React.Component {\n  static propTypes = {\n    todos: PropTypes.arrayOf(\n      PropTypes.shape({\n        text: PropTypes.string.isRequired,\n        images: PropTypes.arrayOf(PropTypes.string).isRequired,\n        date: PropTypes.string,\n        duration: PropTypes.string\n      }).isRequired\n    ),\n    onFinish: PropTypes.func.isRequired\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      time: new Date(),\n      data: [],\n      current: -1,\n      finished: false,\n      automatic: false,\n\n      paused: false,\n      pausedAtDuration: 0\n    };\n  }\n\n  componentDidMount() {\n    this._timer = setInterval(this.forceUpdate.bind(this), 1000);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this._timer);\n  }\n\n  componentDidUpdate() {\n    const { todos } = this.props;\n    const { time, current, automatic, finished } = this.state;\n\n    const currentTime = new Date();\n    const currentItem = todos[current];\n    const currentDuration = moment.duration(currentTime - time);\n\n    if (finished) return;\n    if (!currentItem || !currentItem.duration) return;\n\n    const itemDuration = this.getItemDuration(currentItem);\n    if (\n      itemDuration.asSeconds().toFixed(0) ===\n        currentDuration.asSeconds().toFixed(0) &&\n      !automatic\n    ) {\n      Sound.alarm();\n    }\n\n    if (itemDuration.asSeconds() < currentDuration.asSeconds() && automatic) {\n      Sound.alarm();\n      this.handleNextItem(true);\n    }\n  }\n\n  handleTogglePause = () => {\n    const { time, paused, pausedAtDuration } = this.state;\n    if (paused) {\n      this.componentDidMount();\n    } else {\n      this.componentWillUnmount();\n    }\n\n    this.setState({\n      paused: !paused,\n      ...(paused\n        ? {\n            time: new Date() - pausedAtDuration,\n            pausedAtDuration: 0\n          }\n        : {\n            pausedAtDuration: new Date() - time\n          })\n    });\n  };\n\n  handleStart = automatic => {\n    this.setState({\n      automatic,\n      current: 0,\n      time: new Date()\n    });\n  };\n\n  handleNextItem = done => {\n    const { todos } = this.props;\n    const { current, data, time } = this.state;\n\n    const nextItem = current + 1;\n    const nextTime = new Date();\n\n    this.setState({\n      time: nextTime,\n      data: [\n        ...data,\n        {\n          done,\n          time: nextTime - time\n        }\n      ],\n      current: nextItem,\n      finished: nextItem === todos.length\n    });\n  };\n\n  getItemDuration(item) {\n    if (!item || !item.duration) return null;\n\n    const d = parseDuration(item.duration);\n    return moment.duration({\n      seconds: d.s,\n      minutes: d.m,\n      hours: d.h\n    });\n  }\n\n  getCurrentItem() {\n    return this.props.todos[this.state.current];\n  }\n\n  // ===========================================================================\n  // Rendering\n\n  renderInitial() {\n    const { todos } = this.props;\n    const isNoDurationItem = todos.find(item => !item.duration);\n\n    return (\n      <Modal.Content>\n        <Grid textAlign=\"center\" columns={1}>\n          <Grid.Column>\n            By playing a Todo list you will go trough all the tasks in it. In{\" \"}\n            <u>Manual mode</u> you will manually switch tasks. In{\" \"}\n            <u>Automatic mode</u> a task will be marked as complete when its\n            duration is over and the next task will be stared.{\" \"}\n            <u>Automatic mode</u> is disabled unless all tasks have durations.\n          </Grid.Column>\n          <Grid.Column>\n            <Button.Group>\n              <Button negative onClick={() => this.handleStart(false)}>\n                Manual\n              </Button>\n              <Button.Or text=\"or\" />\n              <Button\n                positive\n                disabled={!!isNoDurationItem}\n                onClick={() => this.handleStart(true)}\n              >\n                Automatic\n              </Button>\n            </Button.Group>\n          </Grid.Column>\n        </Grid>\n      </Modal.Content>\n    );\n  }\n\n  renderFinal() {\n    const { data } = this.state;\n    const { todos, onFinish } = this.props;\n    const totalTime = moment.duration(\n      data.reduce((result, { time }) => result + time, 0)\n    );\n    return (\n      <>\n        <Modal.Header>\n          <Label color=\"black\" size=\"small\">\n            {data.filter(d => d.done).length} / {data.length}\n          </Label>{\" \"}\n          items done\n        </Modal.Header>\n        <Modal.Content>\n          <List verticalAlign=\"middle\">\n            {data.map(({ done, time }, i) => {\n              const todo = todos[i];\n              const duration = moment.duration(time);\n              const maxDuration = this.getItemDuration(todo);\n\n              return (\n                <List.Item key={i}>\n                  <List.Content floated=\"right\">\n                    {showDuration(duration)}\n                    {maxDuration && \"/\"}\n                    {maxDuration && showDuration(maxDuration)}\n                  </List.Content>\n                  <Checkbox\n                    label={{\n                      children: todo.text,\n                      className: \"TodoPopup--item-label\"\n                    }}\n                    defaultChecked={done}\n                    disabled\n                  />\n                </List.Item>\n              );\n            })}\n          </List>\n          <Divider />\n          Total time: {showDuration(totalTime)}\n        </Modal.Content>\n        <Modal.Actions className=\"TodoPopup--footer\">\n          <Popup\n            content=\"Todo items statuses will be updated and statistics data will be stored.\"\n            trigger={\n              <Button\n                positive\n                onClick={() => {\n                  onFinish(data);\n                }}\n              >\n                Close & Update\n              </Button>\n            }\n          />\n          <Button onClick={hidePopup}>Close</Button>\n        </Modal.Actions>\n      </>\n    );\n  }\n\n  render() {\n    const { todos, onFinish } = this.props;\n    const { current, data, time, finished, automatic, paused } = this.state;\n\n    const currentTime = new Date();\n    const currentItem = todos[current];\n    const itemDuration = this.getItemDuration(currentItem);\n    const currentDuration = moment.duration(currentTime - time);\n\n    if (finished) {\n      return this.renderFinal();\n    }\n\n    if (!currentItem) {\n      return this.renderInitial();\n    }\n\n    return (\n      <>\n        <Modal.Header>\n          <Label className=\"TodoPopup--item-count\" color=\"black\" size=\"small\">\n            {current + 1} / {todos.length}\n          </Label>\n          {currentItem.text}\n          <br />\n          <Label className=\"TodoPopup--item-date\" as=\"span\" size=\"small\">\n            <Icon name={\"calendar\"} />\n            {currentItem.date}\n          </Label>\n        </Modal.Header>\n        <Modal.Content>\n          {currentItem.images.length > 0 && (\n            <>\n              <div className=\"TodoPopup--images\">\n                {currentItem.images.map((url, i) => (\n                  <Image key={i} wrapped size=\"medium\" src={url} />\n                ))}\n              </div>\n              <Divider />\n            </>\n          )}\n          <Grid textAlign=\"center\" columns={1}>\n            <Grid.Column>\n              <Label circular as=\"span\" size=\"massive\" color=\"olive\">\n                <Icon name={\"stopwatch\"} />\n                {showDuration(currentDuration)}\n                {itemDuration && \"/\"}\n                {itemDuration && showDuration(itemDuration)}\n              </Label>\n            </Grid.Column>\n          </Grid>\n        </Modal.Content>\n        <Modal.Actions className=\"TodoPopup--footer\">\n          {automatic && (\n            <Button onClick={this.handleTogglePause}>\n              {paused ? \"Resume\" : \"Pause\"}\n            </Button>\n          )}\n          <Button onClick={() => this.handleNextItem(false)}>Skip</Button>\n          <Button positive onClick={() => this.handleNextItem(true)}>\n            Done\n          </Button>\n        </Modal.Actions>\n      </>\n    );\n  }\n}\n","import moment from \"moment\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {\n  List,\n  Image,\n  Button,\n  Dropdown,\n  Label,\n  Icon,\n  Grid\n} from \"semantic-ui-react\";\nimport { TextSelection } from \"prosemirror-state\";\n\nimport { showPopup, hidePopup } from \"./popup\";\nimport { PopupTodo } from \"./PopupTodo\";\nimport { parseTodoNode, toVisibleSpaces, blurOnTouchScreens } from \"../util\";\n\nconst Menu = ({ handleClick }) => (\n  <>\n    <button className=\"trigger\">...</button>\n    <div className=\"options\">\n      <List selection verticalAlign=\"middle\">\n        <List.Item onClick={handleClick} value=\"play\">\n          <List.Content floated=\"right\">CTRL+Enter</List.Content>\n          <Icon name=\"video play\" color=\"olive\" />\n          <List.Content>\n            <List.Header>Play</List.Header>\n          </List.Content>\n        </List.Item>\n        <List.Item onClick={handleClick} value=\"reset\">\n          <List.Content floated=\"right\">CTRL+R</List.Content>\n          <Icon name=\"retweet\" color=\"olive\" />\n          <List.Content>\n            <List.Header>Reset</List.Header>\n          </List.Content>\n        </List.Item>\n        <List.Item onClick={handleClick} value=\"delete_completed\">\n          <List.Content floated=\"right\">CTRL+Shift-R</List.Content>\n          <Icon name=\"delete\" color=\"olive\" />\n          <List.Content>\n            <List.Header>Delete Completed</List.Header>\n          </List.Content>\n        </List.Item>\n        <List.Item onClick={handleClick} value=\"delete_unfinished\">\n          <List.Content floated=\"right\"></List.Content>\n          <Icon name=\"delete\" color=\"olive\" />\n          <List.Content>\n            <List.Header>\n              Delete\n              <br />\n              Unfinished\n            </List.Header>\n          </List.Content>\n        </List.Item>\n        <List.Item onClick={handleClick} value=\"mark_today\">\n          <List.Content floated=\"right\"></List.Content>\n          <Icon name=\"calendar alternate outline\" color=\"olive\" />\n          <List.Content>\n            <List.Header>\n              Mark all\n              <br /> for Today\n            </List.Header>\n          </List.Content>\n        </List.Item>\n      </List>\n    </div>\n  </>\n);\n\nexport const WidgetTodo = view => {\n  const dom = document.createElement(\"div\");\n  dom.classList.add(\"indicator\");\n  dom.classList.add(\"todo-indicator\");\n\n  const handleClick = (e, { value: action }) => {\n    blurOnTouchScreens();\n    e.preventDefault();\n    const node = e.target;\n\n    const fullTodoList = [dom.parentNode];\n\n    let next;\n    while (\n      (next = fullTodoList[fullTodoList.length - 1]) &&\n      (next = next.nextElementSibling) &&\n      !!next.querySelector(\".todo\")\n    ) {\n      fullTodoList.push(next);\n    }\n\n    switch (action) {\n      case \"play\": {\n        const parsedNodes = fullTodoList\n          .map(n => parseTodoNode(n))\n          .filter(n => !n.done);\n\n        const onFinish = data => {\n          data.forEach(({ done, time }, i) => {\n            const node = parsedNodes[i];\n\n            if (done && !node.done) {\n              node.toggle();\n            }\n\n            hidePopup();\n          });\n        };\n        showPopup({\n          size: \"mini\",\n          rawContent: true,\n          content: <PopupTodo todos={parsedNodes} onFinish={onFinish} />\n        });\n\n        return;\n      }\n\n      case \"reset\": {\n        fullTodoList\n          .map(n => parseTodoNode(n))\n          .forEach(n => n.done && n.toggle());\n        return;\n      }\n      case \"delete_unfinished\":\n      case \"delete_completed\": {\n        fullTodoList\n          .map(n => parseTodoNode(n))\n          .filter(n => (action === \"delete_unfinished\" ? !n.done : n.done))\n          .reverse() // If we don't delete in reverse, prosemirror removes nodes\n          .forEach(n => {\n            const { node } = n;\n            if (!node.parentNode) return;\n\n            const pos = view.posAtDOM(node);\n            const pN = view.state.doc.nodeAt(pos);\n            const tr = view.state.tr.deleteRange(pos - 2, pos + pN.nodeSize);\n            view.dispatch(tr);\n          });\n        return;\n      }\n\n      case \"mark_today\": {\n        const { tr } = view.state;\n        const pos = view.posAtDOM(fullTodoList[0]);\n        view.dispatch(tr.setSelection(TextSelection.create(tr.doc, pos, pos)));\n\n        fullTodoList\n          .map(n => n.querySelector(\".date\"))\n          .filter(Boolean)\n          .forEach(n => n.parentNode.removeChild(n));\n        fullTodoList.forEach(n => {\n          const date = toVisibleSpaces(\" \") + moment().format(\"YYYY-MM-DD\");\n          const dateNode = document.createTextNode(date);\n          n.appendChild(dateNode);\n        });\n\n        return;\n      }\n      default:\n        return;\n    }\n  };\n\n  ReactDOM.render(<Menu {...{ handleClick }} />, dom);\n\n  return dom;\n};\n","import moment from \"moment\";\nimport ReactDOM from \"react-dom\";\nimport React, { useState, useEffect } from \"react\";\nimport { Label, Icon, Grid, List } from \"semantic-ui-react\";\n\nimport Sound from \"../Sound\";\nimport { showPopup } from \"./popup\";\nimport {\n  getZeroBasedNum,\n  durationToStr,\n  normalizeDuration,\n  parseDurationMatch\n} from \"../util\";\n\nconst TimeTracker = ({ duration: initial, currentTimeRef }) => {\n  const [duration, setDuration] = useState(\n    moment.duration({\n      seconds: initial.s,\n      minutes: initial.m,\n      hours: initial.h\n    })\n  );\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      currentTimeRef.value = duration.clone().add(moment.duration(1, \"s\"));\n      setDuration(currentTimeRef.value);\n    }, 1000);\n    return () => {\n      clearTimeout(timer);\n    };\n  });\n\n  return (\n    <Grid textAlign=\"center\" columns={1}>\n      <Grid.Column>\n        <Label circular as=\"span\" size=\"massive\" color=\"olive\">\n          <Icon name=\"stopwatch\" />\n          {duration.hours() ? getZeroBasedNum(duration.hours()) : \"\"}\n          {getZeroBasedNum(duration.minutes())}:\n          {getZeroBasedNum(duration.seconds())}\n        </Label>\n      </Grid.Column>\n    </Grid>\n  );\n};\n\nconst Timer = ({ duration: initial }) => {\n  const [duration, setDuration] = useState(\n    moment.duration({\n      seconds: initial.s,\n      minutes: initial.m,\n      hours: initial.h\n    })\n  );\n\n  useEffect(() => {\n    if (duration.asSeconds() === 0) {\n      Sound.alarm();\n      Sound.alarm();\n      return () => {};\n    }\n\n    const timer = setTimeout(() => {\n      setDuration(duration.clone().subtract(moment.duration(1, \"s\")));\n    }, 1000);\n    return () => {\n      clearTimeout(timer);\n    };\n  });\n\n  return (\n    <Grid textAlign=\"center\" columns={1}>\n      <Grid.Column>\n        <Label circular as=\"span\" size=\"massive\" color=\"olive\">\n          <Icon name={duration.asSeconds() === 0 ? \"check\" : \"stopwatch\"} />\n          {duration.hours() ? getZeroBasedNum(duration.hours()) : \"\"}\n          {getZeroBasedNum(duration.minutes())}:\n          {getZeroBasedNum(duration.seconds())}\n        </Label>\n      </Grid.Column>\n    </Grid>\n  );\n};\n\nexport const WidgetDuration = ({ match, view, pos, text: prevText }) => {\n  const handleContinue = () => {\n    const currentTimeRef = { value: null };\n    showPopup({\n      size: \"mini\",\n      content: <TimeTracker duration={match} currentTimeRef={currentTimeRef} />,\n      actions: [\n        {\n          text: \"Stop\",\n          fn: \"hide\"\n        }\n      ],\n      onHide: () => {\n        if (currentTimeRef.value) {\n          const d = {\n            h: currentTimeRef.value.hours(),\n            m: currentTimeRef.value.minutes(),\n            s: currentTimeRef.value.seconds()\n          };\n          view.dispatch(\n            view.state.tr.insertText(\n              durationToStr(d),\n              pos + 1,\n              pos + prevText.length + 1\n            )\n          );\n        }\n      }\n    });\n  };\n\n  const handleCountdown = () => {\n    showPopup({\n      size: \"mini\",\n      content: <Timer duration={match} />,\n      actions: [\n        {\n          text: \"Close\",\n          fn: \"hide\"\n        }\n      ]\n    });\n  };\n  const handleDouble = () => {\n    const m = { ...match };\n\n    Object.keys(m).forEach(k => {\n      m[k] = m[k] * 2;\n    });\n\n    normalizeDuration(m);\n\n    const text = durationToStr(m);\n    view.dispatch(\n      view.state.tr.insertText(text, pos + 1, pos + prevText.length + 1)\n    );\n  };\n\n  return (\n    <div className=\"options\">\n      <List selection verticalAlign=\"middle\">\n        <List.Item onClick={handleCountdown}>\n          <List.Content floated=\"right\">CTRL + Enter</List.Content>\n          <Icon name=\"stopwatch\" color=\"olive\" />\n          <List.Content>\n            <List.Header id=\"duration--countdown\">Countdown</List.Header>\n          </List.Content>\n        </List.Item>\n\n        <List.Item onClick={handleContinue}>\n          <List.Content floated=\"right\">CTRL + Shift + Enter</List.Content>\n          <Icon name=\"clock\" color=\"olive\" />\n          <List.Content>\n            <List.Header id=\"duration--continue\">Continue</List.Header>\n          </List.Content>\n        </List.Item>\n\n        <List.Item onClick={handleDouble}>\n          <List.Content floated=\"right\">CTRL + Shift + 8</List.Content>\n          <Icon name=\"angle double up\" color=\"olive\" />\n          <List.Content>\n            <List.Header id=\"duration--double\">Double</List.Header>\n          </List.Content>\n        </List.Item>\n      </List>\n    </div>\n  );\n};\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport hljs from \"highlight.js\";\nimport classNames from \"classnames\";\nimport { Plugin } from \"prosemirror-state\";\nimport { Decoration, DecorationSet } from \"prosemirror-view\";\nimport { createPopper } from \"@popperjs/core\";\n\nimport Sound from \"../Sound\";\nimport { DatePicker } from \"../DatePicker/DatePicker\";\nimport { WidgetTodo } from \"./WidgetTodo\";\nimport { WidgetDuration } from \"./WidgetDuration\";\nimport { hidePopup, showPopup } from \"./popup\";\nimport {\n  formatDate,\n  parseDuration,\n  getTextContent,\n  toVisibleSpaces,\n  blurOnTouchScreens\n} from \"../util\";\n\nimport \"highlight.js/styles/arta.css\";\n\n/**\n * Decorations that require the same open and close strings\n * and capture all the lines in between.\n *\n * NOTE: These work on the wrapper node, not on the text node.\n */\nexport const OpenCloseDecorations = {\n  code: /^```/gi,\n  folded: /^\\.\\.\\.$/gi\n};\n\nexport const WholeNodeDecorations = {\n  // NOTE: Table row is also handled repeatably.\n  tableRow: /^\\|(?:\\s|-|=).*$/gi,\n  _heading: /^(#{1,5})\\s.*$/gi // Underscored names are skipped.\n};\n\nexport const RepeatableDecorations = {\n  quote: /^>\\s/gi,\n  bullet: /^\\s*\\*\\s/gi,\n  ordered: /^\\s*(\\d+)\\.\\s/gi,\n  _todo: /^(-|\\+)\\s/gi\n};\n\nfunction genInlineDecorationRegex(char) {\n  return new RegExp(\n    `\\\\${char}(:?[^\\\\s\\\\${char}][^\\\\${char}]*[^\\\\s\\\\${char}]|[^\\\\s\\\\${char}])\\\\${char}(?=\\\\s|$)`,\n    \"gi\"\n  );\n}\n/**\n * These work on the text node.\n */\nexport const Decorations = {\n  hr: /^---$/gi,\n\n  bold: genInlineDecorationRegex(\"*\"),\n  italic: genInlineDecorationRegex(\"/\"),\n  highlight: genInlineDecorationRegex(\"`\"),\n  underline: genInlineDecorationRegex(\"_\"),\n  striketrough: genInlineDecorationRegex(\"~\"),\n\n  toggleFolded: /^\\.\\.\\.\\.$/gi,\n\n  // Alternative date without widget.\n  date: new RegExp(\n    \"(\" +\n      //\n      \"everyday\" +\n      \"|mon-tue\" +\n      \"|mon-wed\" +\n      \"|mon-thu\" +\n      \"|mon-fri\" +\n      \"|mon-sat\" +\n      \"|mon-sun\" +\n      \"|tue-wed\" +\n      \"|tue-thu\" +\n      \"|tue-fri\" +\n      \"|tue-sat\" +\n      \"|tue-sun\" +\n      \"|wed-thu\" +\n      \"|wed-fri\" +\n      \"|wed-sat\" +\n      \"|wed-sun\" +\n      \"|thu-fri\" +\n      \"|thu-sat\" +\n      \"|thu-sun\" +\n      \"|fri-sat\" +\n      \"|fri-sun\" +\n      \"|sat-sun\" +\n      \"|mon\" +\n      \"|tue\" +\n      \"|wed\" +\n      \"|thu\" +\n      \"|fri\" +\n      \"|sat\" +\n      \"|sun\" +\n      \")\" +\n      \"(:?\\\\s(\\\\d\\\\d):(\\\\d\\\\d))?\\\\b\",\n    \"gi\"\n  ),\n\n  // NOTE: If name starts with `_`, standard decoration won't be\n  // created. This can be used if we some special handling in\n  // with DecorationsWidgets function.\n  _url: /([^\\S]|^)(((https?:\\/\\/)|(www\\.))(\\S+))/gi,\n  _img: /(\\s|^)\\[(https:\\/\\/[^\\]]+)\\](?=\\s|$)/gi,\n  _tag: /(\\s|^)#[^\\b\\s#\\-_`]+/gi,\n  _link: /\\[([\\w\\s\\d]+)\\]\\((https?:\\/\\/[\\w\\d./?=#]+)\\)/gi,\n  _date: /\\s(\\d\\d\\d\\d)-(\\d\\d)-(\\d\\d)(:?\\s(\\d\\d):(\\d\\d))?\\b/gi,\n  _duration: /\\s(\\d\\d?[hms])(\\d\\d?[ms])?(\\d\\d?s)?\\b/gi,\n  _checkbox: /(\\s|^)\\[(\\+|-)\\](\\s|$)/gi,\n\n  _counter: /(\\s|^)\\[(\\d+)\\](\\s|$)/gi,\n  _proportion: /(\\s|^)\\[(\\d+)\\/(\\d+)\\](\\s|$)/gi,\n\n  ...RepeatableDecorations\n};\n\n/**\n * Some decorations require additional widgets.\n */\nexport const DecorationsWidgets = {\n  _todo: getTodoWidgets,\n  _duration: getDurationWidgets,\n  _date: getDateWidgets,\n  _url: getUrlWidgets,\n  _tag: getTagWidgets,\n  _link: getLinkWidgets,\n  _img: getImgWidgets,\n  _checkbox: getCheckboxWidgets,\n  _counter: getCounterWidgets,\n  _proportion: getCounterWidgets,\n  _heading: getHeadingWidgets\n};\n\n/**\n * Decorations won't be visible inside specified nodes.\n */\nconst excludedNodes = {};\n\n/**\n * We don't want some of the decorations inside a table.\n */\nconst excludedInTable = {\n  _counter: true,\n  _proportion: true\n};\n\n/**\n * Handlers are delegated (live) events on click.\n *\n * className -> handler(e, element, view)\n */\nexport const decorationsHandlers = {};\n\nfunction getDecorations(doc) {\n  let decos = [];\n  let openClose = {};\n\n  doc.descendants((node, pos) => {\n    if (excludedNodes[doc.resolve(pos).node().type.name]) return;\n\n    if (node.isText) {\n      const isTableRow = !!node.text.match(WholeNodeDecorations[\"tableRow\"]);\n      Object.keys(Decorations).forEach(name => {\n        const regex = Decorations[name];\n        while (true) {\n          let m = regex.exec(node.text);\n          if (!m) return;\n\n          if (excludedInTable[name] && isTableRow) {\n            return;\n          }\n\n          if (name[0] !== \"_\") {\n            decos.push(\n              Decoration.inline(\n                pos + m.index,\n                pos +\n                  m.index +\n                  m[0].length +\n                  (RepeatableDecorations[name] ? -1 : 0), // TODO:\n                {\n                  class: name\n                }\n              )\n            );\n          }\n\n          if (DecorationsWidgets[name]) {\n            decos.push(...DecorationsWidgets[name](m, pos, doc, node));\n          }\n        }\n      });\n\n      return;\n    }\n\n    Object.keys(WholeNodeDecorations).forEach(name => {\n      const regex = WholeNodeDecorations[name];\n      while (true) {\n        let m = regex.exec(getTextContent(node));\n        if (!m) return;\n\n        if (name[0] !== \"_\") {\n          decos.push(\n            Decoration.node(pos + m.index, pos + m.index + node.nodeSize, {\n              class: name\n            })\n          );\n        }\n\n        if (DecorationsWidgets[name]) {\n          decos.push(...DecorationsWidgets[name](m, pos, doc, node));\n        }\n      }\n    });\n\n    // NOTE: Every header resets `openClose` pairs.\n    if (/^(#{1,5})\\s.*$/gi.test(getTextContent(node))) {\n      openClose = {};\n    }\n    Object.keys(OpenCloseDecorations).forEach(name => {\n      const regex = OpenCloseDecorations[name];\n      while (true) {\n        const textContent = getTextContent(node);\n        let m = regex.exec(textContent);\n        if (!m) return;\n\n        if (!openClose[name]) {\n          openClose[name] = { node, pos };\n          continue;\n        }\n\n        if (openClose[name]) {\n          const closing = { node, pos };\n          const opening = openClose[name];\n\n          const textContent = [];\n          doc.nodesBetween(opening.pos, closing.pos + 1, (n, p) => {\n            if (n.isText) return;\n            textContent.push(getTextContent(n));\n\n            decos.push(\n              Decoration.node(p, p + n.nodeSize, {\n                class: classNames(\n                  name,\n                  p === opening.pos && `${name}-opening`,\n                  p === closing.pos && `${name}-closing`\n                )\n              })\n            );\n          });\n\n          delete openClose[name];\n\n          if (name === \"code\") {\n            decos.push(\n              Decoration.widget(\n                opening.pos + 1,\n                (view, getPos) => {\n                  const dom = document.createElement(\"pre\");\n                  const lang = textContent[0].replace(\"```\", \"\");\n                  const source = hljs.getLanguage(lang)\n                    ? hljs.highlight(lang, textContent.slice(1, -1).join(\"\\n\"))\n                        .value\n                    : textContent.slice(1, -1).join(\"\\n\");\n                  dom.innerHTML = `${textContent[0]}\\n${source}\\n${\n                    textContent[textContent.length - 1]\n                  }`;\n\n                  dom.classList.add(\"code-highlight\");\n\n                  return dom;\n                },\n                {\n                  key: textContent.join(\"\\n\")\n                }\n              )\n            );\n          }\n          continue;\n        }\n      }\n    });\n  });\n\n  return DecorationSet.create(doc, decos);\n}\n\n// =============================================================================\n// Widgets\n\nfunction getUrlWidgets(m, pos, _, node) {\n  return [\n    Decoration.inline(\n      pos + m.index + m[1].length,\n      pos + m.index + m[0].length,\n      {\n        class: \"url\",\n        nodeName: \"a\",\n        href: node.text,\n        title: node.text\n      }\n    )\n  ];\n}\n\nfunction getLinkWidgets(m, pos, _, node) {\n  return [\n    Decoration.inline(pos + m.index, pos + m.index + 1, {\n      class: \"link--bracket\"\n    }),\n    Decoration.inline(pos + m.index + 1, pos + m.index + 1 + m[1].length, {\n      class: \"url\",\n      nodeName: \"a\",\n      href: m[2]\n    }),\n    Decoration.inline(\n      pos + m.index + 1 + m[1].length,\n      pos + m.index + 1 + m[1].length + 2,\n      {\n        class: \"link--bracket\"\n      }\n    ),\n    Decoration.inline(\n      pos + m.index + 1 + m[1].length + 2,\n      pos + m.index + 1 + m[1].length + 2 + m[2].length,\n      {\n        class: \"link--symbol\",\n        nodeName: \"input\",\n        type: \"button\",\n        value: \"🔗\"\n      }\n    ),\n    Decoration.inline(\n      pos + m.index + 1 + m[1].length + 2 + m[2].length,\n      pos + m.index + 1 + m[1].length + 2 + m[2].length + 1,\n      {\n        class: \"link--bracket\"\n      }\n    )\n  ];\n}\n\ndecorationsHandlers[\"folded-opening\"] = (e, elm, view) => {\n  blurOnTouchScreens();\n  elm.textContent = \"....\";\n};\n\ndecorationsHandlers[\"toggleFolded\"] = (e, elm, view) => {\n  blurOnTouchScreens();\n  elm.textContent = \"...\";\n};\n\ndecorationsHandlers[\"todo\"] = (e, elm, view) => {\n  blurOnTouchScreens();\n\n  const pos = elm.dataset[\"pos\"] * 1;\n  Sound.click();\n  view.dispatch(\n    view.state.tr.insertText(elm.checked ? \"+\" : \"-\", pos, pos + 1)\n  );\n};\nfunction getTodoWidgets(m, pos, doc) {\n  const decos = [\n    Decoration.inline(pos + m.index, pos + m.index + m[0].length - 1, {\n      class: \"todo\",\n      nodeName: \"input\",\n      type: \"checkbox\",\n      \"data-pos\": pos + m.index,\n      ...(m[1] === \"+\" ? { checked: true } : {})\n    })\n  ];\n  const currentNode = doc.resolve(pos).node();\n  const nodeBefore = doc.resolve(pos - 1).nodeBefore;\n  const nodeAfter =\n    doc.content.size <= pos + currentNode.nodeSize\n      ? null\n      : doc.resolve(pos + currentNode.nodeSize).node();\n\n  // NOTE: Todo widget should be applied right next to the first Todo\n  // item in the group.\n  const todoRegEx = /(\\+|-)\\s/;\n  if (\n    (!nodeBefore || !todoRegEx.test(getTextContent(nodeBefore).slice(0, 2))) &&\n    nodeAfter &&\n    todoRegEx.test(getTextContent(nodeAfter).slice(0, 2))\n  ) {\n    decos.push(\n      Decoration.widget(pos + m.index, view => WidgetTodo(view), {\n        key: getTextContent(currentNode)\n      })\n    );\n  }\n\n  return decos;\n}\n\ndecorationsHandlers[\"duration--button\"] = (e, elm, view) => {\n  blurOnTouchScreens();\n\n  const pos = elm.dataset[\"pos\"] * 1;\n  const text = getTextContent(elm.nextElementSibling);\n  const match = parseDuration(text);\n\n  const overlay = document.createElement(\"div\");\n  overlay.classList.add(\"duration---overlay\");\n\n  const menu = document.createElement(\"div\");\n  menu.classList.add(\"duration--menu\");\n  ReactDOM.render(<WidgetDuration {...{ view, pos, match, text }} />, menu);\n\n  overlay.addEventListener(\"click\", e => {\n    if (overlay.parentNode) {\n      overlay.parentNode.removeChild(overlay);\n    }\n  });\n\n  overlay.appendChild(menu);\n  document.body.appendChild(overlay);\n\n  createPopper(elm, menu, { placement: \"bottom-start\" });\n};\n\nfunction getDurationWidgets(m, pos, _, node) {\n  const isInTableRow = !!node.text.match(WholeNodeDecorations[\"tableRow\"]);\n  return [\n    ...(isInTableRow\n      ? []\n      : [\n          Decoration.inline(pos + m.index, pos + m.index + 1, {\n            class: \"duration--button\",\n            nodeName: \"input\",\n            type: \"button\",\n            value: \"▼\",\n            \"data-pos\": pos + m.index\n          })\n        ]),\n    Decoration.inline(pos + m.index + 1, pos + m.index + m[0].length, {\n      class: \"duration\"\n    })\n  ];\n}\n\ndecorationsHandlers[\"date--button\"] = (e, elm, view) => {\n  blurOnTouchScreens();\n\n  const startPos = elm.dataset[\"startpos\"] * 1;\n  const endPos = elm.dataset[\"endpos\"] * 1;\n  const selected = getTextContent(elm.nextElementSibling);\n\n  showPopup({\n    size: \"mini\",\n    basic: true,\n    closeIcon: false,\n    content: (\n      <DatePicker\n        selected={selected}\n        onSelect={date => {\n          view.dispatch(view.state.tr.insertText(\" \" + date, startPos, endPos));\n          hidePopup();\n        }}\n      />\n    )\n  });\n};\n\nfunction getDateWidgets(m, pos, _, node) {\n  const isInTableRow = !!node.text.match(WholeNodeDecorations[\"tableRow\"]);\n  return [\n    ...(isInTableRow\n      ? []\n      : [\n          Decoration.inline(pos + m.index, pos + m.index + 1, {\n            class: \"date--button\",\n            nodeName: \"input\",\n            type: \"button\",\n            value: \"▼\",\n            \"data-startpos\": pos + m.index,\n            \"data-endpos\": pos + m.index + m[0].length\n          })\n        ]),\n    Decoration.inline(pos + m.index + 1, pos + m.index + m[0].length, {\n      class: \"date\"\n    })\n  ];\n}\n\nfunction getTagWidgets(m, pos) {\n  return [\n    Decoration.inline(\n      pos + m.index + m[1].length,\n      pos + m.index + m[0].length,\n      {\n        class: \"tag\"\n      }\n    )\n  ];\n}\n\ndecorationsHandlers[\"checkbox\"] = (e, elm, view) => {\n  blurOnTouchScreens();\n\n  const pos = elm.dataset.pos * 1;\n  Sound.click();\n  view.dispatch(\n    view.state.tr.insertText(elm.checked ? \"+\" : \"-\", pos + 1, pos + 2)\n  );\n};\n\nfunction getCheckboxWidgets(m, pos) {\n  return [\n    Decoration.inline(\n      pos + m.index + m[1].length,\n      pos + m.index + m[0].length - m[3].length,\n      {\n        class: \"checkbox\",\n        nodeName: \"input\",\n        type: \"checkbox\",\n        \"data-pos\": pos + m.index + m[1].length,\n        ...(m[2] === \"+\" ? { checked: true } : {})\n      }\n    )\n  ];\n}\n\ndecorationsHandlers[\"counter--left\"] = (e, elm, view) => {\n  blurOnTouchScreens();\n\n  Sound.click();\n  const pos = elm.dataset.pos * 1;\n  const m = getTextContent(elm.nextElementSibling).split(\"/\");\n\n  view.dispatch(\n    view.state.tr.insertText(\n      `[${Math.max(m[0] * 1 - 1, 0)}${m[1] ? `/${m[1]}` : \"\"}]`,\n      pos,\n      pos + m.join(\"/\").length + 2\n    )\n  );\n};\n\ndecorationsHandlers[\"counter--right\"] = (e, elm, view) => {\n  blurOnTouchScreens();\n\n  Sound.click();\n  const pos = elm.dataset.pos * 1;\n  const m = getTextContent(elm.previousElementSibling).split(\"/\");\n\n  view.dispatch(\n    view.state.tr.insertText(\n      `[${Math.min(m[0] * 1 + 1, m[1] ? m[1] : Infinity)}${\n        m[1] ? `/${m[1]}` : \"\"\n      }]`,\n      pos,\n      pos + m.join(\"/\").length + 2\n    )\n  );\n};\n\nfunction getCounterWidgets(m, pos) {\n  const start = pos + m.index + m[1].length;\n  const end =\n    pos +\n    m.index +\n    m[0].length -\n    ((m.length === 5 && m[4].length) || (m.length === 4 && m[3].length)\n      ? 1\n      : 0);\n\n  return [\n    Decoration.inline(start, start + 1, {\n      class: \"counter--button counter--left\",\n      nodeName: \"input\",\n      type: \"button\",\n      value: \"◀\",\n      \"data-pos\": start\n    }),\n    Decoration.inline(start + 1, end - 1, {\n      class: \"counter\"\n    }),\n    Decoration.inline(end - 1, end, {\n      class: \"counter--button counter--right\",\n      nodeName: \"input\",\n      type: \"button\",\n      value: \"►\",\n      \"data-pos\": start\n    })\n  ];\n}\n\ndecorationsHandlers[\"heading--button\"] = (e, elm, view) => {\n  e.preventDefault();\n  e.stopPropagation();\n  blurOnTouchScreens();\n\n  Sound.click();\n  const pos = elm.dataset.pos * 1;\n  const text = getTextContent(elm.parentNode);\n  const level = text.match(/^#+/)[0];\n\n  view.dispatch(\n    view.state.tr.insertText(\n      level.length === 5 ? `#` : `#${level}`,\n      pos,\n      pos + level.length + 1\n    )\n  );\n};\n\nfunction getHeadingWidgets(m, pos, _, node) {\n  return [\n    Decoration.node(pos + m.index, pos + m.index + node.nodeSize, {\n      class: `heading heading-${m[1].length}`\n    }),\n    Decoration.inline(pos + m.index + 1, pos + m.index + 1 + m[1].length, {\n      class: \"heading--button\",\n      type: \"button\",\n      nodeName: \"input\",\n      value: `H${m[1].length}`,\n      \"data-pos\": pos\n    })\n  ];\n}\n\nfunction getImgWidgets(m, pos) {\n  return [\n    Decoration.inline(\n      pos + m.index + m[1].length,\n      pos + m.index + m[0].length,\n      {\n        class: \"img\",\n        nodeName: \"img\",\n        src: m[2]\n      }\n    )\n  ];\n}\n\n// =============================================================================\n// Plugin\n\nexport default new Plugin({\n  state: {\n    init(_, { doc }) {\n      return getDecorations(doc);\n    },\n    apply(tr, decorationsSet) {\n      return tr.docChanged ? getDecorations(tr.doc) : decorationsSet;\n    }\n  },\n  props: {\n    decorations(state) {\n      return this.getState(state);\n    }\n  }\n});\n","import React, { useState } from \"react\";\nimport moment from \"moment\";\nimport classNames from \"classnames\";\n\nimport {\n  List,\n  Label,\n  Grid,\n  Menu,\n  Icon,\n  Checkbox,\n  Header,\n  Message,\n  Button\n} from \"semantic-ui-react\";\n\nimport {\n  parseDuration,\n  normalizeDuration,\n  getZeroBasedNum,\n  matchRecurringDay\n} from \"../util\";\n\nimport { Decorations } from \"../Editor/decorations\";\n\nimport \"./Agenda.css\";\n\nconst matchDate = d => {\n  Decorations._date.lastIndex = 0;\n  const match = Decorations._date.exec(\" \" + d);\n  Decorations._date.lastIndex = 0;\n  return match;\n};\n\nconst matchRecurringDate = d => {\n  Decorations.date.lastIndex = 0;\n  const match = Decorations.date.exec(d);\n  Decorations.date.lastIndex = 0;\n  return match;\n};\n\nfunction processTodos(todos, today = moment().startOf(\"day\")) {\n  const forToday = todos\n    .filter(item => {\n      if (!item.date) return false;\n\n      const recurring = matchRecurringDate(item.date);\n      if (recurring) {\n        const dayNum = today.day();\n        const dayStr = recurring[1];\n\n        return matchRecurringDay(dayNum, dayStr);\n      }\n\n      return moment(item.date).isSame(today, \"day\");\n    })\n    .map(item => {\n      const result = { ...item };\n      let hours, minutes;\n\n      const recurring = matchRecurringDate(item.date);\n      if (recurring) {\n        [hours, minutes] = recurring.slice(3);\n      } else {\n        [hours, minutes] = matchDate(item.date).slice(5);\n      }\n\n      // Date has no hours and minutes.\n      if (hours === undefined) return result;\n\n      result.hours = hours;\n      result.minutes = minutes;\n      result.fromTime = moment.duration({\n        minutes,\n        hours\n      });\n\n      if (result.duration) {\n        const d = parseDuration(result.duration);\n\n        d.h += hours * 1;\n        d.m += minutes * 1;\n        normalizeDuration(d);\n\n        result.toTime = moment.duration({\n          minutes: d.m,\n          hours: d.h\n        });\n      }\n\n      return result;\n    });\n\n  if (forToday.length === 0) {\n    return null;\n  }\n\n  const noHour = forToday.filter(item => {\n    return !item.fromTime;\n  });\n\n  const withHour = forToday\n    .filter(item => !!item.fromTime)\n    .sort((a, b) => {\n      const { hours: hoursA, minutes: minutesA } = a;\n      const { hours: hoursB, minutes: minutesB } = b;\n      return hoursA * 60 + minutesA * 1 - (hoursB * 60 + minutesB * 1);\n    });\n\n  return { withHour, noHour };\n}\n\nfunction durationToStr(d) {\n  return `${getZeroBasedNum(d.hours())}:${getZeroBasedNum(d.minutes())}`;\n}\n\nconst SMALL_PADDING = \"---------------------\";\nconst BIG_PADDING =\n  \"------------------------ --------- ---------- --------------- ------------ -------- ----- ----\";\n\nexport default function Agenda({ todos, rerender }) {\n  const [date, setDate] = useState(moment().startOf(\"day\"));\n  const groups = processTodos(todos, date);\n\n  const menu = (\n    <Menu fluid widths={3}>\n      <Menu.Item\n        as=\"a\"\n        icon\n        onClick={() => setDate(date.clone().add(1, \"day\"))}\n      >\n        <Icon name=\"chevron left\" />\n      </Menu.Item>\n\n      <Menu.Item as=\"a\" icon disabled>\n        {date.format(\"dddd, MMMM Do YYYY\")}\n      </Menu.Item>\n\n      <Menu.Item\n        as=\"a\"\n        icon\n        onClick={() => setDate(date.clone().subtract(1, \"day\"))}\n      >\n        <Icon name=\"chevron right\" />\n      </Menu.Item>\n    </Menu>\n  );\n\n  if (!groups) {\n    return (\n      <div className=\"Editor--agenda\">\n        {menu}\n        <Header\n          as=\"h2\"\n          content={`Agenda`}\n          subheader={` for ${moment().format(\"dddd, MMMM Do YYYY\")}`}\n        />\n        <Message info>No items for today.</Message>\n      </div>\n    );\n  }\n\n  const { withHour, noHour } = groups;\n  let prevTime = moment.duration({ hours: 0, minutes: 0 });\n\n  return (\n    <div className=\"Editor--agenda\">\n      {menu}\n      <Grid columns={2} relaxed=\"very\" doubling>\n        <Grid.Column>\n          <Header\n            as=\"h2\"\n            content={`Agenda`}\n            subheader={` for ${date.format(\"dddd, MMMM Do YYYY\")}`}\n          />\n          <Button\n            icon\n            labelPosition=\"left\"\n            compact\n            onClick={() => {\n              withHour.forEach(item => item.done && item.toggle());\n              rerender();\n            }}\n          >\n            <Icon name=\"retweet\" />\n            Reset\n          </Button>\n          <List divided selection>\n            {withHour.map((item, i) => {\n              const { fromTime, toTime } = item;\n              let spaceTime = null;\n              if (fromTime.asMinutes() - prevTime.asMinutes() >= 30) {\n                spaceTime = (\n                  <List.Item key={prevTime} className=\"Agenda--Row\">\n                    <Label\n                      as=\"a\"\n                      basic\n                      color=\"grey\"\n                      className=\"Agenda--TimeLabel\"\n                    >\n                      {durationToStr(prevTime)}-{durationToStr(fromTime)}\n                    </Label>\n                    {durationToStr(prevTime) === \"00:00\"\n                      ? BIG_PADDING\n                      : SMALL_PADDING}\n                  </List.Item>\n                );\n              }\n              prevTime = toTime || fromTime;\n              return (\n                <React.Fragment key={i}>\n                  {spaceTime}\n                  <List.Item className=\"Agenda--Row\">\n                    <Label\n                      as=\"a\"\n                      basic\n                      color={item.done ? \"olive\" : \"orange\"}\n                      className=\"Agenda--TimeLabel\"\n                    >\n                      {durationToStr(fromTime)}\n                      {toTime ? `-${durationToStr(toTime)}` : \"......\"}\n                    </Label>\n                    <Checkbox\n                      className=\"Agenda--Checkbox\"\n                      checked={item.done}\n                      onClick={() => {\n                        item.toggle();\n                        rerender();\n                      }}\n                    />\n                    <span\n                      className={classNames(\n                        \"Agenda--Checkbox--Label\",\n                        item.done && \"done\"\n                      )}\n                    >\n                      {item.text}\n                    </span>\n                  </List.Item>\n                </React.Fragment>\n              );\n            })}\n            {durationToStr(prevTime) !== \"23:59\" && (\n              <List.Item key=\"last\" className=\"Agenda--Row\">\n                <Label as=\"a\" basic color=\"grey\" className=\"Agenda--TimeLabel\">\n                  {durationToStr(prevTime)}-23:59\n                </Label>\n                <span>{BIG_PADDING}</span>\n              </List.Item>\n            )}\n          </List>\n        </Grid.Column>\n        <Grid.Column>\n          <Header\n            as=\"h2\"\n            content=\"Tasks for the day\"\n            subheader=\"Tasks that don't have specific time attached to them\"\n          />\n          {noHour.length === 0 ? (\n            <Message visible className=\"Menu--Notes--Message\">\n              No tasks for today.\n            </Message>\n          ) : (\n            <List selection>\n              {noHour.map((item, i) => (\n                <List.Item key={i} className=\"Agenda--Row\">\n                  <Checkbox\n                    className=\"Agenda--Checkbox\"\n                    defaultChecked={item.done}\n                    onClick={() => {\n                      item.toggle();\n                      rerender();\n                    }}\n                  />\n                  <span\n                    className={classNames(\n                      \"Agenda--Checkbox--Label\",\n                      item.done && \"done\"\n                    )}\n                  >\n                    {item.text}\n                  </span>\n                </List.Item>\n              ))}\n            </List>\n          )}\n        </Grid.Column>\n      </Grid>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Table, Icon, Label, Divider, List } from \"semantic-ui-react\";\n\nimport \"./CheatSheet.css\";\n\nconst FEATURES = [\n  [\n    \"heading\",\n    \"Heading 1-6\",\n    <div>\n      # Heading 1<br />\n      ## Heading 2<br />\n      ### Heading 3 <br />\n      #### Heading 4<br />\n      ##### Heading 5<br />\n      ###### Heading 6\n    </div>,\n    [[\"TAB\", \"toggle contents\"]]\n  ],\n\n  [\"bold\", \"Bold text\", \"*text*\", [[\"CMD-B\", \"create\"]]],\n  [\"italic\", \"Italic text\", \"/text/\", [[\"CMD-I\", \"create\"]]],\n  [\"underline\", \"Underline text\", \"_text_\", [[\"CMD-U\", \"create\"]]],\n  [\"strikethrough\", \"Strike-trough trext\", \"-text-\", [[\"CMD-E\", \"create\"]]],\n  [\"pencil alternate\", \"Highlighted text\", \"`text`\", [[\"CMD-`\", \"create\"]]],\n\n  [\n    \"list ol\",\n    \"Ordered list\",\n    <div>\n      1. First item <br /> 2. Second item\n    </div>,\n    null\n  ],\n  [\n    \"list ul\",\n    \"Bullet list\",\n    <div>\n      * First item <br />* Second item\n    </div>,\n    null\n  ],\n  [\n    \"tasks\",\n    \"Todo list\",\n    <div>\n      - Not completed item <br />\n      + Completed item <br />\n    </div>,\n    [\n      [\"CTRL+Enter\", \"Play\"],\n      [\"CTRL+R\", \"Reset\"],\n      [\"CTRL+Shift+R\", \"Delete completed\"]\n    ]\n  ],\n  [\"quote left\", \"Quote\", \"> Quote\", null],\n\n  [\"window minimize outline\", \"Horizontal line\", \"---\", null],\n  [\"hashtag\", \"Tag\", \"#tag\", null],\n  [\"linkify\", \"Link\", \"http://link.com/\", null],\n  [\"image\", \"Image\", \"[http://example.com/image.jpg]\", null],\n\n  [\"check square outline\", \"Checkbox\", \"[-]\", null],\n  [\"sort numeric up\", \"Counter\", \"[2]\", null],\n  [\"percent\", \"Quantity\", \"[1/10]\", null],\n  [\n    \"stopwatch\",\n    \"Duration\",\n    \"1h10m20s\",\n    [\n      [\"CTRL+Enter\", \"Start countdown\"],\n      [\"CTRL+Shift-Enter\", \"Continue duration\"],\n      [\"CTRL+Shift-8\", \"Double duration\"]\n    ]\n  ],\n  [\n    \"calendar alternate outline\",\n    \"Date and Time\",\n    \"2019-02-23 11:30\",\n    [[\"CTRL+Enter\", \"Select date\"]]\n  ],\n\n  [\n    \"code\",\n    \"Code block\",\n    <pre>{`\\`\\`\\`javascript\nvar a = 10;\nvar b = 20;\nalert(a + b);\n\\`\\`\\``}</pre>,\n    null\n  ],\n  [\n    \"th\",\n    \"Table\",\n    <pre>{`\n|--------|------------|--------|\n| *Name* |   *Email*  | *Date* |\n|--------|------------|--------|\n|   ivo  | ivo@abv.bg |        |\n|--------|------------|--------|`}</pre>,\n    [[\"Tab\", \"format table\"]]\n  ]\n];\n\nexport default function CheatSheet() {\n  return (\n    <div className=\"CheatSheet\">\n      <Table basic=\"very\">\n        <Table.Header>\n          <Table.Row>\n            <Table.HeaderCell>Feature</Table.HeaderCell>\n            <Table.HeaderCell>Pattern</Table.HeaderCell>\n            <Table.HeaderCell>Key-binding</Table.HeaderCell>\n          </Table.Row>\n        </Table.Header>\n\n        <Table.Body>\n          {FEATURES.map(([icon, title, pattern, keybindings], i) => (\n            <Table.Row key={`feature-${i}`} verticalAlign=\"top\">\n              <Table.Cell collapsing>\n                <Icon name={icon} /> {title}\n              </Table.Cell>\n              <Table.Cell>{pattern}</Table.Cell>\n              <Table.Cell>\n                <List>\n                  {keybindings &&\n                    keybindings.map(([key, desc]) => (\n                      <List.Item>\n                        <List.Content>\n                          <Label basic>{key}</Label> {desc}\n                        </List.Content>\n                      </List.Item>\n                    ))}\n                </List>\n\n                {/* keybinding ? <Label basic>{keybinding}</Label> : \"\" */}\n              </Table.Cell>\n            </Table.Row>\n          ))}\n        </Table.Body>\n      </Table>\n\n      <Divider />\n      <Table basic=\"very\">\n        <Table.Header>\n          <Table.Row>\n            <Table.HeaderCell>Snippets</Table.HeaderCell>\n            <Table.HeaderCell>Description</Table.HeaderCell>\n          </Table.Row>\n          <Table.Row verticalAlign=\"top\">\n            <Table.Cell collapsing>\n              <Icon name=\"calendar\" /> {\"<next friday at 12 am>|<today>\"}\n            </Table.Cell>\n            <Table.Cell>Input Date and Time</Table.Cell>\n          </Table.Row>\n          <Table.Row verticalAlign=\"top\">\n            <Table.Cell collapsing>\n              <Icon name=\"calendar\" /> {\"<calendar: 2019-01>|<calendar>\"}\n            </Table.Cell>\n            <Table.Cell>Input calendar for specified month</Table.Cell>\n          </Table.Row>\n        </Table.Header>\n      </Table>\n\n      <Divider />\n      <Table basic=\"very\">\n        <Table.Header>\n          <Table.Row>\n            <Table.HeaderCell>Key-bindings</Table.HeaderCell>\n            <Table.HeaderCell>Description</Table.HeaderCell>\n          </Table.Row>\n          <Table.Row verticalAlign=\"top\">\n            <Table.Cell collapsing>\n              <Label basic>Mod-Up</Label>\n            </Table.Cell>\n            <Table.Cell>Go to previous header</Table.Cell>\n          </Table.Row>\n          <Table.Row verticalAlign=\"top\">\n            <Table.Cell collapsing>\n              <Label basic>Mod-Down</Label>\n            </Table.Cell>\n            <Table.Cell>Go to next header</Table.Cell>\n          </Table.Row>\n          <Table.Row verticalAlign=\"top\">\n            <Table.Cell collapsing>\n              <Label basic>Mod-L</Label>\n            </Table.Cell>\n            <Table.Cell>Select line</Table.Cell>\n          </Table.Row>\n          <Table.Row verticalAlign=\"top\">\n            <Table.Cell collapsing>\n              <Label basic>Mod-Shift-L</Label>\n            </Table.Cell>\n            <Table.Cell>Clone line</Table.Cell>\n          </Table.Row>\n          <Table.Row verticalAlign=\"top\">\n            <Table.Cell collapsing>\n              <Label basic>Mod-X</Label>\n            </Table.Cell>\n            <Table.Cell>Delete line</Table.Cell>\n          </Table.Row>\n        </Table.Header>\n      </Table>\n    </div>\n  );\n}\n","import {\n  joinPoint,\n  canJoin,\n  findWrapping,\n  liftTarget,\n  canSplit,\n  ReplaceAroundStep\n} from \"prosemirror-transform\";\nimport { Slice, Fragment } from \"prosemirror-model\";\nimport {\n  Selection,\n  TextSelection,\n  NodeSelection,\n  AllSelection,\n  SelectionRange\n} from \"prosemirror-state\";\nimport { selectParentNode, deleteSelection } from \"prosemirror-commands\";\n\nimport { showError } from \"../errors\";\nimport { getStorage } from \"../Storage\";\nimport { toVisibleSpaces, getTextContent } from \"../util\";\nimport { RepeatableDecorations, WholeNodeDecorations } from \"./decorations\";\n\n// =============================================================================\n// Lists repeating\n\nexport function splitBlockWithDecorations(state, dispatch) {\n  let { $from, $to } = state.selection;\n  if (\n    state.selection instanceof NodeSelection &&\n    state.selection.node.isBlock\n  ) {\n    if (!$from.parentOffset || !canSplit(state.doc, $from.pos)) return false;\n    if (dispatch) dispatch(state.tr.split($from.pos).scrollIntoView());\n    return true;\n  }\n\n  if (!$from.parent.isBlock) return false;\n\n  if (dispatch) {\n    let atEnd = $to.parentOffset == $to.parent.content.size;\n    let tr = state.tr;\n    if (state.selection instanceof TextSelection) tr.deleteSelection();\n    let deflt =\n      $from.depth == 0\n        ? null\n        : $from.node(-1).contentMatchAt($from.indexAfter(-1)).defaultType;\n    let types = atEnd && deflt ? [{ type: deflt }] : null;\n    let can = canSplit(tr.doc, tr.mapping.map($from.pos), 1, types);\n    if (\n      !types &&\n      !can &&\n      canSplit(tr.doc, tr.mapping.map($from.pos), 1, deflt && [{ type: deflt }])\n    ) {\n      types = [{ type: deflt }];\n      can = true;\n    }\n    if (can) {\n      tr.split(tr.mapping.map($from.pos), 1, types);\n      if (\n        !atEnd &&\n        !$from.parentOffset &&\n        $from.parent.type != deflt &&\n        $from\n          .node(-1)\n          .canReplace(\n            $from.index(-1),\n            $from.indexAfter(-1),\n            Fragment.from(deflt.create(), $from.parent)\n          )\n      )\n        tr.setNodeMarkup(tr.mapping.map($from.before()), deflt);\n    }\n\n    const textContent = getTextContent($from.parent);\n    Object.values(RepeatableDecorations).forEach(d => {\n      let match;\n      if (!(match = textContent.match(d))) {\n        return;\n      }\n\n      if (match[0] === textContent.trim()) {\n        tr.delete(\n          $from.pos - textContent.length,\n          $from.pos + textContent.length\n        );\n      } else {\n        let text = match[0];\n        if (match[0] == \"+\" || match[0] == \"-\") {\n          text = \"- \";\n        } else if (d === RepeatableDecorations.ordered) {\n          text = match[0].replace(\n            /(\\s*|^)(\\d+)/,\n            (_, s, v) => `${s}${v * 1 + 1}`\n          );\n        }\n\n        tr.insertText(toVisibleSpaces(text));\n      }\n    });\n\n    if (WholeNodeDecorations.tableRow.test(textContent)) {\n      tr.insertText(toVisibleSpaces(\"| \"));\n    }\n\n    dispatch(tr.scrollIntoView());\n  }\n  return true;\n}\n\n// =============================================================================\n// Tables\n\nexport function getaTableDomNodes(state, dispatch, view) {\n  const { $from, to } = state.selection;\n  const same = $from.sharedDepth(to);\n  if (same == 0) return false;\n\n  const proseNode = $from.before(same);\n  const currentNode = view.nodeDOM(proseNode);\n  const domNodes = [currentNode];\n\n  if (!currentNode.classList.contains(\"tableRow\")) return false;\n\n  let next = currentNode;\n  while (\n    (next = next.nextElementSibling) &&\n    next.classList.contains(\"tableRow\")\n  ) {\n    domNodes.push(next);\n  }\n\n  let prev = currentNode;\n  while (\n    (prev = prev.previousElementSibling) &&\n    prev.classList.contains(\"tableRow\")\n  ) {\n    domNodes.unshift(prev);\n  }\n\n  return domNodes;\n}\n\nexport function formatTable(state, dispatch, view) {\n  const domNodes = getaTableDomNodes(state, dispatch, view);\n  if (!domNodes) return false;\n\n  const rows = domNodes.map(n => getTextContent(n));\n\n  const { $from, to } = state.selection;\n  const same = $from.sharedDepth(to);\n  const proseNode = $from.before(same);\n  const currentNode = view.nodeDOM(proseNode);\n\n  const [result, nextSelectedRow, nextSelectedCell] = getFormattedTable(\n    rows,\n    domNodes.indexOf(currentNode),\n    $from.pos - proseNode - 1\n  );\n\n  if (!result) return false;\n  if (rows.join() !== result.join()) {\n    domNodes.forEach((node, i) => {\n      const text = toVisibleSpaces(result[i]);\n      node.textContent = text;\n    });\n  }\n\n  setTimeout(() => {\n    // Wait for prosemirror to update itself, request the new nodes and set the selection.\n    const updatedNodes = getaTableDomNodes(view.state, view.dispatch, view);\n    if (!updatedNodes) return;\n    const node = updatedNodes[nextSelectedRow];\n    const pos = view.posAtDOM(node);\n    const tr = view.state.tr;\n\n    let posInCell = result[nextSelectedRow]\n      .split(\"|\")\n      .slice(0, nextSelectedCell + 2)\n      .join(\"|\")\n      .trim().length;\n\n    dispatch(\n      tr.setSelection(\n        TextSelection.create(tr.doc, pos + posInCell, pos + posInCell)\n      )\n    );\n  }, 1);\n\n  return true;\n}\n\nfunction getFormattedTable(rows, selectedRow, selectedChar) {\n  const isLineRow = row => row.slice(0, 2) === \"|-\";\n\n  const dataRows = rows\n    .filter(row => !isLineRow(row))\n    .map(row =>\n      row\n        .replace(/\\s\\s*/g, \" \")\n        .trim()\n        .split(\"|\")\n    );\n\n  if (dataRows.length === 0) return [];\n\n  const separatorRowsIdxs = rows\n    .map((row, i) => (isLineRow(row) ? i : null))\n    .filter(index => index !== null);\n\n  const maxCellsNum = Math.max(...dataRows.map(r => r.length));\n  const table = dataRows.map(row => {\n    const extraEmptyCells = \" \".repeat(maxCellsNum - row.length).split(\" \");\n    return [...row, ...extraEmptyCells];\n  });\n\n  for (let i = 0; i < maxCellsNum; i++) {\n    const maxWidth = Math.max(...table.map(row => row[i].length));\n    table.forEach(row => (row[i] = padBothToLength(row[i], maxWidth, \" \")));\n  }\n\n  const outputTable = table.map(\n    row => `| ${row.filter((c, i) => c !== \"\").join(\" | \")} |`\n  );\n\n  const lineRow = [...outputTable[0]].map(c => (c !== \"|\" ? \"-\" : c)).join(\"\");\n  separatorRowsIdxs.forEach(index => {\n    outputTable.splice(index, 0, lineRow);\n  });\n\n  const selectedCell =\n    rows[selectedRow].slice(0, selectedChar).split(\"|\").length - 2;\n  const resultCellsLength = outputTable[0].split(\"|\").length - 2;\n\n  let nextSelectedRow = selectedRow;\n  let nextSelectedCell = selectedCell + 1;\n\n  if (nextSelectedCell === resultCellsLength) {\n    nextSelectedCell = 0;\n    do {\n      nextSelectedRow += 1;\n    } while (separatorRowsIdxs.includes(nextSelectedRow));\n\n    if (!outputTable[nextSelectedRow]) {\n      nextSelectedRow = outputTable.findIndex(\n        (_, i) => !separatorRowsIdxs.includes(i)\n      );\n    }\n  }\n\n  return [outputTable, nextSelectedRow, nextSelectedCell];\n}\n\nfunction padBothToLength(str, toLength, padStr = \" \") {\n  const fromLength = str.length;\n  const fromStart = Math.floor((toLength - fromLength) / 2);\n  const fromEnd = Math.ceil((toLength - fromLength) / 2);\n\n  return `${padStr.repeat(fromStart)}${str}${padStr.repeat(fromEnd)}`;\n}\n\n// =============================================================================\n// Headers navigation\n\nfunction selectHeader(prop, state, dispatch, view) {\n  const { $from, to } = state.selection;\n  const same = $from.sharedDepth(to);\n  if (same == 0) return false;\n\n  const proseNode = $from.before(same);\n  let currentNode = view.nodeDOM(proseNode);\n\n  while (!currentNode.parentNode.classList.contains(\"ProseMirror\")) {\n    currentNode = currentNode.parentNode;\n  }\n\n  let next = currentNode;\n  while ((next = next[prop])) {\n    if (next.classList.contains(\"heading\")) {\n      next.scrollIntoView({\n        block: \"start\",\n        inline: \"nearest\",\n        behavior: \"smooth\"\n      });\n      const pos = view.posAtDOM(next);\n      let offset = 0;\n      if (next.classList.contains(\"heading-1\")) offset = 1;\n      else if (next.classList.contains(\"heading-2\")) offset = 2;\n      else if (next.classList.contains(\"heading-3\")) offset = 3;\n      else if (next.classList.contains(\"heading-4\")) offset = 4;\n      else if (next.classList.contains(\"heading-4\")) offset = 4;\n      dispatch(\n        view.state.tr.setSelection(\n          Selection.near(view.state.doc.resolve(pos + offset))\n        )\n      );\n      return true;\n    }\n  }\n}\n\nexport function selectNextHeader(...args) {\n  return selectHeader(\"nextElementSibling\", ...args);\n}\n\nexport function selectPrevHeader(...args) {\n  return selectHeader(\"previousElementSibling\", ...args);\n}\n\n// TODO: Folded in folded.\nexport function toggleHeader(state, dispatch, view) {\n  const { $from, to } = state.selection;\n  const same = $from.sharedDepth(to);\n  if (same == 0) return false;\n\n  const proseNode = $from.before(same);\n  const currentHeader = view.nodeDOM(proseNode);\n\n  if (!currentHeader.classList.contains(\"heading\")) return false;\n\n  let next = currentHeader;\n  let nextHeader = null;\n  while ((next = next.nextElementSibling)) {\n    if (next.classList.contains(\"heading\")) {\n      nextHeader = next;\n      break;\n    }\n  }\n\n  if (!nextHeader) return false;\n  if (currentHeader.nextElementSibling === nextHeader) return false;\n\n  let firstBetween = currentHeader.nextElementSibling;\n  let lastBetween = nextHeader.previousElementSibling;\n  if (\n    firstBetween.classList.contains(\"folded-opening\") &&\n    lastBetween.classList.contains(\"folded-closing\")\n  ) {\n    currentHeader.parentNode.removeChild(currentHeader.nextElementSibling);\n    nextHeader.parentNode.removeChild(nextHeader.previousElementSibling);\n\n    return true;\n  }\n\n  const opeing = document.createElement(\"p\");\n  const closing = document.createElement(\"p\");\n\n  opeing.innerText = \"...\";\n  closing.innerText = \"...\";\n\n  currentHeader.parentNode.insertBefore(opeing, currentHeader.nextSibling);\n  currentHeader.parentNode.insertBefore(closing, nextHeader);\n\n  return true;\n}\n\n// =============================================================================\n// Files\n\nexport function insertImage(view) {\n  return uploadFile(view.state, view.dispatch, view);\n}\n\nexport function uploadFile(state, dispatch, view) {\n  const input = document.createElement(\"input\");\n  input.type = \"file\";\n  input.addEventListener(\"change\", () => {\n    const images = Array.from(input.files).filter(file =>\n      /image/i.test(file.type)\n    );\n    if (images.length === 0) {\n      // TODO: Show error that only images are supported.\n      // TODO: Show error on wrong filessize;\n      return;\n    }\n\n    getStorage()\n      .uploadFile(images[0])\n      .then(url => {\n        dispatch(state.tr.insertText(` [${url}] `).scrollIntoView());\n      })\n      .catch(err => {\n        showError(err);\n      });\n  });\n  input.click();\n\n  return true;\n}\n\n// =============================================================================\n// Insert\n\nexport function showHelp() {\n  document.querySelector(\"#prose-show-help\").click();\n}\nexport function showStats() {\n  document.querySelector(\"#prose-show-stats\").click();\n}\nexport function showSlides() {\n  document.querySelector(\"#prose-show-slides\").click();\n}\nexport function showAgenda() {\n  document.querySelector(\"#prose-show-agenda\").click();\n}\nexport function showEditor() {\n  document.querySelector(\"#prose-show-editor\").click();\n}\n\nconst isWithinNode = (className, state, view) => {\n  const { $from, to } = state.selection;\n  const same = $from.sharedDepth(to);\n  if (same == 0) return false;\n\n  const proseNode = $from.before(same);\n  const currentNode = view.nodeDOM(proseNode);\n  return currentNode.classList.contains(className) && currentNode;\n};\n\nexport function insertTable(view) {\n  const { schema } = view.state;\n\n  view.dispatch(\n    view.state.tr\n      .replaceSelectionWith(\n        schema.nodes.paragraph.create(\n          null,\n          schema.text(toVisibleSpaces(\"|   |\"))\n        )\n      )\n      .scrollIntoView()\n  );\n}\n\nexport function insertLink(view) {\n  const { schema } = view.state;\n\n  view.dispatch(\n    view.state.tr\n      .replaceSelectionWith(\n        schema.nodes.paragraph.create(\n          null,\n          schema.text(toVisibleSpaces(\"[<title>](<url>)\"))\n        )\n      )\n      .scrollIntoView()\n  );\n}\n\nexport function insertCode(view) {\n  // TODO: fix selection\n  // debugger;\n  // const resolvedPos = tr.doc.resolve(\n  //   tr.selection.anchor - tr.selection.$anchor.nodeBefore.nodeSize\n  // );\n  // tr.setSelection(new NodeSelection(resolvedPos));\n  const { $from, to } = view.state.selection;\n\n  const { schema } = view.state;\n  const tr = view.state.tr\n    .replaceSelectionWith(\n      schema.nodes.paragraph.create(null, schema.text(\"```\"))\n    )\n    .replaceSelectionWith(schema.nodes.paragraph.create(null, schema.text(\" \")))\n    .replaceSelectionWith(\n      schema.nodes.paragraph.create(null, schema.text(\"```\"))\n    );\n\n  view.dispatch(tr);\n}\n\nexport function insertQuote(view) {\n  const { schema } = view.state;\n\n  view.dispatch(\n    view.state.tr\n      .replaceSelectionWith(\n        schema.nodes.paragraph.create(null, schema.text(toVisibleSpaces(\"> \")))\n      )\n      .scrollIntoView()\n  );\n}\nexport function insertCounter(view) {\n  view.dispatch(\n    view.state.tr.insertText(toVisibleSpaces(\"[0]\")).scrollIntoView()\n  );\n}\nexport function insertQuantity(view) {\n  view.dispatch(\n    view.state.tr.insertText(toVisibleSpaces(\"[0/10]\")).scrollIntoView()\n  );\n}\n\n// =============================================================================\n// Duration\n\nconst clickDurationButton = (state, view) => {\n  const { $from, to } = state.selection;\n  const same = $from.sharedDepth(to);\n  if (same == 0) return false;\n\n  const proseNode = $from.before(same);\n  const currentNode = view.nodeDOM(proseNode);\n\n  const durationButton = currentNode.querySelector(\".duration--button\");\n  if (!durationButton) return false;\n  durationButton.click();\n  return true;\n};\nexport function durationStart(state, dispatch, view) {\n  if (clickDurationButton(state, view)) {\n    document.querySelector(\"#duration--countdown\").click();\n    return true;\n  }\n  return false;\n}\nexport function durationContinue(state, dispatch, view) {\n  if (clickDurationButton(state, view)) {\n    document.querySelector(\"#duration--continue\").click();\n    return true;\n  }\n  return false;\n}\nexport function durationDouble(state, dispatch, view) {\n  if (clickDurationButton(state, view)) {\n    document.querySelector(\"#duration--double\").click();\n    return true;\n  }\n  return false;\n}\n\n// =============================================================================\n// Date\n\n// TODO: multiple dates in the same node\n// TODO: in todo item\nexport function dateSelect(state, dispatch, view) {\n  const { $from, to } = state.selection;\n  const same = $from.sharedDepth(to);\n  if (same == 0) return false;\n\n  const proseNode = $from.before(same);\n  const currentNode = view.nodeDOM(proseNode);\n\n  const dateButton = currentNode.querySelector(\".date--button\");\n  if (!dateButton) return false;\n  dateButton.click();\n  return true;\n}\n\n// =============================================================================\n// Todo\n\nconst getTodoIndicatorNode = (state, view) => {\n  const { $from, to } = state.selection;\n  const same = $from.sharedDepth(to);\n  if (same == 0) return false;\n\n  const proseNode = $from.before(same);\n  let currentNode = view.nodeDOM(proseNode);\n  if (!currentNode.querySelector(\".todo\")) return false;\n\n  while (\n    currentNode.querySelector(\".todo\") &&\n    !currentNode.querySelector(\".todo-indicator\")\n  ) {\n    currentNode = currentNode.previousElementSibling;\n  }\n\n  return currentNode.querySelector(\".todo\") ? currentNode : false;\n};\n\nexport function todoReset(state, dispatch, view) {\n  const node = getTodoIndicatorNode(state, view);\n  if (!node) return false;\n\n  node.querySelector(\"[data-value=reset]\").click();\n  return true;\n}\nexport function todoPlay(state, dispatch, view) {\n  const node = getTodoIndicatorNode(state, view);\n  if (!node) return false;\n\n  node.querySelector(\"[data-value=play]\").click();\n  return true;\n}\nexport function todoClearCompleted(state, dispatch, view) {\n  const node = getTodoIndicatorNode(state, view);\n  if (!node) return false;\n\n  node.querySelector(\"[data-value=delete_completed]\").click();\n  return true;\n}\nexport function todoClearUnfinished(state, dispatch, view) {\n  const node = getTodoIndicatorNode(state, view);\n  if (!node) return false;\n\n  node.querySelector(\"[data-value=delete_unfinished]\").click();\n  return true;\n}\n\n// =============================================================================\n// Counter\n\nexport function counterInc() {}\nexport function counterDec() {}\n\n// =============================================================================\n// Foldable\n\nexport function foldedToggle(state, dispatch, view) {\n  const { $from, to } = state.selection;\n  const same = $from.sharedDepth(to);\n  if (same == 0) return false;\n\n  const proseNode = $from.before(same);\n  const currentNode = view.nodeDOM(proseNode);\n\n  if (currentNode.classList.contains(\"folded-opening\")) {\n    currentNode.innerText = \"....\";\n    return true;\n  }\n\n  if (currentNode.querySelector(\".toggleFolded\")) {\n    currentNode.innerHTML = \"...\";\n    return true;\n  }\n\n  return false;\n}\n\n// =============================================================================\n// Lists\n\nexport function indentList(state, dispatch, view) {\n  const { $from, to } = state.selection;\n  const same = $from.sharedDepth(to);\n  if (same == 0) return false;\n\n  const proseNode = $from.before(same);\n  const currentNode = view.nodeDOM(proseNode);\n\n  const item =\n    currentNode.querySelector(\".bullet\") ||\n    currentNode.querySelector(\".ordered\");\n  if (!item) return false;\n\n  item.textContent = toVisibleSpaces(`    ${item.textContent}`);\n  return true;\n}\n\nexport function unindentList(state, dispatch, view) {\n  const { $from, to } = state.selection;\n  const same = $from.sharedDepth(to);\n  if (same == 0) return false;\n\n  const proseNode = $from.before(same);\n  const currentNode = view.nodeDOM(proseNode);\n\n  const item =\n    currentNode.querySelector(\".bullet\") ||\n    currentNode.querySelector(\".ordered\");\n  if (!item) return false;\n\n  item.textContent = toVisibleSpaces(\n    getTextContent(item).replace(/^\\s{1,4}/, \"\")\n  );\n  return true;\n}\n\n// =============================================================================\n// Editing\n\nexport function killLine(state, dispatch) {\n  const { $from, to } = state.selection;\n  const same = $from.sharedDepth(to);\n  if (same == 0) return false;\n  const pos = $from.before(same);\n\n  dispatch(\n    state.tr\n      .setSelection(NodeSelection.create(state.doc, pos))\n      .deleteSelection()\n      .scrollIntoView()\n  );\n\n  return true;\n}\n\nexport function cloneLine(state, dispatch) {\n  const { schema } = state;\n  const { $from, to } = state.selection;\n  const same = $from.sharedDepth(to);\n  if (same == 0) return false;\n  const pos = $from.before(same);\n  const nodeSel = NodeSelection.create(state.doc, pos);\n\n  const { tr } = state;\n  tr.insert(\n    nodeSel.to,\n    schema.nodes.paragraph.create(null, schema.text(nodeSel.node.textContent))\n  );\n  tr.scrollIntoView();\n\n  dispatch(tr);\n\n  // NOTE: select next Node.\n  // tr.setSelection(NodeSelection.create(tr.doc, $from.after(same)));\n\n  return true;\n}\n","import React from \"react\";\nimport Mousetrap from \"mousetrap\";\nimport { Icon, Menu, Dropdown } from \"semantic-ui-react\";\n\nimport {\n  // Insert\n  insertQuote,\n  insertCounter,\n  insertQuantity,\n  insertImage,\n  insertCode,\n  insertLink,\n  insertTable,\n\n  // Show\n  showHelp,\n  showStats,\n  showSlides,\n  showAgenda,\n  showEditor\n} from \"./commands\";\n\nimport \"./CommandsMenu.css\";\n\nMousetrap.bind(\"ctrl+1\", showEditor);\nMousetrap.bind(\"ctrl+2\", showAgenda);\n// Mousetrap.bind(\"ctrl+3\", showSlides);\nMousetrap.bind(\"ctrl+4\", showStats);\nMousetrap.bind(\"ctrl+5\", showHelp);\n\nexport default function CommandsMenu({ disabled, getView }) {\n  // const subscription = props.source.subscribe();\n  // return () => {\n  //   // Clean up the subscription\n  //   subscription.unsubscribe();\n  // };\n\n  const items = [\n    [\"file\", \"Image\", insertImage, false],\n    [\"linkify\", \"Link\", insertLink, false],\n    [\"code\", \"Code\", insertCode, false],\n    [\"quote left\", \"Quote\", insertQuote, false],\n    [\"th\", \"Table\", insertTable, false],\n    [\"sort numeric up\", \"Counter\", insertCounter, false],\n    [\"percent\", \"Quantity\", insertQuantity, false]\n  ];\n  return (\n    <Dropdown\n      item\n      icon={null}\n      floated=\"right\"\n      disabled={disabled}\n      trigger={\n        <>\n          <Icon name=\"code\" /> Commands\n        </>\n      }\n      className=\"link\"\n      as=\"a\"\n    >\n      <Dropdown.Menu className=\"CommandsMenu\">\n        <Dropdown.Header>Insert</Dropdown.Header>\n        {items.map(([icon, text, onClick, disabled], key) => (\n          <Dropdown.Item\n            {...{\n              key,\n              icon,\n              text,\n              disabled,\n              onClick: () => {\n                const v = getView();\n                v.focus();\n                onClick(v);\n              }\n            }}\n          />\n        ))}\n        <Dropdown.Divider />\n        <Dropdown.Header>Format</Dropdown.Header>\n        {/* <Dropdown.Item */}\n        {/*   icon=\"arrows alternate vertical\" */}\n        {/*   text=\"Fold Selection\" */}\n        {/*   disabled */}\n        {/* /> */}\n\n        <Dropdown.Header>View</Dropdown.Header>\n        <Dropdown.Item\n          icon=\"file alternate outline\"\n          text=\"Show Editor\"\n          description=\"ctrl + 1\"\n          onClick={showEditor}\n        />\n        <Dropdown.Item\n          icon=\"clipboard list\"\n          text=\"Show Agenda\"\n          description=\"ctrl + 2\"\n          onClick={showAgenda}\n        />\n        {/* <Dropdown.Item */}\n        {/*   icon=\"tv\" */}\n        {/*   text=\"Show Slides\" */}\n        {/*   description=\"ctrl + 3\" */}\n        {/*   onClick={showSlides} */}\n        {/* /> */}\n        <Dropdown.Item\n          icon=\"chart line\"\n          text=\"Show Stats\"\n          description=\"ctrl + 4\"\n          onClick={showStats}\n        />\n        <Dropdown.Item\n          icon=\"help\"\n          text=\"Show Help\"\n          description=\"ctrl + 5\"\n          onClick={showHelp}\n        />\n        {/* <Dropdown.Item */}\n        {/*   disabled */}\n        {/*   icon=\"share square\" */}\n        {/*   text=\"Show Preview\" */}\n        {/*   description=\"ctrl + shift + p\" */}\n        {/*   onClick={ */}\n        {/*     /\\* TODO: generate preview *\\/ */}\n        {/*     () => alert(\"TODO: generate preview\") */}\n        {/*   } */}\n        {/* /> */}\n      </Dropdown.Menu>\n    </Dropdown>\n  );\n}\n","import chrono from \"chrono-node\";\n\nimport { Schema, Fragment } from \"prosemirror-model\";\n\nimport { TextSelection } from \"prosemirror-state\";\nimport { keymap } from \"prosemirror-keymap\";\nimport { gapCursor } from \"prosemirror-gapcursor\";\nimport { dropCursor } from \"prosemirror-dropcursor\";\nimport { history, undo, redo } from \"prosemirror-history\";\nimport {\n  selectParentNode,\n  baseKeymap,\n  chainCommands\n} from \"prosemirror-commands\";\n\nimport { InputRule, inputRules } from \"prosemirror-inputrules\";\n\nimport decorations from \"./decorations\";\nimport {\n  formatDate,\n  getZeroBasedNum,\n  getDaysInMonthByWeeks,\n  monthNumToName\n} from \"../util\";\nimport {\n  splitBlockWithDecorations,\n  formatTable,\n  killLine,\n  cloneLine,\n\n  // Headers\n  toggleHeader,\n  selectNextHeader,\n  selectPrevHeader,\n\n  // View\n  showHelp,\n  showStats,\n  showSlides,\n  showAgenda,\n  showEditor,\n\n  // Todo\n  todoReset,\n  todoPlay,\n  todoClearCompleted,\n\n  // Date\n  dateSelect,\n\n  // Duration\n  durationStart,\n  durationContinue,\n  durationDouble,\n\n  // Files\n  uploadFile,\n\n  // Folded\n  foldedToggle,\n\n  // Lists\n  indentList,\n  unindentList\n} from \"./commands\";\n\n// =============================================================================\n// Schema\n\nexport const schema = new Schema({\n  nodes: {\n    doc: {\n      content: \"block+\"\n    },\n\n    paragraph: {\n      content: \"inline*\",\n      group: \"block\",\n      parseDOM: [{ tag: \"p\" }],\n      toDOM() {\n        return [\"p\", 0];\n      }\n    },\n\n    text: {\n      group: \"inline\",\n      toDOM(node) {\n        return node.text;\n      }\n    },\n\n    hard_break: {\n      inline: true,\n      group: \"inline\",\n      selectable: false,\n      parseDOM: [{ tag: \"br\" }],\n      toDOM: () => [\"br\"]\n    }\n  }\n});\n\n// =============================================================================\n// Plugins\n\nconst INPUT_RULES = (function() {\n  let rules = [\n    new InputRule(/<calendar:?(\\s\\d\\d\\d\\d-\\d\\d?)?>/, function(\n      state,\n      match,\n      start,\n      end\n    ) {\n      const { paragraph } = state.schema.nodes;\n      const today = match[1] ? new Date(...match[1].split(\"-\"), 0) : new Date();\n\n      const nodes = Fragment.from([\n        paragraph.create(\n          null,\n          schema.text(\n            `*${monthNumToName[today.getMonth()]} ${today.getFullYear()}*`\n          )\n        ),\n        paragraph.create(\n          null,\n          schema.text(\n            \"|---------|---------|---------|---------|---------|---------|---------|\"\n          )\n        ),\n        paragraph.create(\n          null,\n          schema.text(\n            \"|  *Mon*  |  *Tue*  |  *Wed*  |  *Thu*  |  *Fri*  |  *Sat*  |  *Sun*  |\"\n          )\n        ),\n        paragraph.create(\n          null,\n          schema.text(\n            \"|---------|---------|---------|---------|---------|---------|---------|\"\n          )\n        ),\n        ...getDaysInMonthByWeeks(\n          today.getMonth(),\n          today.getFullYear()\n        ).map(week =>\n          paragraph.create(\n            null,\n            state.schema.text(\n              \"| \" +\n                week\n                  .map(d =>\n                    d ? `   ${getZeroBasedNum(d.getDate())}   ` : \"        \"\n                  )\n                  .join(\"| \") +\n                \"|\"\n            )\n          )\n        ),\n        paragraph.create(\n          null,\n          schema.text(\n            \"|---------|---------|---------|---------|---------|---------|---------|\"\n          )\n        )\n      ]);\n\n      return state.tr.replaceWith(start, end, nodes);\n    }),\n    new InputRule(/<[^>]+>/, function(state, match, start, end) {\n      const parsed = chrono.parse(match[0])[0];\n      if (!parsed || parsed.index !== 1) {\n        return null;\n      }\n\n      let insert = chrono.parseDate(match[0]);\n      insert = formatDate(insert);\n\n      return state.tr.insertText(insert, start, end);\n    })\n  ];\n\n  return inputRules({ rules });\n})();\n\n// =============================================================================\n// Plugins\n\nexport const plugins = [\n  INPUT_RULES,\n\n  history(),\n  dropCursor(),\n  gapCursor(),\n\n  keymap({\n    \"Mod-z\": undo,\n    \"Shift-Mod-z\": redo,\n\n    \"Mod-l\": selectParentNode,\n    \"Mod-x\": killLine,\n    \"Mod-Shift-l\": cloneLine,\n\n    \"Shift-Enter\": baseKeymap[\"Enter\"],\n    \"Ctrl-Enter\": baseKeymap[\"Enter\"], // TODO: add table row\n    // Ctrl-l -> clone line\n\n    Tab: chainCommands(formatTable, foldedToggle, indentList, toggleHeader),\n    \"Shift-Tab\": unindentList,\n\n    Enter: splitBlockWithDecorations,\n\n    \"Ctrl-1\": showEditor,\n    \"Ctrl-2\": showAgenda,\n    \"Ctrl-3\": showSlides,\n    \"Ctrl-4\": showStats,\n    \"Ctrl-5\": showHelp,\n\n    \"Ctrl-r\": todoReset,\n    \"Ctrl-Shift-r\": todoClearCompleted,\n\n    \"Ctrl-u\": uploadFile,\n\n    ...(/Mac/.test(navigator.platform)\n      ? {\n          \"Mod-Enter\": chainCommands(\n            todoPlay,\n            dateSelect,\n            durationStart,\n            baseKeymap[\"Enter\"]\n          ),\n          \"Mod-Shift-Enter\": durationContinue,\n          \"Mod-Shift-8\": durationDouble,\n          \"Mod-ArrowDown\": selectNextHeader,\n          \"Mod-ArrowUp\": selectPrevHeader\n        }\n      : {\n          \"Ctrl-y\": redo,\n          \"Ctrl-ArrowDown\": selectNextHeader,\n          \"Ctrl-ArrowUp\": selectPrevHeader\n        })\n  }),\n  keymap(baseKeymap),\n\n  decorations\n];\n\n/* TODO: vim mode\n\nk: (state, dispatch, view) => {\n      const { from } = state.selection;\n      dispatch(\n        state.tr.setSelection(\n          TextSelection.create(state.doc, Math.max(from - 1, 0), from)\n        )\n      );\n      return true;\n    },\n    j: (state, dispatch, view) => {\n      const { $from, to } = state.selection;\n      dispatch(\n        state.tr.setSelection(\n          TextSelection.create(\n            state.doc,\n            to,\n            Math.min(to + 1, state.doc.content.size)\n          )\n        )\n      );\n      return true;\n    },\n  */\n","import React, { createRef } from \"react\";\nimport { EditorView } from \"prosemirror-view\";\nimport { EditorState } from \"prosemirror-state\";\nimport {\n  Icon,\n  Menu,\n  Segment,\n  Ref,\n  Sticky,\n  Dropdown,\n  Responsive\n} from \"semantic-ui-react\";\n\nimport Stats from \"../Stats/Stats\";\nimport Slides from \"../Slides/Slides\";\nimport Agenda from \"../Agenda/Agenda\";\nimport CheatSheet from \"../CheatSheet/CheatSheet\";\nimport CommandsMenu from \"./CommandsMenu\";\n\nimport { showError } from \"../errors\";\nimport { getStorage } from \"../Storage\";\nimport { schema, plugins } from \"./setup\";\nimport { decorationsHandlers } from \"./decorations\";\nimport { parseTodoNode, getTextContent } from \"../util\";\n\nimport \"./Editor.css\";\n\n// This is used as part of the Prose element key. If you\n// increment it and re-render <Editor>, Prose will remount.\nlet __remountKey = 0;\n\nconst EDITOR_SHOWN = \"EDITOR_SHOWN\";\nconst HELP_SHOWN = \"HELP_SHOWN\";\nconst AGENDA_SHOWN = \"AGENDA_SHOWN\";\nconst STATS_SHOWN = \"STATS_SHOWN\";\nconst SLIDES_SHOWN = \"SLIDES_SHOWN\";\n\nclass Editor extends React.Component {\n  _componentElementRef = createRef();\n  _stickyMenuContextRef = createRef();\n\n  constructor(props) {\n    super(props);\n\n    const store = getStorage();\n\n    this._editorNode = null;\n    this._editorView = null;\n    this._editorState = null;\n\n    this.state = {\n      shown: EDITOR_SHOWN,\n      uploading: false,\n      note: store.getSelectedNote()\n    };\n\n    this.rerender = this.forceUpdate.bind(this);\n    this.storeUnsubscribe = store.subscribe(meta => {\n      const selected = store.getSelectedNote();\n\n      // Server updates should remount Prose in order to show\n      // updated state.\n      if (meta && meta.isServer) {\n        console.count(\"EDITOR_REMOUNT\"); // TODO: Prevent initial remount.\n\n        __remountKey++;\n        this.setState({ note: selected });\n        return;\n      }\n\n      if (this.state.note.id !== selected.id) {\n        this.setState({\n          note: selected,\n          shown: EDITOR_SHOWN\n        });\n      }\n    });\n  }\n\n  componentDidMount() {\n    const elm = this._componentElementRef.current;\n    elm.addEventListener(\"drop\", this.handleDrop, false);\n    elm.addEventListener(\"click\", this.handleClick, false);\n    elm.addEventListener(\"keyup\", this.handleCTRLUp, false);\n    elm.addEventListener(\"keydown\", this.handleCTRLDown, false);\n  }\n\n  componentWillUnmount() {\n    if (this._editorView) {\n      this._editorView.destroy();\n    }\n\n    const elm = this._componentElementRef.current;\n    elm.removeEventListener(\"drop\", this.handleDrop);\n    elm.removeEventListener(\"click\", this.handleClick);\n    elm.removeEventListener(\"keyup\", this.handleCTRLUp);\n    elm.removeEventListener(\"keydown\", this.handleCTRLDown);\n\n    this.storeUnsubscribe();\n  }\n\n  _createEditorView = element => {\n    if (element != null) {\n      this._editorNode = element;\n      const store = getStorage();\n      const { note } = this.state;\n      const content = store.getSelectedNoteContent();\n\n      this._editorState =\n        // NOTE: If content is an empty Object just create a new one.\n        content && Object.keys(content).length > 0\n          ? EditorState.fromJSON(\n              {\n                schema,\n                plugins\n              },\n              content\n            )\n          : EditorState.create({\n              schema,\n              plugins\n            });\n\n      this._editorView = new EditorView(element, {\n        state: this._editorState,\n        dispatchTransaction: tx => {\n          this._editorState = this._editorState.apply(tx);\n          this._editorView.updateState(this._editorState);\n\n          if (!tx.docChanged) return;\n\n          store.updateNote(\n            this.state.note.id,\n            // TODO: Delay these to the actual\n            // saving to improve performance.\n            {\n              meta: {\n                title: this.getTitle(),\n                tags: this.getTags(),\n                todos: this.getTodos().map(t => t.toJSON()),\n                images: this.getImages(),\n                summary: this.getSummary(),\n                highlights: this.getHighlights()\n              }\n            },\n            this._editorState.toJSON()\n          );\n        }\n      });\n\n      this.onFocus();\n    }\n  };\n\n  // ===========================================================================\n  // Handlers\n\n  handleCTRLDown = e => {\n    // Prevent default tab behavior.\n    if (e.keyCode === 9) {\n      e.preventDefault();\n      return;\n    }\n\n    // Allow clicking links when pressing control.\n    if (e.keyCode === 91) {\n      [...document.querySelectorAll(\"a\")].forEach(\n        a => (a.contentEditable = false)\n      );\n    }\n  };\n\n  handleCTRLUp = e => {\n    if (e.keyCode === 91) {\n      [...document.querySelectorAll(\"a\")].forEach(\n        a => (a.contentEditable = true)\n      );\n    }\n  };\n\n  handleClick = e => {\n    Object.keys(decorationsHandlers).forEach(className => {\n      if (e.target.classList.contains(className)) {\n        decorationsHandlers[className](e, e.target, this._editorView);\n      }\n    });\n  };\n\n  handleDrop = e => {\n    if (\n      !(\n        e.dataTransfer &&\n        e.dataTransfer.files &&\n        e.dataTransfer.files.length > 0\n      )\n    )\n      return;\n\n    const images = Array.from(e.dataTransfer.files).filter(file =>\n      /image/i.test(file.type)\n    );\n    if (images.length === 0) {\n      // TODO: Show error that only images are supported.\n      // TODO: Show error on wrong filessize;\n      return;\n    }\n\n    e.preventDefault();\n    this.setState({ uploading: true });\n\n    getStorage()\n      .uploadFile(images[0])\n      .then(url => {\n        this._editorView.dispatch(\n          this._editorView.state.tr.insertText(` [${url}] `).scrollIntoView()\n        );\n        this.setState({ uploading: false });\n      })\n      .catch(err => {\n        showError(err);\n        this.setState({ uploading: false });\n      });\n  };\n\n  // ===========================================================================\n  // Commands\n\n  getTitle() {\n    const heading =\n      this._editorNode && this._editorNode.querySelector(\".heading\");\n    return heading\n      ? heading.lastChild.textContent.trim().replace(/#+/g, \"\")\n      : \"--\";\n  }\n\n  getTodos() {\n    return (\n      this._editorNode &&\n      [...this._editorNode.querySelectorAll(\".todo\")]\n        .map(n => n.parentNode)\n        .map(n => parseTodoNode(n))\n    );\n  }\n\n  getImages() {\n    return (\n      this._editorNode &&\n      [...this._editorNode.querySelectorAll(\".img-text\")].map(n =>\n        n.textContent.trim().slice(1, -1)\n      )\n    );\n  }\n\n  getTags() {\n    const tags = this._editorNode && this._editorNode.querySelectorAll(\".tag\");\n    return tags ? [...tags].map(t => t.textContent.slice(1)) : [];\n  }\n\n  getSummary() {\n    return (\n      this._editorNode &&\n      Array.from(\n        this._editorNode.querySelectorAll(\n          \".ProseMirror > p:not(.ProseMirror-widget):nth-of-type(-n+5)\"\n        )\n      )\n        .map(p => p.innerText)\n        .join(\" \")\n        .replace(/\\.\\.\\./g, \"\")\n        .slice(0, 100)\n    );\n  }\n\n  getHighlights() {\n    return (\n      this._editorNode &&\n      Array.from(this._editorNode.querySelectorAll(\".highlight\")).map(p =>\n        p.innerText.slice(1, -1)\n      )\n    );\n  }\n\n  getTextContent = () => {\n    const editor = this._editorNode\n      .querySelector(\".ProseMirror\")\n      .cloneNode(true);\n\n    editor\n      .querySelectorAll(\".ProseMirror-widget\")\n      .forEach(w => w.parentNode.removeChild(w));\n\n    return Array.from(editor.childNodes)\n      .map((n, i) =>\n        /H\\d/i.test(n.tagName) && !!i ? `\\n${n.textContent}\\n` : n.textContent\n      )\n      .join(\"\\n\")\n      .replace(new RegExp(\" \", \"g\"), \" \");\n  };\n\n  getHeadings() {\n    const headings =\n      this._editorNode &&\n      Array.from(this._editorNode.querySelectorAll(\".heading\"));\n\n    if (headings.length === 0) return [];\n\n    const result = headings.map(elm => {\n      const t = getTextContent(elm);\n      const level = t.match(/#*/)[0].length;\n      const text = t.replace(/#*\\s*/, \"\");\n      return { level, text, elm };\n    });\n\n    return result;\n  }\n\n  // ===========================================================================\n  // Handlers\n\n  toggleMenuItem = item => {\n    this._editorNode.parentNode.scrollTo({\n      top: 0,\n      behavior: \"smooth\"\n    });\n    this.setState({ shown: item });\n  };\n  showEditor = () => this.toggleMenuItem(EDITOR_SHOWN);\n  toggleHelp = () => this.toggleMenuItem(HELP_SHOWN);\n  toggleStats = () => this.toggleMenuItem(STATS_SHOWN);\n  toggleSlides = () => this.toggleMenuItem(SLIDES_SHOWN);\n  toggleAgenda = () => this.toggleMenuItem(AGENDA_SHOWN);\n\n  // TODO: Example of commands for menu or something\n  onFocus() {\n    if (this._editorView) {\n      this._editorView.focus();\n    }\n  }\n\n  // ===========================================================================\n  // Rendering\n\n  renderHelp() {\n    return (\n      <div className=\"Editor--help\">\n        <CheatSheet />\n      </div>\n    );\n  }\n\n  renderMenu() {\n    const { shown } = this.state;\n\n    return (\n      <Sticky context={this._stickyMenuContextRef}>\n        <div className=\"Editor--menu\">\n          <Responsive\n            as={Menu}\n            maxWidth={767}\n            compact\n            size=\"tiny\"\n            className=\"Editor--menu--mobile\"\n          >\n            <Dropdown item icon=\"bars icon\">\n              <Dropdown.Menu>\n                <Dropdown.Item\n                  id=\"prose-show-editor\"\n                  active={shown === EDITOR_SHOWN}\n                  onClick={this.showEditor}\n                >\n                  <Icon name=\"file alternate outline\" />\n                  Editor\n                </Dropdown.Item>\n                <Dropdown.Item\n                  id=\"prose-show-agenda\"\n                  active={shown === AGENDA_SHOWN}\n                  onClick={this.toggleAgenda}\n                >\n                  <Icon name=\"clipboard list\" />\n                  Agenda\n                </Dropdown.Item>\n                <Dropdown.Item\n                  id=\"prose-show-stats\"\n                  active={shown === STATS_SHOWN}\n                  onClick={this.toggleStats}\n                >\n                  <Icon name=\"chart line\" />\n                  Stats\n                </Dropdown.Item>\n                <Dropdown.Divider />\n                <Dropdown.Item\n                  id=\"prose-show-help\"\n                  active={shown === HELP_SHOWN}\n                  onClick={this.toggleHelp}\n                >\n                  <Icon name=\"help\" />\n                  Help\n                </Dropdown.Item>\n                <CommandsMenu\n                  getView={() => this._editorView}\n                  disabled={shown !== EDITOR_SHOWN}\n                />\n              </Dropdown.Menu>\n            </Dropdown>\n          </Responsive>\n\n          <Responsive as={Menu} minWidth={768} icon=\"labeled\" size=\"mini\">\n            <Menu.Item\n              name=\"file alternate outline\"\n              active={shown === EDITOR_SHOWN}\n              onClick={this.showEditor}\n              id=\"prose-show-editor\"\n            >\n              <Icon name=\"file alternate outline\" />\n              Editor\n            </Menu.Item>\n            <Menu.Item\n              name=\"clipboard list\"\n              active={shown === AGENDA_SHOWN}\n              onClick={this.toggleAgenda}\n              id=\"prose-show-agenda\"\n            >\n              <Icon name=\"clipboard list\" />\n              Agenda\n            </Menu.Item>\n\n            {/* <Menu.Item */}\n            {/*   name=\"tv\" */}\n            {/*   active={shown === SLIDES_SHOWN} */}\n            {/*   onClick={this.toggleSlides} */}\n            {/*   id=\"prose-show-slides\" */}\n            {/* > */}\n            {/*   <Icon name=\"tv\" /> */}\n            {/*   Slides */}\n            {/* </Menu.Item> */}\n\n            <Menu.Item\n              name=\"chart line\"\n              active={shown === STATS_SHOWN}\n              onClick={this.toggleStats}\n              id=\"prose-show-stats\"\n            >\n              <Icon name=\"chart line\" />\n              Stats\n            </Menu.Item>\n\n            <Menu.Menu position=\"right\">\n              <Menu.Item\n                name=\"help\"\n                active={shown === HELP_SHOWN}\n                onClick={this.toggleHelp}\n                id=\"prose-show-help\"\n              >\n                <Icon name=\"help\" />\n                Help\n              </Menu.Item>\n              <CommandsMenu\n                getView={() => this._editorView}\n                disabled={shown !== EDITOR_SHOWN}\n              />\n            </Menu.Menu>\n          </Responsive>\n        </div>\n      </Sticky>\n    );\n  }\n\n  render() {\n    const { note, shown, uploading } = this.state;\n\n    return (\n      <Ref innerRef={this._stickyMenuContextRef}>\n        <div className=\"Editor\" ref={this._componentElementRef}>\n          {this.renderMenu()}\n          {uploading && <div className=\"Editor--Uploading\">Loading....</div>}\n          {shown === STATS_SHOWN && (\n            <Stats\n              todos={this.getTodos()}\n              getTextContent={this.getTextContent}\n            />\n          )}\n          {shown === AGENDA_SHOWN && (\n            <Agenda todos={this.getTodos()} rerender={this.rerender} />\n          )}\n          {shown === HELP_SHOWN && this.renderHelp()}\n          {shown === SLIDES_SHOWN && <Slides editor={this._editorNode} />}\n          <div\n            className=\"EditorWrapper\"\n            key={note.id + __remountKey}\n            ref={this._createEditorView}\n            style={shown === EDITOR_SHOWN ? {} : { display: \"none\" }}\n          />\n        </div>\n      </Ref>\n    );\n  }\n}\n\nexport default Editor;\n","import React, { Component } from \"react\";\nimport { Sidebar, Segment, Icon, Responsive } from \"semantic-ui-react\";\nimport PropTypes from \"prop-types\";\nimport { Menu } from \"semantic-ui-react\";\n\nimport SideMenu from \"./Menu/Menu\";\nimport Editor from \"./Editor/Editor.js\";\n\nimport \"./App.css\";\n\nclass App extends Component {\n  static propTypes = {\n    firebase: PropTypes.object.isRequired\n  };\n\n  state = { visible: true, width: 0, height: 0 };\n\n  componentDidMount() {\n    this.updateWindowDimensions();\n    window.addEventListener(\"resize\", this.updateWindowDimensions);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.updateWindowDimensions);\n  }\n\n  updateWindowDimensions = () => {\n    this.setState({ width: window.innerWidth, height: window.innerHeight });\n  };\n\n  render() {\n    const { visible, width } = this.state;\n    const { firebase } = this.props;\n\n    const isSmallScreen = width < 1100;\n\n    return (\n      <>\n        {visible === false && (\n          <Menu className=\"Menu--Trigger\" compact icon size=\"tiny\">\n            <Menu.Item\n              name=\"caret square left\"\n              onClick={() => {\n                document.querySelector(\"#pushable\").scrollTo({\n                  top: 0,\n                  behavior: \"smooth\"\n                });\n                this.setState({ visible: !visible });\n              }}\n            >\n              <Icon name=\"caret square right\" />\n            </Menu.Item>\n          </Menu>\n        )}\n        <Sidebar.Pushable id=\"pushable\">\n          <SideMenu\n            visible={visible}\n            isSmallScreen={isSmallScreen}\n            onToggle={() => this.setState({ visible: !visible })}\n            firebase={firebase}\n          />\n\n          <Sidebar.Pusher dimmed={visible && isSmallScreen}>\n            <Editor />\n          </Sidebar.Pusher>\n        </Sidebar.Pushable>\n      </>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport * as firebase from \"firebase/app\";\nimport * as firebaseui from \"firebaseui\";\nimport \"firebase/analytics\";\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\nimport \"firebase/storage\";\n\nimport App from \"./App\";\nimport { createStorage, getStorage } from \"./Storage\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nimport \"semantic-ui-css/semantic.min.css\";\nimport \"./index.css\";\n\nwindow._firebase = firebase;\nif (process.env.NODE_ENV !== \"development\") {\n  console.debug = () => {};\n  console.count = () => {};\n\n  delete window._firebase;\n}\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyBhVeDAZGXGaNZmPz0u4NSajNR9jhSZXMk\",\n  authDomain: \"prose-app.firebaseapp.com\",\n  databaseURL: \"https://prose-app.firebaseio.com\",\n  projectId: \"prose-app\",\n  storageBucket: \"prose-app.appspot.com\",\n  messagingSenderId: \"383371015272\",\n  appId: \"1:383371015272:web:549a0ff32e65d9062a77dd\",\n  measurementId: \"G-5GV4HX47QL\"\n};\n// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\nfirebase.analytics();\n\nconst uiConfig = {\n  // Providers setup\n  signInOptions: [\n    // TODO: google login\n    // {\n    //   provider: firebase.auth.GoogleAuthProvider.PROVIDER_ID,\n    //   // Required to enable this provider in one-tap sign-up.\n    //   // authMethod: 'https://accounts.google.com',\n    //   scopes: [\"https://www.googleapis.com/auth/contacts.readonly\"],\n    //   customParameters: {\n    //     // Forces account selection even when one account\n    //     // is available.\n    //     prompt: \"select_account\"\n    //   }\n    // },\n    {\n      provider: firebase.auth.EmailAuthProvider.PROVIDER_ID,\n      requireDisplayName: true\n    }\n  ],\n\n  // Will use popup for IDP Providers sign-in flow instead of the default, redirect.\n  signInFlow: \"popup\",\n\n  // Terms of service url/callback.\n  tosUrl: () => alert(\"TODO: Terms of service.\"),\n  // Privacy policy url/callback.\n  privacyPolicyUrl: () => alert(\"TODO: PrivacyPolicy\"),\n\n  credentialHelper: firebaseui.auth.CredentialHelper.NONE,\n\n  callbacks: {\n    // signInSuccess: () => false\n    signInSuccessWithAuthResult: function(authResult, redirectUrl) {\n      return false;\n    }\n  }\n};\n\nfirebase.auth().onAuthStateChanged(user => {\n  const container = document.getElementById(\"root\");\n  if (user) {\n    createStorage(firebase, () => {\n      container.innerHTML = \"\";\n      ReactDOM.render(<App firebase={firebase} />, container);\n    });\n\n    window.Store = getStorage();\n  } else {\n    // Initialize the FirebaseUI Widget using Firebase.\n    const initUI = () => {\n      const ui = new firebaseui.auth.AuthUI(firebase.auth());\n      // The start method will wait until the DOM is loaded.\n      container.innerHTML = \"\";\n      ui.start(\"#root\", uiConfig);\n    };\n\n    ReactDOM.unmountComponentAtNode(container);\n    const prevUI = firebaseui.auth.AuthUI.getInstance();\n    if (prevUI) {\n      prevUI.delete().then(initUI);\n    } else {\n      initUI();\n    }\n  }\n});\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}
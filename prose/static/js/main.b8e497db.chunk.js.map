{"version":3,"sources":["initial.js","errors.js","StorageInMemory.js","Menu/Menu.js","util.js","Stats/Stats.js","Slides/Slides.js","Sound.js","DatePicker/DatePicker.js","Editor/popup.js","Editor/PopupTodo.js","Editor/WidgetTodo.js","Editor/WidgetDuration.js","Editor/decorations.js","Agenda/Agenda.js","CheatSheet/CheatSheet.js","Editor/commands.js","Editor/CommandsMenu.js","Editor/setup.js","Editor/Editor.js","App.js","serviceWorker.js","index.js"],"names":["notes","meta","title","tags","todos","done","text","date","duration","images","summary","highlights","content","doc","type","selection","anchor","head","showError","err","alert","console","error","LOCAL_STORAGE_STATE_KEY","LOCAL_STORAGE_SELECTED_KEY","getNoteTemplate","id","arguments","length","undefined","noteData","Object","objectSpread","created_at","Date","updated_at","deleted_at","Storage","firebase","callback","_this","this","classCallCheck","selectNote","state","Error","concat","_selectedNote","window","localStorage","setItem","handleUpdate","addNewNote","getNextNoteId","note","updateNote","data","updateData","_firebase","firestore","Timestamp","now","deleteNote","restoreNote","permanentlyDeleteNote","uploadFile","_userId","auth","currentUser","uid","_handlers","getItem","JSON","parse","initialNotes","reduce","result","_ref","i","objectWithoutProperties","keys","noteExists","Math","max","apply","toConsumableArray","sss","setTimeout","createClass","key","value","f","_this2","push","filter","fn","_len","args","Array","_key","stringify","forEach","h","getSelectedNote","values","sort","a","b","seconds","getNotesList","n","getActiveNotes","tag","instance","getStorage","SideMenu","props","possibleConstructorReturn","getPrototypeOf","call","handleToggleExpanded","e","name","expanded","setState","includes","item","handleSearch","search","target","handleClearSearch","handleToggleTag","handleLogOut","signOut","then","location","reload","handleDelete","delete","catch","unsubscribe","subscribe","forceUpdate","react_default","createElement","Dropdown","displayName","icon","basic","size","compact","floating","labeled","button","className","Menu","direction","Menu_Menu","Item","disabled","Label","Icon","email","Divider","onClick","_this3","store","entries","getNotesByTagsAndDate","map","_ref2","slicedToArray","active","color","_this4","_this$state","selected","allActiveNotes","inactiveNotes","getInactiveNotes","activeNotes","toLowerCase","_this$props","visible","onToggle","Sidebar","as","animation","onHide","vertical","renderUserInfo","Button","floated","Input","assign","placeholder","onChange","trim","link","Message","classNames","stopPropagation","open","Fragment","renderTags","React","Component","formatDate","d","month","getMonth","day","getDate","year","getFullYear","join","getDaysInMonthByWeeks","days","UTC","setDate","weeks","currentWeek","getDay","maxLen","w","unshift","getZeroBasedNum","num","monthNumToName","formatDateTime","moment","format","DAYS_OF_THE_WEEK","matchRecurringDay","_dayOfTheWeekNum","dayOfTheWeekStr","dayOfTheWeekNum","dayIndex","indexOf","_dayOfTheWeekStr$spli","split","_dayOfTheWeekStr$spli2","fromDay","toDay","fromDayIndex","toDayIndex","parseDuration","str","match","slice","Boolean","parseInt","m","s","normalizeDuration","floor","durationToStr","getTextContent","textContent","toVisibleSpaces","toRealSpaces","parseTodoNode","querySelector","clone","cloneNode","from","children","c","classList","contains","parentNode","removeChild","node","innerText","replace","querySelectorAll","toggle","click","toJSON","Stats","today","notDone","words","count","readingTime","hours","minutes","Header","subheader","Grid","columns","textAlign","Column","Content","Subheader","Statistic","Group","widths","Value","horizontal","preventDefault","blob","Blob","saveAs","Or","Slides","editor","_useState","useState","_useState2","page","setPage","currentSlide","slides","Pagination","defaultActivePage","totalPages","onPageChange","_","activePage","Segment","dangerouslySetInnerHTML","__html","outerHTML","positive","labelPosition","style","clear","Howl","volume","src","alarm","Sound","play","_style","display","width","margin","backgroundColor","borderRadius","defineProperty","DatePicker","onSelect","setValue","showTime","isValid","react_datepicker_min_default","inline","toDate","showTimeInput","shouldCloseOnSelect","todayButton","fluid","ModalComponent","_ref$actions","actions","_ref$rawContent","rawContent","modalProps","handleClose","hidePopup","Modal","onClose","closeIcon","Actions","actionProps","popup","document","ReactDOM","unmountComponentAtNode","innerHTML","showPopup","body","appendChild","render","showDuration","PopupTodo","_React$Component","handleTogglePause","time","paused","pausedAtDuration","componentDidMount","componentWillUnmount","handleStart","automatic","current","handleNextItem","_this$state2","nextItem","nextTime","finished","inherits","_timer","setInterval","bind","clearInterval","_this$state3","currentTime","currentItem","itemDuration","getItemDuration","currentDuration","asSeconds","isNoDurationItem","find","negative","onFinish","totalTime","List","verticalAlign","todo","maxDuration","Checkbox","label","defaultChecked","Popup","trigger","_this$props2","_this$state4","renderFinal","url","Image","wrapped","circular","renderInitial","handleClick","WidgetTodo","view","dom","add","WidgetTodo_Menu","action","next","fullTodoList","nextElementSibling","parsedNodes","PopupTodo_PopupTodo","_ref3","reverse","pos","posAtDOM","pN","nodeAt","tr","deleteRange","nodeSize","dispatch","dateNode","createTextNode","TimeTracker","initial","currentTimeRef","setDuration","useEffect","timer","clearTimeout","Timer","_useState3","_useState4","subtract","WidgetDuration","prevText","WidgetDuration_Timer","WidgetDuration_TimeTracker","insertText","k","OpenCloseDecorations","code","folded","WholeNodeDecorations","tableRow","_heading","RepeatableDecorations","quote","bullet","ordered","_todo","genInlineDecorationRegex","char","RegExp","Decorations","hr","bold","italic","highlight","underline","striketrough","toggleFolded","_url","_img","_link","_date","_duration","_checkbox","_counter","_proportion","DecorationsWidgets","decos","Decoration","index","class","nodeName","data-pos","checked","currentNode","resolve","nodeBefore","nodeAfter","todoRegEx","test","widget","data-startpos","data-endpos","href","getCounterWidgets","excludedNodes","excludedInTable","decorationsHandlers","getDecorations","openClose","descendants","isText","isTableRow","regex","exec","closing","opening","nodesBetween","p","getPos","lang","source","hljs","getLanguage","DecorationSet","create","elm","dataset","overlay","menu","WidgetDuration_WidgetDuration","addEventListener","createPopper","placement","startPos","endPos","previousElementSibling","min","Infinity","level","decorations","Plugin","init","decorationsSet","docChanged","getState","matchDate","lastIndex","matchRecurringDate","SMALL_PADDING","BIG_PADDING","Agenda","rerender","startOf","groups","forToday","recurring","dayNum","dayStr","isSame","_recurring$slice","_recurring$slice2","_matchDate$slice","_matchDate$slice2","fromTime","toTime","noHour","withHour","processTodos","info","prevTime","relaxed","divided","spaceTime","asMinutes","FEATURES","CheatSheet","Table","Row","HeaderCell","Body","pattern","keybinding","Cell","collapsing","selectHeader","prop","_state$selection3","$from","to","same","sharedDepth","proseNode","before","nodeDOM","scrollIntoView","block","behavior","offset","setSelection","Selection","near","selectNextHeader","selectPrevHeader","_len2","_key2","insertImage","input","files","file","showHelp","showStats","showSlides","showAgenda","showEditor","insertQuote","schema","replaceSelectionWith","nodes","paragraph","insertCounter","insertQuantity","clickDurationButton","_state$selection5","durationButton","getTodoIndicatorNode","_state$selection7","CommandsMenu","getView","items","v","focus","description","Mousetrap","Schema","group","parseDOM","toDOM","hard_break","selectable","plugins","rules","InputRule","start","end","construct","week","replaceWith","parsed","chrono","insert","parseDate","inputRules","history","dropCursor","gapCursor","keymap","Mod-z","undo","Shift-Mod-z","redo","Mod-i","selectParentNode","Shift-Enter","baseKeymap","Ctrl-Enter","Tab","_state$selection2","domNodes","prev","_getFormattedTable","rows","selectedRow","selectedChar","isLineRow","row","dataRows","separatorRowsIdxs","maxCellsNum","r","table","extraEmptyCells","repeat","_loop","maxWidth","toLength","padStr","fromLength","fromStart","fromEnd","ceil","padBothToLength","outputTable","lineRow","splice","selectedCell","resultCellsLength","nextSelectedRow","nextSelectedCell","getFormattedTable","_getFormattedTable2","posInCell","TextSelection","Enter","_state$selection","$to","NodeSelection","isBlock","parentOffset","canSplit","parent","atEnd","deleteSelection","deflt","depth","contentMatchAt","indexAfter","defaultType","types","can","mapping","canReplace","setNodeMarkup","Ctrl-1","Ctrl-2","Ctrl-3","Ctrl-4","Ctrl-5","Ctrl-r","Ctrl-Shift-r","Ctrl-u","navigator","platform","Mod-Enter","chainCommands","_state$selection6","dateButton","Mod-Shift-Enter","Mod-Shift-8","Mod-ArrowDown","Mod-ArrowUp","Ctrl-y","Ctrl-ArrowDown","Ctrl-ArrowUp","__remountKey","EDITOR_SHOWN","HELP_SHOWN","AGENDA_SHOWN","STATS_SHOWN","SLIDES_SHOWN","Editor","_componentElementRef","createRef","_stickyMenuContextRef","_createEditorView","element","_editorNode","getSelectedNoteContent","_editorState","EditorState","fromJSON","_editorView","EditorView","dispatchTransaction","tx","updateState","getTitle","getTags","getTodos","t","getImages","getSummary","getHighlights","onFocus","handleCTRLDown","keyCode","contentEditable","handleCTRLUp","handleDrop","dataTransfer","uploading","childNodes","tagName","toggleMenuItem","scrollTo","top","shown","toggleHelp","toggleStats","toggleSlides","toggleAgenda","assertThisInitialized","storeUnsubscribe","isServer","destroy","removeEventListener","heading","lastChild","CheatSheet_CheatSheet","Sticky","context","stackable","position","CommandsMenu_CommandsMenu","Ref","innerRef","ref","renderMenu","Stats_Stats","Agenda_Agenda","renderHelp","Slides_Slides","App","Pushable","Menu_SideMenu","Pusher","dimmed","src_Editor_Editor","hostname","debug","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","uiConfig","signInOptions","provider","GoogleAuthProvider","PROVIDER_ID","scopes","customParameters","prompt","EmailAuthProvider","requireDisplayName","signInFlow","tosUrl","privacyPolicyUrl","credentialHelper","firebaseui","CredentialHelper","NONE","callbacks","signInSuccessWithAuthResult","authResult","redirectUrl","onAuthStateChanged","user","container","getElementById","createStorage","src_App_0","Store","initUI","ui","AuthUI","prevUI","getInstance","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.b8e497db.chunk.js","sourcesContent":["const notes = [\n\n  {\n    meta: {\n      title: \"Здрасти!\",\n      tags: [\"tag\"],\n      todos: [\n        {\n          done: false,\n          text: \"Обади се на майка си\",\n          date: null,\n          duration: null,\n          images: []\n        },\n        {\n          done: true,\n          text: \" Отиди да трнираш\",\n          date: null,\n          duration: null,\n          images: []\n        },\n        {\n          done: false,\n          text: \" Направи си вечеря\",\n          date: null,\n          duration: null,\n          images: []\n        },\n        {\n          done: false,\n          text: \" Отиди на пазар\",\n          date: null,\n          duration: null,\n          images: []\n        },\n        {\n          done: false,\n          text: \" Гледай филм\",\n          date: null,\n          duration: null,\n          images: []\n        },\n        {\n          done: false,\n          text: \"Задача 1\",\n          date: null,\n          duration: null,\n          images: []\n        },\n        {\n          done: false,\n          text: \" Задача 2\",\n          date: null,\n          duration: null,\n          images: []\n        },\n        {\n          done: false,\n          text: \" Jumping jacks\",\n          date: null,\n          duration: \"30s\",\n          images: []\n        },\n        { done: false, text: \" Rest\", date: null, duration: \"10s\", images: [] },\n        {\n          done: false,\n          text: \" Wall sit\",\n          date: null,\n          duration: \"30s\",\n          images: []\n        },\n        {\n          done: false,\n          text: \" Push-up\",\n          date: null,\n          duration: \"30s\",\n          images: []\n        },\n        {\n          done: false,\n          text: \" Rest \",\n          date: null,\n          duration: \"10s\",\n          images: []\n        },\n        {\n          done: false,\n          text: \" Abdominal crunch \",\n          date: null,\n          duration: \"30s\",\n          images: []\n        },\n        { done: false, text: \" Rest\", date: null, duration: \"10s\", images: [] },\n        {\n          done: false,\n          text: \"Step-up onto a chair  (може да стои на произволно място)\",\n          date: null,\n          duration: \"30s\",\n          images: []\n        },\n        {\n          done: false,\n          text: \"Get up and make your bed  \",\n          date: \"mon-fri 08:30\",\n          duration: \"5m\",\n          images: []\n        },\n        {\n          done: false,\n          text: \"Brush your teeth  \",\n          date: \"mon-fri 08:35\",\n          duration: \"3m\",\n          images: []\n        },\n        {\n          done: false,\n          text: \"Wash your face  \",\n          date: \"mon-fri 08:38\",\n          duration: \"2m\",\n          images: []\n        },\n        {\n          done: false,\n          text: \"Do a 10 min workout  \",\n          date: \"mon-fri 08:40\",\n          duration: \"10m\",\n          images: []\n        },\n        {\n          done: false,\n          text: \"Meditate for 20 min   \",\n          date: \"mon-fri 08:50\",\n          duration: \"20m\",\n          images: []\n        },\n        {\n          done: false,\n          text: \"Get up and make your bed  \",\n          date: \"sat-sun 10:00\",\n          duration: \"5m\",\n          images: []\n        },\n        {\n          done: false,\n          text: \"Brush your teeth  \",\n          date: \"mon-fri 10:05\",\n          duration: \"3m\",\n          images: []\n        },\n        {\n          done: false,\n          text: \"Brush your teeth \",\n          date: \"everyday 23:00\",\n          duration: null,\n          images: []\n        },\n        {\n          done: false,\n          text: \"Go to bed \",\n          date: \"everyday 23:30\",\n          duration: null,\n          images: []\n        },\n        {\n          done: false,\n          text:\n            \"Call your mother  (това е задача за деня без час и продължителност)\",\n          date: \"2020-02-20\",\n          duration: null,\n          images: []\n        },\n        {\n          done: false,\n          text: \"Interview   \",\n          date: \"2020-02-20 12:00\",\n          duration: \"1h\",\n          images: []\n        },\n        {\n          done: false,\n          text: \"[0/10] Кисели млека \",\n          date: \"2020-02-20\",\n          duration: null,\n          images: []\n        },\n        {\n          done: false,\n          text: \"[0/2] Хлляба\",\n          date: null,\n          duration: null,\n          images: []\n        },\n        {\n          done: false,\n          text: \"[1/9] Вафли боровец\",\n          date: null,\n          duration: null,\n          images: []\n        }\n      ],\n      images: [],\n      summary:\n        \" Здрасти! \\n Това е Private Beta версията на Prose. Prose представлява един нов (или поне малко по-ра\",\n      highlights: [\n        \"ivailo.nikolaev.hristov@gmail.com\",\n        \"HELP\",\n        \"Важен\",\n        \">\",\n        \"*\",\n        \"-\",\n        \"+\",\n        \"[71/88]\",\n        \"[51]\",\n        \"[-] или [+]\",\n        \"---\",\n        \"...\",\n        \"...\",\n        \"....\",\n        \"[https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png]\",\n        \"TAB\",\n        \"|\",\n        \"TAB\",\n        \"|-\",\n        \"TAB\",\n        \"<today>\",\n        \"<next friday at 5am>\",\n        \"<calendar>\",\n        \"<calendar: 2020-05>\",\n        \"reset\",\n        \"delete completed/unfinished\",\n        \"mark all for today\",\n        \"play\",\n        \"play\",\n        \"automatic\",\n        \"Agenda\",\n        \"<today\",\n        \"mark all for today\",\n        \"continue\",\n        \"countdown\",\n        \"Commands\"\n      ]\n    },\n    content: {\n      doc: {\n        type: \"doc\",\n        content: [\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"# Здрасти!\" }]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"Това е Private Beta версията на Prose. Prose представлява един нов  (или поне малко по-различен) поглед върху типичните note taking и TODO приложеня. Основни характеристики:\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"* Markdown базиран редактор за текст с някои  разширения - дати, продължителности, таблици, ...\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"* Заляга се основно върху работа с текст, вместо работа с User Interfaces.\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"* Някои текстови шаблони динамично се заменят от UI елементи (вместо UI елементите да се добавят с цъкане по менюта). Когато UI елемента бъде изтрит, се връща текстовото му представяне.\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"* Предлага  автоматизация върху TODO листовете, датите, продължителностите, таблиците и някои други елементи. В повечето алтернативи тези елементи са просто статични.\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"* Мощни TODO листове, които работят в комбинация с дати и продължителности.\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"* Agenda view - график на задачите от текущия документ по дни, седмици (не е готово) и мсеци (не е готово).\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"* Slides view - възможност да се генерира презентация от текущата бележка.\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"Ако познаваш Markdown ще се оправиш. Можеш да мислиш за приложението като markdown редактор с доста автоматизация.\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"Пиши ми за всякакви бъгове, feedback или идеи на `ivailo.nikolaev.hristov@gmail.com`.\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"След като прегледаш този докоумент виж и `HELP`  менюто за всички опции.\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"## Декорации\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"Декорациите на шаблони, които автоматично се ситилизират в текста.\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"* *Удебелен* текст\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"* /Наклонен/ текст\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"* _Подчертан_ текст\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"* ~Зачертан~ текст\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"* `Важен` текст\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"* http://google.com линк (задръжте контрол и кликнете на линка за да се отвори)\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text: \"* [google](http://google.com) markdown линк със заглавие\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"* #tag таг (записките се организират по тагове в менюто от ляво, повече за менюто надолу)\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"## Блокови декорации \" }]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"*Цитати* - всеки ред, който започва с `>`  се декорира като цитат.\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"> Roses are red\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \">   Violets are blue\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"> Some poems ryme\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \">  But this one doesn't!\" }]\n          },\n          { type: \"paragraph\" },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"*Подредени списъци* - всеки ред, който започва с число и точка се декорира като ред от подреден списък.\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"1. John Cena\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"2. The Rock\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"3. The Undertaker \" }]\n          },\n          { type: \"paragraph\", content: [{ type: \"text\", text: \"4. Kane\" }] },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"5. Jeff Hardy\" }]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"*Неподредени списъци* - всеки ред, който започва с `*` се декорира като ред от неподреден списък.\"\n              }\n            ]\n          },\n          { type: \"paragraph\", content: [{ type: \"text\", text: \"* Apples\" }] },\n          { type: \"paragraph\", content: [{ type: \"text\", text: \"* Oranges\" }] },\n          { type: \"paragraph\", content: [{ type: \"text\", text: \"* Peaches\" }] },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"*Списъци от задачи* - всеки ред, който започва с `-` или `+` се декорира като задача. (за задачите има специална секция надолу)\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"- Обади се на майка си\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"+  Отиди да трнираш\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"-  Направи си вечеря\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"-  Отиди на пазар\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"-  Гледай филм\" }]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"*Блок от код* - като в markdown. \" }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"```javascript\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"var a = 10;\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"var b = 20;\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"var e = 20;\" }]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"function sum(x, y){\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"  alert(x + y);\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"  return x + y;\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"  // comment is here\" }]\n          },\n          { type: \"paragraph\", content: [{ type: \"text\", text: \"}\" }] },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"alert('ffdfd');\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: 'var c = \"fasfasf\";' }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"const c =  + b;\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: 'new Error(\"fsdfsdfsdfsdf\");' }]\n          },\n          { type: \"paragraph\", content: [{ type: \"text\", text: \"```\" }] },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"## Елементи\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"Една от основите идеи в Prose е, че документа се миксират UI и текст. UI елементите могат да се кликат, копират, изтриват и т.н. Всеки елемент се явява декорация върху някакъв текстов шаблон, ако напишете шаблона, той автоматично ще се трансформира в съответния елемент.\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"*Количество* [71/88]                         Шаблон: `[71/88]`\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"*Брояч*            [51]                                 Шаблон: `[51]`\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"*Чекбокс*         [-] или [-]                               Шаблон: `[-] или [+]`\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"*Хоризонтална линия* - `---`\" }]\n          },\n          { type: \"paragraph\", content: [{ type: \"text\", text: \"---\" }] },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"*Дата и време*  - шаблона е самата дата, която просто се декорира. Кликенете на дата за да изберете друга такава.\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"* 2020-01-30 \" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"* 2019-12-20 11:30 (с време)\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"* mon-fri 13:30 (повтаряща се дата)\" }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"* everyday 08:17 | mon 19:20\" }]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"*Продлжителност* - обозначава продължителност от време, може да се използва също като таймер или time tracker. Кликнете за опции.\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text: \"* 20h43m15s  - 20 часа, 43  минути и 14 секунди\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"* 20m - 20 минути\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"* 17s - 17 секунди\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"* 1h04s - 1 час с 4 секунди\" }]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"*Свиване на съдържание*\" }]\n          },\n          { type: \"paragraph\", content: [{ type: \"text\", text: \"....\" }] },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"Дълъг текст който може да бъде скрит.\" }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"(натинете на зеленото квадратче по-горе)\" }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"Всички редове между `...` и `...` биват скрити. Когато първата част от макета е с четири точки `....` тя става бутон.\"\n              }\n            ]\n          },\n          { type: \"paragraph\", content: [{ type: \"text\", text: \"...\" }] },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"*Картинки*\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"Шаблон: `[https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png]`\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"[https://www.google.com/images/branding/googlelogo/2x/googlelogo_color_272x92dp.png]\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"## Таблици\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \" *(Почти)Декември 2019*\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"|---------|---------|---------|---------|---------|---------|---------|\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"|  *Mon*  |  *Tue*  |  *Wed*  |  *Thu*  |  *Fri*  |  *Sat*  |  *Sun*  |\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"|---------|---------|---------|---------|---------|---------|---------|\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"|         |         |         |         |   *+*   |   01.   |         |\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"|   02.   |   03.   |   04.   |   05.   |   06.   |   07.   |   08.   |\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"|   09.   |   10.   |   11.   |   12.   |   13.   |   14.   |   15.   |\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"|   16.   |   17.   |   18.   |   19.   |   20.   |   21.   |   22.   |\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"|   23.   |   24.   |   25.   |   26.   |   27.   |   28.   |   29.   |\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"|   30.   |   31.   |         |         |         |         |         |\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"|---------|---------|---------|---------|---------|---------|---------|\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"* Направете промяна в таблицата и натистенте `TAB` за да се реформатира.\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"* Добавете нов ред в края на таблицата започващ с `|` и натиснете `TAB`.\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"* Добавете нов ред в края на таблицата започващ с `|-`  и натиснете `TAB`.\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text: \"* За момента не е позволено да има елементи в таблицата.\"\n              }\n            ]\n          },\n          { type: \"paragraph\", content: [{ type: \"text\", text: \"## Откъси\" }] },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"Откъсите текстови шаблони, които биват заменяни динамично с друг текст. Пробвайте да препишете някой от шаблоните.\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"* Днешната дата - `<today>`\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text: \"* Дата в свободен текст - `<next friday at 5am>`\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text: \"* Календар за текущия месец - `<calendar>`\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text: \"* Календар за избран месец - `<calendar: 2020-05>`\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"## Листове от задачи\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"За една от основните иновации в Prose, смятаме TODO листовете. Две или повече задачи написани една след друга, формират TODO лист.\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"- Задача 1\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"-  Задача 2\" }]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text: \"Prose предлага някои автоматизации върху TODO листвете:\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"* `reset` - нулира всички готови задачи.\" }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"* `delete completed/unfinished` - изтрива съответно свършените или несвършените задачи.\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"* `mark all for today` - добавя днешната дата към всяка от задачите.\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"* `play` - стартира задачите в TODO листа последователно и до пълното изпълнение на целия лист. Повече за тази опция надолу.\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"`play` опцията може да се използва за дефиниране на рутини или всякакви последователности от действия като готвене, тренировки и т.н. Можете да добавите продължителност към всяка задача в листа. Стартирайте долния лист в `automatic` режим.\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"- 30s Jumping jacks\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"- 10s Rest\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"- 30s Wall sit\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"- 30s Push-up\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"- 10s Rest \" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"- 30s Abdominal crunch \" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"- 10s Rest\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"- Step-up onto a chair 30s (може да стои на произволно място)\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text: \"* Някои от опциите имат клаившни комбинации.\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"## Agenda - График за деня\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"Prose документите могат да се изпозлват за генериране на график за деня. В менюто `Agenda` са извлечени и представени в хронологичен ред всички задачи от всички TODO листове в *текущия документ*, които трябва да бъдат свършени в съответния ден. Забележете как към всяка задача има дата и продължителност.\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"*Сутришна рутина*\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text: \"- Get up and make your bed mon-fri 08:30 5m\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"- Brush your teeth mon-fri 08:35 3m\" }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"- Wash your face mon-fri 08:38 2m\" }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"- Do a 10 min workout mon-fri 08:40 10m\" }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"- Meditate for 20 min  mon-fri 08:50 20m\" }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"*Сутришна рутина - weekend*\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text: \"- Get up and make your bed sat-sun 10:00 5m\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"- Brush your teeth mon-fri 10:05 3m\" }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"*Вечерна рутина*\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"- Brush your teeth everyday 23:00\" }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"- Go to bed everyday 23:30\" }]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"*Задачи с дати* (променете датите за текущия ден, може да използвате `<today` откъса или опцията от менюто `mark all for today`)\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"- Call your mother 2020-02-20 (това е задача за деня без час и продължителност)\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"- Interview 2020-02-20 12:00 1h \" }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"## Комбинации \" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"Елементие могат да се комбинират в системи, които да пасват нуждите и удобството на потребителите. Примери:\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"*Seinfeld календар* - може да се имплементира с таблица, чекбокси или тодо лист.\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text: \"[-] 2020-02-20 [-] 2020-02-21  [-] 2020-02-22\"\n              }\n            ]\n          },\n          { type: \"paragraph\" },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"*Shopping list*\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"- [0/10] Кисели млека 2020-02-20\" }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"- [0/2] Хлляба\" }]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"- [1/9] Вафли боровец\" }]\n          },\n          { type: \"paragraph\" },\n          { type: \"paragraph\", content: [{ type: \"text\", text: \"*Брояч*\" }] },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"Колко пъти ходих до тоалетна днес? [0] \" }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              { type: \"text\", text: \"Колко калории изядох днес ? [1438] \" }\n            ]\n          },\n          { type: \"paragraph\" },\n          { type: \"paragraph\", content: [{ type: \"text\", text: \"*Време*\" }] },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"Колко медитирах този месец? 20m (използвайте `continue` опцията)\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"Стартиране на помодоро 25m (използвайте `countdown` опцията) \"\n              }\n            ]\n          },\n          { type: \"paragraph\", content: [{ type: \"text\", text: \"## Други\" }] },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"* Меню (от ляво) - показва всички създадени бележки, могат да се филтрират по таговете в докуемнта. (в стил http://bear.app/)\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"* Качване на картинка - завлечете и пуснете картинката на желаното място в документа или използвайте менюто с команди.\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text: \"* Статистики - статистики за *текущия документ*.\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [\n              {\n                type: \"text\",\n                text:\n                  \"* Презентации - генерира презентация от съдържанието на документа (това е незавършена и екпериментална функционалност за сега)\"\n              }\n            ]\n          },\n          {\n            type: \"paragraph\",\n            content: [{ type: \"text\", text: \"* Команди - виж меню `Commands`\" }]\n          },\n          { type: \"paragraph\" },\n          { type: \"paragraph\" },\n          { type: \"paragraph\" }\n        ]\n      },\n      selection: { type: \"text\", anchor: 188, head: 188 }\n    }\n  },\n\n  // {\n  //   content: {\n  //     doc: {\n  //       type: \"doc\",\n  //       content: [\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"# PRD\" }] },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"## Описане\" }]\n  //         },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"---\" }] },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text:\n  //                 \"`Prose` - smart documents and a toolkit for personal organization. You just write markdown and prose performs various automation for you. A toolkit to organize your life and work.\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"## Пробем\" }]\n  //         },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"---\" }] },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text:\n  //                 \"Пазарът с ТОДО приложенията и тези за записки като цяло е доста препълнен. Постоянно се създават нови, но някакак еднакви приложения. Основните проблеми на приложенията от този тип са:\"\n  //             }\n  //           ]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"* Прекалено сложни\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"* Прекалено прости и лишени от функционалности\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"* Неудобен и/или бавен потребителски интерфейс\"\n  //             }\n  //           ]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text:\n  //                 \"Хората, които ползват такива неща обикновено са много чувствителни на тема продуктивност и не обичат да си губят времето и инструмента им да им пречи. За това много от тях прибягват просто до статични текстови файлове. Това, което целим е да запзим простотата на текстовите файлове и да добавим функциите на UI приложенията + още, които не биха били възможни ако не боравехме само с текст.\"\n  //             }\n  //           ]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text:\n  //                 \"Идеята е потребителят пише текст и този текст автоматично се певръща в UI елементи.\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"## Алтернативни приложения\" }]\n  //         },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"---\" }] },\n  //         { type: \"paragraph\" },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"* Bear\" }] },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"* Evernote\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"* Notion\" }]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"Ключови разлики:\" }]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text:\n  //                 \"1. Интерфейс - изцяло базиран на текст, който рисува UI елементи. Писането на текст е по-бързо от цъкане по менюта.\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             { type: \"text\", text: \"2. Изключително мощни TODO листове\" }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"3. Таблици\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"4. Статистики и автоматиазции\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"5. Мултиплатформеност (не е вързан с Apple)\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"## Елементи\" }]\n  //         },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"---\" }] },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"### Декорации и листове\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"* Дебел тескт: *пример*\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"* Подчертан текст: _пример_\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"* Наклонен текст: /пример/\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"* Зачертан текст: ~пример~\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"* Подчертан текст: _пример_\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"* Пояснение: (пример)\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"* Важен текст: `пример`\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"* Хоризонтална лияния:  \" }]\n  //         },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"---\" }] },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: '(трансофмрирмация от \"---\" в началото на реда)'\n  //             }\n  //           ]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text:\n  //                 \"^^ Горното е пример за неподреден сиписък. Поддържат се също така и подредени спицъци:\"\n  //             }\n  //           ]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"1. Ябълки\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"2. Банани\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"3. Круши\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"4. Пъпеши\" }]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"`<Enter>` създава нов елемент на текущия списък.\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text:\n  //                 \"`<Shift+Enter>` създава нов ред, без той да е елемент на текущия списк. \"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"### Линкове\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"Засичат се автоматично: http://google.com\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text:\n  //                 \"Редактират се свободно като останлия текст. Потребителят може да ги натисне като задържи ключа CTRL.\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"Има пояснение (title) за това поведение на hover.\"\n  //             }\n  //           ]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"`<CTRL + Click>`  - отваряне на линка в нов прозорец.\"\n  //             }\n  //           ]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"### Хедъри\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"Навигация\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"### Дати\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"### Таймери/Продължителности\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"### Количества и броячи\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"Използват се \" }]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"`[ 1/3 ]` създава [0/3]\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"`[1 ]`      създава [1]\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"### TODO листове\" }]\n  //         },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"Звуци \" }] },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"Дати\" }] },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"Таймери\" }] },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"### Код\" }] },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"### Цитати\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"### Таблици\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"|------------------|---------|--------------------|\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"|      *Name*      |  *Age*  |    *Profession*    |\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"|------------------|---------|--------------------|\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"|    Brad Pitt     |   56    |       Actor        |\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"|  Britney Spears  |   32    |   Singer / Actor   |\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"|   Donald Trump   |   73    |  President of USA  |\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"|    Jeff Bezos    |   52    |    Entrepeneur     |\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"|------------------|---------|--------------------|\"\n  //             }\n  //           ]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"### Тагове\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text:\n  //                 \"Таговете са средство за огранизация на бележките, както и за включване и изключване на определни опции. Бележките се групират по тагове в менюто за бележки.\"\n  //             }\n  //           ]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"#таг #друг-таг \" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"### Вмъквания\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"`<дата >`\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"`<calendar>`\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"`<calendar: 2019-11>`\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"### Комбинации\" }]\n  //         },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"Streak:\" }] },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"Labeld checkbox \" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"## Меню с бележки\" }]\n  //         },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"---\" }] },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"Последни\" }]\n  //         },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"Архив\" }] },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"Тагове\" }] },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"## Статистики\" }]\n  //         },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"---\" }] },\n  //         { type: \"paragraph\" },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"## Опции за документ\" }]\n  //         },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"---\" }] },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text:\n  //                 \"Опциите представляват като тагове и са локални за съотвения документ. За да активира някоя опция, потребителят просто трябва да добави съответния таг, към желания документ.\"\n  //             }\n  //           ]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text: \"#notify - изпращай известия за предстоящи събития\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             { type: \"text\", text: \"#watch - синхонизирай с AppleWatch\" }\n  //           ]\n  //         },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text:\n  //                 \"Трябва да имаме меню, къдто да са изброени всички опции. Когато потребителят избира опция от менюто, ще се добавя съответния таг в края на документа.\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"## Клавишни комбинации\" }]\n  //         },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"---\" }] },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"* Стандартни\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"`Mod-ArrowUp`\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"`Mod-ArrowDown`\" }]\n  //         },\n  //         { type: \"paragraph\" },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"* Вим \" }] },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"* Емакс\" }] },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"Навигация по хедърите.\" }]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [{ type: \"text\", text: \"## Бизнес модел\" }]\n  //         },\n  //         { type: \"paragraph\", content: [{ type: \"text\", text: \"---\" }] },\n  //         { type: \"paragraph\" },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text:\n  //                 \"* Безплатен -> ти съхваняваш файловете си и ги дистрибутираш на желаните платформи.\"\n  //             }\n  //           ]\n  //         },\n  //         {\n  //           type: \"paragraph\",\n  //           content: [\n  //             {\n  //               type: \"text\",\n  //               text:\n  //                 \"* Платен -> ние съхраняваме файловете ти и ги синхронизираме с Iphone и Apple watch app\"\n  //             }\n  //           ]\n  //         },\n  //         { type: \"paragraph\" }\n  //       ]\n  //     },\n  //     selection: { type: \"text\", anchor: 2, head: 2 }\n  //   },\n  //   meta: { title: \"PRD\", tags: [\"таг\", \"друг-таг\", \"notify\", \"watch\"] }\n  // },\n];\n\nexport default notes;\n","export function showError(err) {\n  alert(err);\n  console.error(err);\n}\n","import initialNotes from \"./initial.js\";\nimport { showError } from \"./errors\";\n\nconst LOCAL_STORAGE_STATE_KEY = \"__prose-editor-in-memory-store__\";\nconst LOCAL_STORAGE_SELECTED_KEY = \"__prose-editor-in-memory-store-selected__\";\n\nfunction getNoteTemplate(id, content = null, noteData = {}) {\n  return {\n    id,\n    content,\n    meta: {\n      title: null,\n      tags: []\n    },\n    created_at: new Date(),\n    updated_at: new Date(),\n    deleted_at: null,\n    ...noteData\n  };\n}\n\n// TODO: Move to pro in a callback.\nexport class Storage {\n  constructor(firebase, callback) {\n    this._userId = firebase.auth().currentUser.uid;\n    this._firebase = firebase;\n\n    this._handlers = []; // Storage for update handlers.\n\n    // Selected note is not part of the state as user may have multiple\n    // app instances at the same time. It is kept only in local storage.\n    this._selectedNote =\n      window.localStorage.getItem(LOCAL_STORAGE_SELECTED_KEY) || null;\n\n    // State is the data persisted in Firebase.\n    this.state = window.localStorage.getItem(LOCAL_STORAGE_STATE_KEY)\n      ? JSON.parse(window.localStorage.getItem(LOCAL_STORAGE_STATE_KEY))\n      : {\n          notes: initialNotes.reduce((result, { content, ...noteData }, i) => {\n            result[i + 1] = getNoteTemplate(i + 1, content, noteData);\n            return result;\n          }, {})\n        };\n\n    if (Object.keys(this.state.notes).length === 0) {\n      this.addNewNote();\n    }\n\n    if (!this.noteExists(this._selectedNote)) {\n      this.selectNote(Math.max(...Object.keys(this.state.notes)), true);\n    }\n\n    window.sss = this;\n\n    setTimeout(() => {\n      callback();\n    }, 10);\n  }\n\n  // ===========================================================================\n  // Subscription\n\n  subscribe(f) {\n    this._handlers.push(f);\n    return () => {\n      this._handlers = this._handlers.filter(fn => fn !== f);\n    };\n  }\n\n  handleUpdate(...args) {\n    if (!this.noteExists(this._selectedNote)) {\n      this.selectNote(Math.max(...Object.keys(this.state.notes)), true);\n    }\n\n    if (Object.keys(this.state.notes).length === 0) {\n      this.addNewNote();\n    }\n\n    window.localStorage.setItem(\n      LOCAL_STORAGE_STATE_KEY,\n      JSON.stringify(this.state)\n    );\n\n    this._handlers.forEach(h => h(...args));\n  }\n\n  // ===========================================================================\n  // Selectors\n\n  getSelectedNote() {\n    return this.state.notes[this._selectedNote];\n  }\n\n  getSelectedNoteContent() {\n    return this.getSelectedNote().content;\n  }\n\n  noteExists(id) {\n    return !!this.state.notes[id];\n  }\n\n  getNextNoteId() {\n    return Math.max(...Object.keys(this.state.notes), 0) + 1;\n  }\n\n  getNotesList() {\n    return Object.values(this.state.notes).sort(\n      (a, b) => b.updated_at.seconds - a.updated_at.seconds\n    );\n  }\n\n  getActiveNotes() {\n    return this.getNotesList().filter(n => !n.deleted_at);\n  }\n\n  getInactiveNotes() {\n    return this.getNotesList().filter(n => !!n.deleted_at);\n  }\n\n  getNotesByTagsAndDate() {\n    const result = {};\n    this.getActiveNotes()\n      .sort((a, b) => a.updated_at - b.updated_at)\n      .forEach(note => {\n        note.meta.tags.forEach(tag => {\n          if (!result[tag]) result[tag] = [];\n          result[tag].push(note);\n        });\n      });\n\n    return result;\n  }\n\n  // ===========================================================================\n  // Mutations\n\n  selectNote = id => {\n    if (id === this.selectNote) return;\n\n    if (!this.state.notes[id]) {\n      throw new Error(`No note with id: ${id}`);\n    }\n\n    this._selectedNote = id;\n    window.localStorage.setItem(LOCAL_STORAGE_SELECTED_KEY, id);\n    this.handleUpdate();\n  };\n\n  addNewNote = () => {\n    const id = this.getNextNoteId();\n    const note = getNoteTemplate(id);\n\n    this.state.notes[id] = note;\n    this.selectNote(id);\n  };\n\n  updateNote = (id, data, content) => {\n    const updateData = {\n      ...data,\n      content,\n      updated_at: this._firebase.firestore.Timestamp.now()\n    };\n\n    this.state.notes[id] = {\n      ...this.state.notes[id],\n      ...updateData\n    };\n\n    this.handleUpdate();\n  };\n\n  deleteNote = id => {\n    this.state.notes[id] = {\n      ...this.state.notes[id],\n      deleted_at: this._firebase.firestore.Timestamp.now()\n    };\n    this.handleUpdate();\n  };\n\n  restoreNote = id => {\n    this.state.notes[id] = {\n      ...this.state.notes[id],\n      deleted_at: null\n    };\n    this.handleUpdate();\n  };\n\n  permanentlyDeleteNote = id => {\n    delete this.state.notes[id];\n    this.handleUpdate();\n  };\n\n  // ===========================================================================\n  // Files\n\n  uploadFile = () => {\n    showError(\"Uploading files is not supported in the free version.\");\n  };\n}\n\n// =============================================================================\n// Exports\n\nlet instance = null;\n\nexport function createStorage(...args) {\n  instance = new Storage(...args);\n}\n\nexport function getStorage() {\n  if (!instance) {\n    throw new Error(\"Create store before using it\");\n  }\n  return instance;\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport {\n  Dropdown,\n  Icon,\n  Input,\n  Menu,\n  Label,\n  Button,\n  Segment,\n  Rail,\n  Message,\n  Divider,\n  List,\n  Sidebar\n} from \"semantic-ui-react\";\n\nimport { getStorage } from \"../Storage\";\nimport \"./Menu.css\";\n\nexport default class SideMenu extends React.Component {\n  static propTypes = {\n    firebase: PropTypes.object.isRequired\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      search: \"\",\n      tag: null,\n      expanded: []\n    };\n  }\n\n  // ===========================================================================\n  // Handlers\n\n  handleToggleExpanded = (e, name) => {\n    const { expanded } = this.state;\n    this.setState({\n      expanded: expanded.includes(name)\n        ? expanded.filter(item => item !== name)\n        : [...expanded, name]\n    });\n  };\n\n  handleSearch = e => {\n    this.setState({ search: e.target.value });\n  };\n\n  handleClearSearch = () => {\n    this.setState({ search: \"\" });\n  };\n\n  handleToggleTag = tag => {\n    this.setState({ tag: this.state.tag === tag ? null : tag });\n  };\n\n  handleLogOut = () =>\n    this.props.firebase\n      .auth()\n      .signOut()\n      .then(() => window.location.reload());\n\n  handleDelete = () =>\n    this.props.firebase\n      .auth()\n      .currentUser.delete()\n      .then(() => window.location.reload())\n      .catch(e => {\n        // TODO:\n        alert(\"nooo\");\n      });\n\n  // ===========================================================================\n  // Hooks\n\n  componentDidMount() {\n    this.unsubscribe = getStorage().subscribe(() => this.forceUpdate());\n  }\n\n  componentWillUnmount() {\n    this.unsubscribe();\n  }\n\n  // ===========================================================================\n  // Rendering\n\n  renderUserInfo() {\n    const { currentUser } = this.props.firebase.auth();\n    return (\n      <Dropdown\n        text={currentUser.displayName + \" \"}\n        icon=\"user\"\n        basic\n        size=\"tiny\"\n        compact\n        floating\n        labeled\n        button\n        className=\"icon\"\n      >\n        <Dropdown.Menu direction=\"left\">\n          <Menu.Item disabled>\n            <Label>\n              <Icon name=\"user\" /> {currentUser.displayName}\n            </Label>\n            <br /> <br />\n            <Label>\n              <Icon name=\"mail\" /> {currentUser.email}\n            </Label>\n          </Menu.Item>\n          <Divider />\n          <Dropdown.Item\n            icon=\"log out\"\n            text=\"Logout\"\n            onClick={this.handleLogOut}\n          />\n          <Dropdown.Item\n            icon=\"delete\"\n            text=\"Delete\"\n            onClick={this.handleDelete}\n          />\n          <Dropdown.Item\n            icon=\"edit\"\n            text=\"Edit\"\n            onClick={() => {\n              // TODO:\n              alert(\"TODO:\");\n            }}\n          />\n        </Dropdown.Menu>\n      </Dropdown>\n    );\n  }\n\n  renderTags() {\n    const store = getStorage();\n    return (\n      <Menu.Menu>\n        {Object.entries(store.getNotesByTagsAndDate()).map(([tag, notes]) => (\n          <Menu.Item\n            key={tag}\n            active={this.state.tag === tag}\n            onClick={() => this.handleToggleTag(tag)}\n          >\n            #{tag}\n            <Label {...(this.state.tag === tag ? { color: \"teal\" } : {})}>\n              {notes.length}\n            </Label>\n          </Menu.Item>\n        ))}\n      </Menu.Menu>\n    );\n  }\n\n  render() {\n    const { search, tag, expanded } = this.state;\n    const store = getStorage();\n    const selected = store.getSelectedNote();\n\n    const allActiveNotes = store.getActiveNotes();\n    const inactiveNotes = store.getInactiveNotes();\n\n    let activeNotes = allActiveNotes;\n    if (search) {\n      const filterFn = n =>\n        n.meta.title.toLowerCase().includes(search.toLowerCase());\n      activeNotes = activeNotes.filter(filterFn);\n    }\n\n    if (tag) {\n      const filterFn = n => n.meta.tags.includes(tag);\n      activeNotes = activeNotes.filter(filterFn);\n    }\n\n    const { visible, onToggle } = this.props;\n\n    if (visible === false) return null;\n\n    return (\n      <Sidebar\n        as={Menu}\n        animation=\"push\"\n        onHide={onToggle}\n        vertical\n        visible={visible}\n        className=\"Menu\"\n      >\n        <Menu.Item>\n          {this.renderUserInfo()}\n          <Button\n            icon={{ name: \"plus\", color: \"olive\" }}\n            basic\n            size=\"tiny\"\n            floated=\"right\"\n            onClick={() => store.addNewNote()}\n          />\n        </Menu.Item>\n        <Menu.Item>\n          <Input\n            placeholder=\"Search...\"\n            value={search}\n            onChange={this.handleSearch}\n            {...(!!search.trim()\n              ? {\n                  icon: {\n                    name: \"close\",\n                    link: true,\n                    onClick: this.handleClearSearch\n                  }\n                }\n              : {})}\n          />\n        </Menu.Item>\n\n        <Menu.Item className=\"Menu--Notes\">\n          Notes\n          {activeNotes.length !== allActiveNotes.length && (\n            <Label>\n              {activeNotes.length} / {allActiveNotes.length}\n            </Label>\n          )}\n          <Divider />\n          <Menu.Menu>\n            {activeNotes.length === 0 && (\n              <Message visible className=\"Menu--Notes--Message\">\n                No notes found.\n              </Message>\n            )}\n\n            {activeNotes.map(n => (\n              <Dropdown\n                item\n                key={n.id}\n                text={n.meta.title || \"--\"}\n                direction=\"left\"\n                className={classNames(n === selected && \"active\")}\n                onClick={e => {\n                  e.stopPropagation();\n                  store.selectNote(n.id);\n                }}\n                {...(n !== selected ? { open: false } : {})}\n              >\n                <Dropdown.Menu>\n                  <Dropdown.Item\n                    icon=\"archive\"\n                    text=\"Archive\"\n                    onClick={e => {\n                      e.stopPropagation();\n                      store.deleteNote(n.id);\n                    }}\n                  />\n                </Dropdown.Menu>\n              </Dropdown>\n            ))}\n          </Menu.Menu>\n        </Menu.Item>\n\n        <Menu.Item\n          className={classNames(\n            \"Menu--Archive\",\n            expanded.includes(\"archive\") && \"Menu--Archive-active\"\n          )}\n          onClick={e => this.handleToggleExpanded(e, \"archive\")}\n          active={expanded.includes(\"archive\")}\n        >\n          Archive\n          <Icon name=\"trash\" />\n          {expanded.includes(\"archive\") && (\n            <>\n              <Menu.Menu>\n                {inactiveNotes.map(n => (\n                  <Dropdown\n                    key={n.id}\n                    item\n                    text={n.meta.title || \"--\"}\n                    direction=\"left\"\n                    className={classNames(n === selected && \"active\")}\n                  >\n                    <Dropdown.Menu>\n                      <Dropdown.Item\n                        icon=\"edit\"\n                        text=\"Open\"\n                        onClick={() => store.selectNote(n.id)}\n                      />\n                      <Dropdown.Item\n                        icon=\"undo\"\n                        text=\"Restore\"\n                        onClick={e => {\n                          e.stopPropagation();\n                          store.restoreNote(n.id);\n                        }}\n                      />\n                      <Dropdown.Item\n                        icon=\"delete\"\n                        text=\"Delete\"\n                        onClick={e => {\n                          e.stopPropagation();\n                          store.permanentlyDeleteNote(n.id);\n                        }}\n                      />\n                    </Dropdown.Menu>\n                  </Dropdown>\n                ))}\n              </Menu.Menu>\n            </>\n          )}\n        </Menu.Item>\n        <Menu.Item>{this.renderTags()}</Menu.Item>\n      </Sidebar>\n    );\n  }\n}\n","import moment from \"moment\";\n\nexport function formatDate(date) {\n  let d = new Date(date),\n    month = \"\" + (d.getMonth() + 1),\n    day = \"\" + d.getDate(),\n    year = d.getFullYear();\n\n  if (month.length < 2) month = \"0\" + month;\n  if (day.length < 2) day = \"0\" + day;\n\n  return [year, month, day].join(\"-\");\n}\n\nexport function getDaysInMonth(month, year) {\n  const date = new Date(Date.UTC(year, month, 1));\n  const days = [];\n  while (date.getMonth() === month) {\n    days.push(new Date(date));\n    date.setDate(date.getDate() + 1);\n  }\n  return days;\n}\n\nexport function getDaysInMonthByWeeks(...args) {\n  const days = getDaysInMonth(...args);\n  const weeks = [];\n\n  let currentWeek = 0;\n  days.forEach(day => {\n    if (!weeks[currentWeek]) weeks[currentWeek] = [];\n    weeks[currentWeek].push(day);\n\n    if (day.getDay() === 0) {\n      currentWeek++;\n    }\n  });\n  const maxLen = Math.max(...weeks.map(w => w.length));\n\n  while (weeks[0].length !== maxLen) {\n    weeks[0].unshift(null);\n  }\n\n  while (weeks[weeks.length - 1].length !== maxLen) {\n    weeks[weeks.length - 1].push(null);\n  }\n\n  return weeks;\n}\n\nexport function getZeroBasedNum(num) {\n  return num < 10 ? `0${num}` : num;\n}\n\nexport const monthNumToName = [\n  \"January\",\n  \"February\",\n  \"March\",\n  \"April\",\n  \"May\",\n  \"June\",\n  \"July\",\n  \"August\",\n  \"September\",\n  \"October\",\n  \"November\",\n  \"December\"\n];\n\n// TODO: refactor\nexport const formatDateTime = item => {\n  return moment(item.seconds * 1000).format(\"MMMM Do YYYY, h:mm:ss a\");\n};\n\nexport const EVERYDAY = \"everyday\";\nexport const DAYS_OF_THE_WEEK = [\n  \"mon\",\n  \"tue\",\n  \"wed\",\n  \"thu\",\n  \"fri\",\n  \"sat\",\n  \"sun\"\n];\n\nexport const matchRecurringDay = (_dayOfTheWeekNum, dayOfTheWeekStr) => {\n  const dayOfTheWeekNum = _dayOfTheWeekNum === 0 ? 6 : _dayOfTheWeekNum - 1;\n  if (dayOfTheWeekStr === EVERYDAY) return true;\n\n  const dayIndex = DAYS_OF_THE_WEEK.indexOf(dayOfTheWeekStr);\n  if (dayIndex !== -1) {\n    return dayOfTheWeekNum === dayIndex;\n  }\n\n  const [fromDay, toDay] = dayOfTheWeekStr.split(\"-\");\n  if (!fromDay || !toDay) return false;\n\n  const fromDayIndex = DAYS_OF_THE_WEEK.indexOf(fromDay);\n  const toDayIndex = DAYS_OF_THE_WEEK.indexOf(toDay);\n  if (fromDayIndex === -1 || toDayIndex === -1) return false;\n\n  return fromDayIndex <= dayOfTheWeekNum && dayOfTheWeekNum <= toDayIndex;\n};\n\n// =============================================================================\n// Duration\n\nexport function msToDuration(ms) {\n  const d = {\n    h: 0,\n    m: 0,\n    s: Math.round(ms / 1000)\n  };\n  normalizeDuration(d);\n  return d;\n}\n\nexport function parseDuration(str) {\n  return parseDurationMatch(str.match(/\\b(\\d\\d?[hms])(\\d\\d?[ms])?(\\d\\d?s)?\\b/));\n}\n\nexport function parseDurationMatch(match) {\n  return match\n    .slice(1)\n    .filter(Boolean)\n    .reduce(\n      (result, item) => {\n        result[item[item.length - 1]] += parseInt(item, 10) * 1;\n        return result;\n      },\n      {\n        h: 0,\n        m: 0,\n        s: 0\n      }\n    );\n}\n\nexport function normalizeDuration(d) {\n  if (d.s >= 60) {\n    d.m += Math.floor(d.s / 60);\n    d.s = d.s % 60;\n  }\n\n  if (d.m >= 60) {\n    d.h += Math.floor(d.m / 60);\n    d.m = d.m % 60;\n  }\n}\n\nexport function durationToStr(d) {\n  return (\n    `${d.h ? d.h + \"h\" : \"\"}${d.m ? d.m + \"m\" : \"\"}${d.s ? d.s + \"s\" : \"\"}` ||\n    \"0s\"\n  );\n}\n\n// =============================================================================\n// Text\n\nexport function getTextContent(n) {\n  return n.textContent.split(\"\\u00a0\").join(\" \");\n}\n\nexport function toVisibleSpaces(text) {\n  return text.split(\" \").join(\"\\u00a0\");\n}\n\nexport function toRealSpaces(text) {\n  return text.split(\"\\u00a0\").join(\" \");\n}\n\n// =============================================================================\n// Todo\n\nexport function parseTodoNode(n) {\n  const date = n.querySelector(\".date\");\n  const duration = n.querySelector(\".duration\");\n\n  const clone = n.cloneNode(true);\n  Array.from(clone.children)\n    .filter(\n      c =>\n        c.classList.contains(\"ProseMirror-widget\") ||\n        // Clean extracted data\n        c.classList.contains(\"duration\") ||\n        c.classList.contains(\"date\") ||\n        c.classList.contains(\"img\") ||\n        c.classList.contains(\"img-text\")\n    )\n    .forEach(c => c.parentNode.removeChild(c));\n\n  return {\n    node: n,\n    done: clone.innerText[0] === \"+\",\n    text: toRealSpaces(clone.innerText.replace(/^(-|\\+)\\s/, \"\")),\n    date: date && toRealSpaces(date.innerText),\n    duration: duration && duration.innerText,\n\n    images: Array.from(n.querySelectorAll(\".img-text\")).map(item =>\n      item.innerText.replace(/(\\[|\\])/g, \"\").trim()\n    ),\n\n    toggle: () => n.querySelector(\"input[type=checkbox]\").click(),\n    toJSON() {\n      const result = { ...this };\n      delete result.node;\n      delete result.toggle;\n      delete result.toJSON;\n\n      return result;\n    }\n  };\n}\n","import React from \"react\";\nimport moment from \"moment\";\nimport { saveAs } from \"file-saver\";\nimport { count } from \"@wordpress/wordcount\";\nimport {\n  Statistic,\n  Header,\n  Icon,\n  Label,\n  Divider,\n  Button,\n  Grid\n} from \"semantic-ui-react\";\n\nimport { getStorage } from \"../Storage\";\nimport { formatDate, formatDateTime, getZeroBasedNum } from \"../util\";\n\nimport \"./Stats.css\";\n\nexport default function Stats({ todos, getTextContent }) {\n  const today = formatDate(new Date());\n  const notDone = todos.filter(item => !item.done);\n  const selected = getStorage().getSelectedNote();\n  const text = getTextContent();\n  const words = count(text, \"words\", {});\n  const readingTime = (d => `${\n    d.hours() ? d.hours() + \"h\" : \"\"\n  }${\" \"}${getZeroBasedNum(d.minutes())}m\n  `)(moment.duration(words / 200, \"minutes\"));\n\n  window.getTextContent = getTextContent;\n  const exportAsText = e => {\n    e.preventDefault();\n    const blob = new Blob([text], { type: \"text/plain;charset=utf-8\" });\n    saveAs(blob, `${selected.meta.title}.txt`);\n  };\n\n  return (\n    <div className=\"Editor--stats\">\n      <Header\n        as=\"h2\"\n        className=\"Stats--title\"\n        content={`Statistics`}\n        subheader={` for ${selected.meta.title}`}\n      />\n      <Grid columns=\"equal\" textAlign=\"center\">\n        <Grid.Column>\n          <Header as=\"h3\">\n            <Icon name=\"time\" />\n            <Header.Content>\n              Creation Date\n              <Header.Subheader>\n                {formatDateTime(selected.created_at)}\n              </Header.Subheader>\n            </Header.Content>\n          </Header>\n        </Grid.Column>\n        <Grid.Column>\n          <Header as=\"h3\">\n            <Icon name=\"time\" />\n            <Header.Content>\n              Modification Date\n              <Header.Subheader>\n                {formatDateTime(selected.updated_at)}\n              </Header.Subheader>\n            </Header.Content>\n          </Header>\n        </Grid.Column>\n      </Grid>\n      <Divider className=\"Stats--divider\" />\n      <Statistic.Group widths={3} className=\"Stats--group\">\n        <Statistic>\n          <Statistic.Value>{notDone.length}</Statistic.Value>\n          <Statistic.Label>items to do</Statistic.Label>\n        </Statistic>\n        <Statistic>\n          <Statistic.Value>\n            {\n              notDone.filter(item => item.date && item.date.includes(today))\n                .length\n            }\n          </Statistic.Value>\n          <Statistic.Label>items to do today</Statistic.Label>\n        </Statistic>\n        <Statistic className=\"Stats--stat\">\n          <Statistic.Value>{todos.length - notDone.length}</Statistic.Value>\n          <Statistic.Label>items done</Statistic.Label>\n        </Statistic>\n      </Statistic.Group>\n      <Statistic.Group widths={3}>\n        <Statistic className=\"Stats--stat\">\n          <Statistic.Value>{text.length}</Statistic.Value>\n          <Statistic.Label>Characters</Statistic.Label>\n        </Statistic>\n        <Statistic className=\"Stats--stat\">\n          <Statistic.Value>{words}</Statistic.Value>\n          <Statistic.Label>Words</Statistic.Label>\n        </Statistic>\n        <Statistic className=\"Stats--stat\" size=\"mini\">\n          <Statistic.Value>{readingTime}</Statistic.Value>\n          <Statistic.Label>Read Time</Statistic.Label>\n        </Statistic>\n      </Statistic.Group>\n      <Grid columns=\"equal\" textAlign=\"center\">\n        <Grid.Column>\n          <Divider horizontal className=\"Stats--divider\">\n            <Header as=\"h4\">\n              <Icon name=\"tags\" color=\"grey\" />\n              Tags\n            </Header>\n          </Divider>\n          {selected.meta.tags.map((tag, i) => (\n            <Label key={tag} as=\"a\" tag>\n              {tag}\n            </Label>\n          ))}\n        </Grid.Column>\n        <Grid.Column>\n          <Divider horizontal className=\"Stats--divider\">\n            <Header as=\"h4\">\n              <Icon name=\"download\" color=\"grey\" />\n              Download\n            </Header>\n          </Divider>\n          <Button.Group>\n            <Button onClick={exportAsText}>.TXT</Button>\n            <Button.Or />\n            <Button disabled>.PDF</Button>\n            <Button.Or />\n            <Button disabled>.HTML</Button>\n          </Button.Group>\n        </Grid.Column>\n      </Grid>\n    </div>\n  );\n}\n","import React, { useState } from \"react\";\nimport { Pagination, Segment, Button } from \"semantic-ui-react\";\n\nimport \"./Slides.css\";\n\nexport default function Slides({ editor }) {\n  const [page, setPage] = useState(0);\n  const content = editor.querySelector(\".ProseMirror\").cloneNode(true);\n\n  let currentSlide = [];\n  const slides = [currentSlide];\n  Array.from(content.children).forEach((node, i) => {\n    if (i === 0) {\n      currentSlide.push(node);\n      return;\n    }\n\n    if (node.classList.contains(\"heading\")) {\n      currentSlide = [node];\n      slides.push(currentSlide);\n      return;\n    }\n\n    currentSlide.push(node);\n  });\n\n  return (\n    <div className=\"Editor--slides\">\n      <Pagination\n        defaultActivePage={1}\n        totalPages={slides.length}\n        onPageChange={(_, { activePage }) => {\n          setPage(activePage - 1);\n        }}\n      />\n      <Segment>\n        <div\n          dangerouslySetInnerHTML={{\n            __html: slides[page].map(node => node.outerHTML).join(\"\")\n          }}\n        />\n      </Segment>\n\n      <Button\n        content=\"Download\"\n        positive\n        icon=\"down arrow\"\n        labelPosition=\"left\"\n        floated=\"right\"\n      />\n      <Button\n        content=\"Preview\"\n        icon=\"play\"\n        labelPosition=\"left\"\n        floated=\"right\"\n      />\n      <div style={{ clear: \"both\" }} />\n    </div>\n  );\n}\n","import { Howl } from \"howler\";\n\nconst click = new Howl({\n  volume: 0.3,\n  src: [\"/click.mp3\"]\n});\n\nconst alarm = new Howl({\n  volume: 0.9,\n  src: [\"/alarm.mp3\"]\n});\n\nexport default {\n  click: () => click.play(),\n  alarm: () => alarm.play()\n};\n","import moment from \"moment\";\nimport React, { useState } from \"react\";\nimport OriginalDatePicker from \"react-datepicker\";\nimport { Button } from \"semantic-ui-react\";\n\nimport \"react-datepicker/dist/react-datepicker.css\";\n\nconst style = {\n  display: \"inline-block\",\n  width: \"4rem\",\n  margin: \"2px\",\n  backgroundColor: \"#216ba5\",\n  borderRadius: \".3rem\",\n  color: \"#fff\",\n  width: \"56px\",\n  height: \"21px\",\n  cursor: \"pointer\",\n  position: \"relative\",\n  textAlign: \"center\"\n};\n\nexport function DatePicker({ selected, onSelect, ...props }) {\n  const [value, setValue] = useState(moment(selected));\n  const showTime = moment(selected, \"YYYY-MM-DD HH:mm\", true).isValid();\n\n  return (\n    <OriginalDatePicker\n      inline\n      selected={value.toDate()}\n      showTimeInput={showTime}\n      shouldCloseOnSelect={false}\n      todayButton=\"Select Today\"\n      onChange={date => {\n        setValue(moment(date));\n      }}\n      {...props}\n    >\n      <Button\n        positive\n        fluid\n        onClick={() => {\n          onSelect(value.format(showTime ? \"YYYY-MM-DD HH:mm\" : \"YYYY-MM-DD\"));\n        }}\n      >\n        Close\n      </Button>\n    </OriginalDatePicker>\n  );\n}\n","import React, { useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Modal, Image, Header, Button } from \"semantic-ui-react\";\n\nexport function ModalComponent({\n  title,\n  content,\n  actions = [],\n  onHide,\n  rawContent = false,\n  ...modalProps\n}) {\n  const handleClose = () => {\n    hidePopup();\n    if (onHide) onHide();\n  };\n\n  return (\n    <Modal onClose={handleClose} open closeIcon {...modalProps}>\n      {title && <Modal.Header>{title}</Modal.Header>}\n      {rawContent ? content : <Modal.Content>{content}</Modal.Content>}\n      {actions.length > 0 && (\n        <Modal.Actions>\n          {actions.map(({ text, fn, ...actionProps }, i) => (\n            <Button\n              key={i}\n              onClick={fn === \"hide\" ? handleClose : fn}\n              {...actionProps}\n            >\n              {text}\n            </Button>\n          ))}\n        </Modal.Actions>\n      )}\n    </Modal>\n  );\n}\n\nconst popup = document.createElement(\"div\");\nexport function hidePopup() {\n  if (popup.parentNode) popup.parentNode.removeChild(popup);\n  ReactDOM.unmountComponentAtNode(popup);\n  popup.innerHTML = \"\";\n}\n\nexport function showPopup(props) {\n  if (!popup.parentNode) document.body.appendChild(popup);\n  ReactDOM.render(<ModalComponent {...props} />, popup);\n}\n","import moment from \"moment\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  Modal,\n  Grid,\n  Icon,\n  Label,\n  Button,\n  Header,\n  Image,\n  Divider,\n  List,\n  Checkbox,\n  Popup\n} from \"semantic-ui-react\";\n\nimport Sound from \"../Sound\";\nimport {\n  msToDuration,\n  durationToStr,\n  getZeroBasedNum,\n  parseDuration\n} from \"../util\";\nimport { hidePopup } from \"./popup\";\n\nconst showDuration = d => (\n  <>\n    {d.hours() ? getZeroBasedNum(d.hours()) + \":\" : \"\"}\n    {getZeroBasedNum(d.minutes())}:{getZeroBasedNum(d.seconds())}\n  </>\n);\n\nexport class PopupTodo extends React.Component {\n  static propTypes = {\n    todos: PropTypes.arrayOf(\n      PropTypes.shape({\n        text: PropTypes.string.isRequired,\n        images: PropTypes.arrayOf(PropTypes.string).isRequired,\n        date: PropTypes.string,\n        duration: PropTypes.string\n      }).isRequired\n    ),\n    onFinish: PropTypes.func.isRequired\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      time: new Date(),\n      data: [],\n      current: -1,\n      finished: false,\n      automatic: false,\n\n      paused: false,\n      pausedAtDuration: 0\n    };\n  }\n\n  componentDidMount() {\n    this._timer = setInterval(this.forceUpdate.bind(this), 1000);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this._timer);\n  }\n\n  componentDidUpdate() {\n    const { todos } = this.props;\n    const { time, current, automatic, finished } = this.state;\n\n    if (finished) return;\n    if (!automatic) return;\n\n    const currentTime = new Date();\n    const currentItem = todos[current];\n    const itemDuration = this.getItemDuration(currentItem);\n    const currentDuration = moment.duration(currentTime - time);\n\n    if (itemDuration.asSeconds() < currentDuration.asSeconds()) {\n      Sound.alarm();\n      this.handleNextItem(true);\n    }\n  }\n\n  handleTogglePause = () => {\n    const { time, paused, pausedAtDuration } = this.state;\n    if (paused) {\n      this.componentDidMount();\n    } else {\n      this.componentWillUnmount();\n    }\n\n    this.setState({\n      paused: !paused,\n      ...(paused\n        ? {\n            time: new Date() - pausedAtDuration,\n            pausedAtDuration: 0\n          }\n        : {\n            pausedAtDuration: new Date() - time\n          })\n    });\n  };\n\n  handleStart = automatic => {\n    this.setState({\n      automatic,\n      current: 0,\n      time: new Date()\n    });\n  };\n\n  handleNextItem = done => {\n    const { todos } = this.props;\n    const { current, data, time } = this.state;\n\n    const nextItem = current + 1;\n    const nextTime = new Date();\n\n    this.setState({\n      time: nextTime,\n      data: [\n        ...data,\n        {\n          done,\n          time: nextTime - time\n        }\n      ],\n      current: nextItem,\n      finished: nextItem === todos.length\n    });\n  };\n\n  getItemDuration(item) {\n    if (!item || !item.duration) return null;\n\n    const d = parseDuration(item.duration);\n    return moment.duration({\n      seconds: d.s,\n      minutes: d.m,\n      hours: d.h\n    });\n  }\n\n  getCurrentItem() {\n    return this.props.todos[this.state.current];\n  }\n\n  // ===========================================================================\n  // Rendering\n\n  renderInitial() {\n    const { todos } = this.props;\n    const isNoDurationItem = todos.find(item => !item.duration);\n\n    return (\n      <Modal.Content>\n        <Grid textAlign=\"center\" columns={1}>\n          <Grid.Column>\n            By playing a Todo list you will go trough all the tasks in it. In{\" \"}\n            <u>Manual mode</u> you will manually switch tasks. In{\" \"}\n            <u>Automatic mode</u> a task will be marked as complete when its\n            duration is over and the next task will be stared.{\" \"}\n            <u>Automatic mode</u> is disabled unless all tasks have durations.\n          </Grid.Column>\n          <Grid.Column>\n            <Button.Group>\n              <Button negative onClick={() => this.handleStart(false)}>\n                Manual\n              </Button>\n              <Button.Or text=\"or\" />\n              <Button\n                positive\n                disabled={!!isNoDurationItem}\n                onClick={() => this.handleStart(true)}\n              >\n                Automatic\n              </Button>\n            </Button.Group>\n          </Grid.Column>\n        </Grid>\n      </Modal.Content>\n    );\n  }\n\n  renderFinal() {\n    const { data } = this.state;\n    const { todos, onFinish } = this.props;\n    const totalTime = moment.duration(\n      data.reduce((result, { time }) => result + time, 0)\n    );\n    return (\n      <>\n        <Modal.Header>\n          <Label color=\"black\" size=\"small\">\n            {data.filter(d => d.done).length} / {data.length}\n          </Label>{\" \"}\n          items done\n        </Modal.Header>\n        <Modal.Content>\n          <List verticalAlign=\"middle\">\n            {data.map(({ done, time }, i) => {\n              const todo = todos[i];\n              const duration = moment.duration(time);\n              const maxDuration = this.getItemDuration(todo);\n\n              return (\n                <List.Item key={i}>\n                  <List.Content floated=\"right\">\n                    {showDuration(duration)}\n                    {maxDuration && \"/\"}\n                    {maxDuration && showDuration(maxDuration)}\n                  </List.Content>\n                  <Checkbox\n                    label={{\n                      children: todo.text,\n                      className: \"TodoPopup--item-label\"\n                    }}\n                    defaultChecked={done}\n                    disabled\n                  />\n                </List.Item>\n              );\n            })}\n          </List>\n          <Divider />\n          Total time: {showDuration(totalTime)}\n        </Modal.Content>\n        <Modal.Actions className=\"TodoPopup--footer\">\n          <Popup\n            content=\"Todo items statuses will be updated and statistics data will be stored.\"\n            trigger={\n              <Button\n                positive\n                onClick={() => {\n                  onFinish(data);\n                }}\n              >\n                Close & Update\n              </Button>\n            }\n          />\n          <Button onClick={hidePopup}>Close</Button>\n        </Modal.Actions>\n      </>\n    );\n  }\n\n  render() {\n    const { todos, onFinish } = this.props;\n    const { current, data, time, finished, automatic, paused } = this.state;\n\n    const currentTime = new Date();\n    const currentItem = todos[current];\n    const itemDuration = this.getItemDuration(currentItem);\n    const currentDuration = moment.duration(currentTime - time);\n\n    if (finished) {\n      return this.renderFinal();\n    }\n\n    if (!currentItem) {\n      return this.renderInitial();\n    }\n\n    return (\n      <>\n        <Modal.Header>\n          <Label className=\"TodoPopup--item-count\" color=\"black\" size=\"small\">\n            {current + 1} / {todos.length}\n          </Label>\n          {currentItem.text}\n          <br />\n          <Label className=\"TodoPopup--item-date\" as=\"span\" size=\"small\">\n            <Icon name={\"calendar\"} />\n            {currentItem.date}\n          </Label>\n        </Modal.Header>\n        <Modal.Content>\n          {currentItem.images.length > 0 && (\n            <>\n              <div className=\"TodoPopup--images\">\n                {currentItem.images.map((url, i) => (\n                  <Image key={i} wrapped size=\"medium\" src={url} />\n                ))}\n              </div>\n              <Divider />\n            </>\n          )}\n          <Grid textAlign=\"center\" columns={1}>\n            <Grid.Column>\n              <Label circular as=\"span\" size=\"massive\" color=\"olive\">\n                <Icon name={\"stopwatch\"} />\n                {showDuration(currentDuration)}\n                {itemDuration && \"/\"}\n                {itemDuration && showDuration(itemDuration)}\n              </Label>\n            </Grid.Column>\n          </Grid>\n        </Modal.Content>\n        <Modal.Actions className=\"TodoPopup--footer\">\n          {automatic && (\n            <Button onClick={this.handleTogglePause}>\n              {paused ? \"Resume\" : \"Pause\"}\n            </Button>\n          )}\n          <Button onClick={() => this.handleNextItem(false)}>Skip</Button>\n          <Button positive onClick={() => this.handleNextItem(true)}>\n            Done\n          </Button>\n        </Modal.Actions>\n      </>\n    );\n  }\n}\n","import moment from \"moment\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {\n  List,\n  Image,\n  Button,\n  Dropdown,\n  Label,\n  Icon,\n  Grid\n} from \"semantic-ui-react\";\n\nimport { showPopup, hidePopup } from \"./popup\";\nimport { PopupTodo } from \"./PopupTodo\";\nimport { parseTodoNode, toVisibleSpaces } from \"../util\";\n\nconst Menu = ({ handleClick }) => (\n  <>\n    <button className=\"trigger\">...</button>\n    <div className=\"options\">\n      <List selection verticalAlign=\"middle\">\n        <List.Item onClick={handleClick} value=\"play\">\n          <List.Content floated=\"right\">CTRL+Enter</List.Content>\n          <Icon name=\"video play\" color=\"olive\" />\n          <List.Content>\n            <List.Header>Play</List.Header>\n          </List.Content>\n        </List.Item>\n        <List.Item onClick={handleClick} value=\"reset\">\n          <List.Content floated=\"right\">CTRL+R</List.Content>\n          <Icon name=\"retweet\" color=\"olive\" />\n          <List.Content>\n            <List.Header>Reset</List.Header>\n          </List.Content>\n        </List.Item>\n        <List.Item onClick={handleClick} value=\"delete_completed\">\n          <List.Content floated=\"right\">CTRL+Shift-R</List.Content>\n          <Icon name=\"delete\" color=\"olive\" />\n          <List.Content>\n            <List.Header>Delete Completed</List.Header>\n          </List.Content>\n        </List.Item>\n        <List.Item onClick={handleClick} value=\"delete_unfinished\">\n          <List.Content floated=\"right\"></List.Content>\n          <Icon name=\"delete\" color=\"olive\" />\n          <List.Content>\n            <List.Header>\n              Delete\n              <br />\n              Unfinished\n            </List.Header>\n          </List.Content>\n        </List.Item>\n        <List.Item onClick={handleClick} value=\"mark_today\">\n          <List.Content floated=\"right\"></List.Content>\n          <Icon name=\"calendar alternate outline\" color=\"olive\" />\n          <List.Content>\n            <List.Header>\n              Mark all\n              <br /> for Today\n            </List.Header>\n          </List.Content>\n        </List.Item>\n      </List>\n    </div>\n  </>\n);\n\nexport const WidgetTodo = view => {\n  const dom = document.createElement(\"div\");\n  dom.classList.add(\"indicator\");\n  dom.classList.add(\"todo-indicator\");\n\n  const handleClick = (e, { value: action }) => {\n    e.preventDefault();\n    const node = e.target;\n\n    const fullTodoList = [dom.parentNode];\n\n    let next;\n    while (\n      (next = fullTodoList[fullTodoList.length - 1]) &&\n      (next = next.nextElementSibling) &&\n      !!next.querySelector(\".todo\")\n    ) {\n      fullTodoList.push(next);\n    }\n\n    switch (action) {\n      case \"play\": {\n        const parsedNodes = fullTodoList\n          .map(n => parseTodoNode(n))\n          .filter(n => !n.done);\n\n        const onFinish = data => {\n          data.forEach(({ done, time }, i) => {\n            const node = parsedNodes[i];\n\n            if (done && !node.done) {\n              node.toggle();\n            }\n\n            hidePopup();\n          });\n        };\n        showPopup({\n          size: \"mini\",\n          rawContent: true,\n          content: <PopupTodo todos={parsedNodes} onFinish={onFinish} />\n        });\n\n        return;\n      }\n\n      case \"reset\": {\n        fullTodoList\n          .map(n => parseTodoNode(n))\n          .forEach(n => n.done && n.toggle());\n        return;\n      }\n      case \"delete_unfinished\":\n      case \"delete_completed\": {\n        fullTodoList\n          .map(n => parseTodoNode(n))\n          .filter(n => (action === \"delete_unfinished\" ? !n.done : n.done))\n          .reverse() // If we don't delete in reverse, prosemirror removes nodes\n          .forEach(n => {\n            const { node } = n;\n            if (!node.parentNode) return;\n\n            const pos = view.posAtDOM(node);\n            const pN = view.state.doc.nodeAt(pos);\n            const tr = view.state.tr.deleteRange(pos - 2, pos + pN.nodeSize);\n            view.dispatch(tr);\n          });\n        return;\n      }\n\n      case \"mark_today\": {\n        fullTodoList\n          .map(n => n.querySelector(\".date\"))\n          .filter(Boolean)\n          .forEach(n => n.parentNode.removeChild(n));\n        fullTodoList.forEach(n => {\n          const date = toVisibleSpaces(\" \") + moment().format(\"YYYY-MM-DD\");\n          const dateNode = document.createTextNode(date);\n          n.appendChild(dateNode);\n        });\n        return;\n      }\n      default:\n        return;\n    }\n  };\n\n  ReactDOM.render(<Menu {...{ handleClick }} />, dom);\n\n  return dom;\n};\n","import moment from \"moment\";\nimport ReactDOM from \"react-dom\";\nimport React, { useState, useEffect } from \"react\";\nimport { Label, Icon, Grid, List } from \"semantic-ui-react\";\n\nimport Sound from \"../Sound\";\nimport { showPopup } from \"./popup\";\nimport {\n  getZeroBasedNum,\n  durationToStr,\n  normalizeDuration,\n  parseDurationMatch\n} from \"../util\";\n\nconst TimeTracker = ({ duration: initial, currentTimeRef }) => {\n  const [duration, setDuration] = useState(\n    moment.duration({\n      seconds: initial.s,\n      minutes: initial.m,\n      hours: initial.h\n    })\n  );\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      currentTimeRef.value = duration.clone().add(moment.duration(1, \"s\"));\n      setDuration(currentTimeRef.value);\n    }, 1000);\n    return () => {\n      clearTimeout(timer);\n    };\n  });\n\n  return (\n    <Grid textAlign=\"center\" columns={1}>\n      <Grid.Column>\n        <Label circular as=\"span\" size=\"massive\" color=\"olive\">\n          <Icon name=\"stopwatch\" />\n          {duration.hours() ? getZeroBasedNum(duration.hours()) : \"\"}\n          {getZeroBasedNum(duration.minutes())}:\n          {getZeroBasedNum(duration.seconds())}\n        </Label>\n      </Grid.Column>\n    </Grid>\n  );\n};\n\nconst Timer = ({ duration: initial }) => {\n  const [duration, setDuration] = useState(\n    moment.duration({\n      seconds: initial.s,\n      minutes: initial.m,\n      hours: initial.h\n    })\n  );\n\n  useEffect(() => {\n    if (duration.asSeconds() === 0) {\n      Sound.alarm();\n      Sound.alarm();\n      return () => {};\n    }\n\n    const timer = setTimeout(() => {\n      setDuration(duration.clone().subtract(moment.duration(1, \"s\")));\n    }, 1000);\n    return () => {\n      clearTimeout(timer);\n    };\n  });\n\n  return (\n    <Grid textAlign=\"center\" columns={1}>\n      <Grid.Column>\n        <Label circular as=\"span\" size=\"massive\" color=\"olive\">\n          <Icon name={duration.asSeconds() === 0 ? \"check\" : \"stopwatch\"} />\n          {duration.hours() ? getZeroBasedNum(duration.hours()) : \"\"}\n          {getZeroBasedNum(duration.minutes())}:\n          {getZeroBasedNum(duration.seconds())}\n        </Label>\n      </Grid.Column>\n    </Grid>\n  );\n};\n\nexport const WidgetDuration = ({ match, view, pos, text: prevText }) => {\n  const handleContinue = () => {\n    const currentTimeRef = { value: null };\n    showPopup({\n      size: \"mini\",\n      content: <TimeTracker duration={match} currentTimeRef={currentTimeRef} />,\n      actions: [\n        {\n          text: \"Stop\",\n          fn: \"hide\"\n        }\n      ],\n      onHide: () => {\n        if (currentTimeRef.value) {\n          const d = {\n            h: currentTimeRef.value.hours(),\n            m: currentTimeRef.value.minutes(),\n            s: currentTimeRef.value.seconds()\n          };\n          view.dispatch(\n            view.state.tr.insertText(\n              durationToStr(d),\n              pos + 1,\n              pos + prevText.length + 1\n            )\n          );\n        }\n      }\n    });\n  };\n\n  const handleCountdown = () => {\n    showPopup({\n      size: \"mini\",\n      content: <Timer duration={match} />,\n      actions: [\n        {\n          text: \"Close\",\n          fn: \"hide\"\n        }\n      ]\n    });\n  };\n  const handleDouble = () => {\n    const m = { ...match };\n\n    Object.keys(m).forEach(k => {\n      m[k] = m[k] * 2;\n    });\n\n    normalizeDuration(m);\n\n    const text = durationToStr(m);\n    view.dispatch(\n      view.state.tr.insertText(text, pos + 1, pos + prevText.length + 1)\n    );\n  };\n\n  return (\n    <div className=\"options\">\n      <List selection verticalAlign=\"middle\">\n        <List.Item onClick={handleCountdown}>\n          <List.Content floated=\"right\">CTRL + Enter</List.Content>\n          <Icon name=\"stopwatch\" color=\"olive\" />\n          <List.Content>\n            <List.Header id=\"duration--countdown\">Countdown</List.Header>\n          </List.Content>\n        </List.Item>\n\n        <List.Item onClick={handleContinue}>\n          <List.Content floated=\"right\">CTRL + Shift + Enter</List.Content>\n          <Icon name=\"clock\" color=\"olive\" />\n          <List.Content>\n            <List.Header id=\"duration--continue\">Continue</List.Header>\n          </List.Content>\n        </List.Item>\n\n        <List.Item onClick={handleDouble}>\n          <List.Content floated=\"right\">CTRL + Shift + 8</List.Content>\n          <Icon name=\"angle double up\" color=\"olive\" />\n          <List.Content>\n            <List.Header id=\"duration--double\">Double</List.Header>\n          </List.Content>\n        </List.Item>\n      </List>\n    </div>\n  );\n};\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport hljs from \"highlight.js\";\nimport classNames from \"classnames\";\nimport { Plugin } from \"prosemirror-state\";\nimport { Decoration, DecorationSet } from \"prosemirror-view\";\nimport { createPopper } from \"@popperjs/core\";\n\nimport Sound from \"../Sound\";\nimport { DatePicker } from \"../DatePicker/DatePicker\";\nimport { WidgetTodo } from \"./WidgetTodo\";\nimport { WidgetDuration } from \"./WidgetDuration\";\nimport { hidePopup, showPopup } from \"./popup\";\nimport {\n  formatDate,\n  parseDuration,\n  getTextContent,\n  toVisibleSpaces\n} from \"../util\";\n\nimport \"highlight.js/styles/arta.css\";\n\n/**\n * Decorations that require the same open and close strings\n * and capture all the lines in between.\n *\n * NOTE: These work on the wrapper node, not on the text node.\n */\nexport const OpenCloseDecorations = {\n  code: /^```/gi,\n  folded: /^\\.\\.\\.$/gi\n};\n\nexport const WholeNodeDecorations = {\n  // NOTE: Table row is also handled repeatably.\n  tableRow: /^\\|(?:\\s|-|=).*$/gi,\n  _heading: /^(#{1,5})\\s.*$/gi // Underscored names are skipped.\n};\n\nexport const RepeatableDecorations = {\n  quote: /^>(?=\\s)/gi,\n  bullet: /^\\s*\\*(?=\\s)/gi,\n  ordered: /^\\s*(\\d+)\\.(?=\\s)/gi,\n  _todo: /^(-|\\+)(?=\\s)/gi\n};\n\nfunction genInlineDecorationRegex(char) {\n  return new RegExp(\n    `(?<=\\\\s|^)\\\\${char}(?!\\\\s)[^\\\\${char}]+(?<!\\\\s)\\\\${char}`,\n    \"gi\"\n  );\n}\n/**\n * These work on the text node.\n */\nexport const Decorations = {\n  hr: /^---$/gi,\n  tag: /(?<=\\s|^)#[^\\b\\s#\\-_`]+/gi,\n\n  bold: genInlineDecorationRegex(\"*\"),\n  italic: genInlineDecorationRegex(\"/\"),\n  highlight: genInlineDecorationRegex(\"`\"),\n  underline: genInlineDecorationRegex(\"_\"),\n  striketrough: genInlineDecorationRegex(\"~\"),\n\n  toggleFolded: /^\\.\\.\\.\\.$/gi,\n\n  // Alternative date without widget.\n  date: new RegExp(\n    \"(\" +\n      //\n      \"everyday\" +\n      \"|mon\" +\n      \"|tue\" +\n      \"|wed\" +\n      \"|thu\" +\n      \"|fri\" +\n      \"|sat\" +\n      \"|sun\" +\n      \"|mon-tue\" +\n      \"|mon-wed\" +\n      \"|mon-thu\" +\n      \"|mon-fri\" +\n      \"|mon-sat\" +\n      \"|mon-sun\" +\n      \"|tue-wed\" +\n      \"|tue-thu\" +\n      \"|tue-fri\" +\n      \"|tue-sat\" +\n      \"|tue-sun\" +\n      \"|wed-thu\" +\n      \"|wed-fri\" +\n      \"|wed-sat\" +\n      \"|wed-sun\" +\n      \"|thu-fri\" +\n      \"|thu-sat\" +\n      \"|thu-sun\" +\n      \"|fri-sat\" +\n      \"|fri-sun\" +\n      \"|sat-sun\" +\n      \")\" +\n      \"(:?\\\\s(\\\\d\\\\d):(\\\\d\\\\d))?(?=\\\\s|$)\",\n    \"gi\"\n  ),\n\n  // NOTE: If name starts with `_`, standard decoration won't be\n  // created. This can be used if we some special handling in\n  // with DecorationsWidgets function.\n  _url: /(?<=[^\\S]|^)(((https?:\\/\\/)|(www\\.))(\\S+))/gi,\n  _img: /(?<=\\s|^)\\[(https:\\/\\/[^\\]]+)\\](?=\\s|$)/gi,\n  _link: /\\[([\\w\\s\\d]+)\\]\\((https?:\\/\\/[\\w\\d./?=#]+)\\)/gi,\n  _date: /\\s(\\d\\d\\d\\d)-(\\d\\d)-(\\d\\d)(:?\\s(\\d\\d):(\\d\\d))?(?=\\s|$)/gi,\n  _duration: /\\s(\\d\\d?[hms])(\\d\\d?[ms])?(\\d\\d?s)?(?=\\s|$)/gi,\n  _checkbox: /(?<=\\s|^)\\[(\\+|-)\\](?=\\s)/gi,\n\n  _counter: /(?<=\\s|^)\\[(\\d+)\\](?=\\s|$)/gi,\n  _proportion: /(?<=\\s|^)\\[(\\d+)\\/(\\d+)\\](?=\\s|$)/gi,\n\n  ...RepeatableDecorations\n};\n\n/**\n * Some decorations require additional widgets.\n */\nexport const DecorationsWidgets = {\n  _todo: getTodoWidgets,\n  _duration: getDurationWidgets,\n  _date: getDateWidgets,\n  _url: getUrlWidgets,\n  _link: getLinkWidgets,\n  _img: getImgWidgets,\n  _checkbox: getCheckboxWidgets,\n  _counter: getCounterWidgets,\n  _proportion: getCounterWidgets,\n  _heading: getHeadingWidgets\n};\n\n/**\n * Decorations won't be visible inside specified nodes.\n */\nconst excludedNodes = {};\n\n/**\n * We don't want some of the decorations inside a table.\n */\nconst excludedInTable = {\n  date: true,\n  duration: true,\n\n  _counter: true,\n  _proportion: true\n};\n\n/**\n * Handlers are delegated (live) events on click.\n *\n * className -> handler(e, element, view)\n */\nexport const decorationsHandlers = {};\n\nfunction getDecorations(doc) {\n  let decos = [];\n  let openClose = {};\n\n  doc.descendants((node, pos) => {\n    if (excludedNodes[doc.resolve(pos).node().type.name]) return;\n\n    if (node.isText) {\n      const isTableRow = !!node.text.match(WholeNodeDecorations[\"tableRow\"]);\n      Object.keys(Decorations).forEach(name => {\n        const regex = Decorations[name];\n        while (true) {\n          let m = regex.exec(node.text);\n          if (!m) return;\n\n          if (excludedInTable[name] && isTableRow) {\n            return;\n          }\n\n          if (name[0] !== \"_\") {\n            decos.push(\n              Decoration.inline(pos + m.index, pos + m.index + m[0].length, {\n                class: name\n              })\n            );\n          }\n\n          if (DecorationsWidgets[name]) {\n            decos.push(...DecorationsWidgets[name](m, pos, doc, node));\n          }\n        }\n      });\n\n      return;\n    }\n\n    Object.keys(WholeNodeDecorations).forEach(name => {\n      const regex = WholeNodeDecorations[name];\n      while (true) {\n        let m = regex.exec(getTextContent(node));\n        if (!m) return;\n\n        if (name[0] !== \"_\") {\n          decos.push(\n            Decoration.node(pos + m.index, pos + m.index + node.nodeSize, {\n              class: name\n            })\n          );\n        }\n\n        if (DecorationsWidgets[name]) {\n          decos.push(...DecorationsWidgets[name](m, pos, doc, node));\n        }\n      }\n    });\n\n    // NOTE: Every header resets `openClose` pairs.\n    if (/^(#{1,5})\\s.*$/gi.test(getTextContent(node))) {\n      openClose = {};\n    }\n    Object.keys(OpenCloseDecorations).forEach(name => {\n      const regex = OpenCloseDecorations[name];\n      while (true) {\n        const textContent = getTextContent(node);\n        let m = regex.exec(textContent);\n        if (!m) return;\n\n        if (!openClose[name]) {\n          openClose[name] = { node, pos };\n          continue;\n        }\n\n        if (openClose[name]) {\n          const closing = { node, pos };\n          const opening = openClose[name];\n\n          const textContent = [];\n          doc.nodesBetween(opening.pos, closing.pos + 1, (n, p) => {\n            if (n.isText) return;\n            textContent.push(getTextContent(n));\n\n            decos.push(\n              Decoration.node(p, p + n.nodeSize, {\n                class: classNames(\n                  name,\n                  p === opening.pos && `${name}-opening`,\n                  p === closing.pos && `${name}-closing`\n                )\n              })\n            );\n          });\n\n          delete openClose[name];\n\n          if (name === \"code\") {\n            decos.push(\n              Decoration.widget(\n                opening.pos + 1,\n                (view, getPos) => {\n                  const dom = document.createElement(\"pre\");\n                  const lang = textContent[0].replace(\"```\", \"\");\n                  const source = hljs.getLanguage(lang)\n                    ? hljs.highlight(lang, textContent.slice(1, -1).join(\"\\n\"))\n                        .value\n                    : textContent.slice(1, -1).join(\"\\n\");\n                  dom.innerHTML = `${textContent[0]}\\n${source}\\n${\n                    textContent[textContent.length - 1]\n                  }`;\n\n                  dom.classList.add(\"code-highlight\");\n\n                  return dom;\n                },\n                {\n                  key: textContent.join(\"\\n\")\n                }\n              )\n            );\n          }\n          continue;\n        }\n      }\n    });\n  });\n\n  return DecorationSet.create(doc, decos);\n}\n\n// =============================================================================\n// Widgets\n\nfunction getUrlWidgets(m, pos, _, node) {\n  return [\n    Decoration.inline(pos + m.index, pos + m.index + m[0].length, {\n      class: \"url\",\n      nodeName: \"a\",\n      href: node.text,\n      title: node.text\n    })\n  ];\n}\n\nfunction getLinkWidgets(m, pos, _, node) {\n  return [\n    Decoration.inline(pos + m.index, pos + m.index + 1, {\n      class: \"link--bracket\"\n    }),\n    Decoration.inline(pos + m.index + 1, pos + m.index + 1 + m[1].length, {\n      class: \"url\",\n      nodeName: \"a\",\n      href: m[2]\n    }),\n    Decoration.inline(\n      pos + m.index + 1 + m[1].length,\n      pos + m.index + 1 + m[1].length + 2,\n      {\n        class: \"link--bracket\"\n      }\n    ),\n    Decoration.inline(\n      pos + m.index + 1 + m[1].length + 2,\n      pos + m.index + 1 + m[1].length + 2 + m[2].length,\n      {\n        class: \"link--symbol\",\n        nodeName: \"input\",\n        type: \"button\",\n        value: \"🔗\"\n      }\n    ),\n    Decoration.inline(\n      pos + m.index + 1 + m[1].length + 2 + m[2].length,\n      pos + m.index + 1 + m[1].length + 2 + m[2].length + 1,\n      {\n        class: \"link--bracket\"\n      }\n    )\n  ];\n}\n\ndecorationsHandlers[\"folded-opening\"] = (e, elm, view) => {\n  elm.textContent = \"....\";\n};\n\ndecorationsHandlers[\"toggleFolded\"] = (e, elm, view) => {\n  elm.textContent = \"...\";\n};\n\ndecorationsHandlers[\"todo\"] = (e, elm, view) => {\n  const pos = elm.dataset[\"pos\"] * 1;\n  Sound.click();\n  view.dispatch(\n    view.state.tr.insertText(elm.checked ? \"+\" : \"-\", pos, pos + 1)\n  );\n};\nfunction getTodoWidgets(m, pos, doc) {\n  const decos = [\n    Decoration.inline(pos + m.index, pos + m.index + m[0].length, {\n      class: \"todo\",\n      nodeName: \"input\",\n      type: \"checkbox\",\n      \"data-pos\": pos + m.index,\n      ...(m[0] === \"+\" ? { checked: true } : {})\n    })\n  ];\n  const currentNode = doc.resolve(pos).node();\n  const nodeBefore = doc.resolve(pos - 1).nodeBefore;\n  const nodeAfter =\n    doc.content.size <= pos + currentNode.nodeSize\n      ? null\n      : doc.resolve(pos + currentNode.nodeSize).node();\n\n  // NOTE: Todo widget should be applied right next to the first Todo\n  // item in the group.\n  const todoRegEx = /(\\+|-)\\s/;\n  if (\n    (!nodeBefore || !todoRegEx.test(getTextContent(nodeBefore).slice(0, 2))) &&\n    nodeAfter &&\n    todoRegEx.test(getTextContent(nodeAfter).slice(0, 2))\n  ) {\n    decos.push(\n      Decoration.widget(pos + m.index, view => WidgetTodo(view), {\n        key: getTextContent(currentNode)\n      })\n    );\n  }\n\n  return decos;\n}\n\ndecorationsHandlers[\"duration--button\"] = (e, elm, view) => {\n  e.preventDefault();\n\n  const pos = elm.dataset[\"pos\"] * 1;\n  const text = getTextContent(elm.nextElementSibling);\n  const match = parseDuration(text);\n\n  const overlay = document.createElement(\"div\");\n  overlay.classList.add(\"duration---overlay\");\n\n  const menu = document.createElement(\"div\");\n  menu.classList.add(\"duration--menu\");\n  ReactDOM.render(<WidgetDuration {...{ view, pos, match, text }} />, menu);\n\n  overlay.addEventListener(\"click\", e => {\n    if (overlay.parentNode) {\n      overlay.parentNode.removeChild(overlay);\n    }\n  });\n\n  overlay.appendChild(menu);\n  document.body.appendChild(overlay);\n\n  createPopper(elm, menu, { placement: \"bottom-start\" });\n};\n\nfunction getDurationWidgets(m, pos) {\n  return [\n    Decoration.inline(pos + m.index, pos + m.index + 1, {\n      class: \"duration--button\",\n      nodeName: \"input\",\n      type: \"button\",\n      value: \"▼\",\n      \"data-pos\": pos + m.index\n    }),\n\n    Decoration.inline(pos + m.index + 1, pos + m.index + m[0].length, {\n      class: \"duration\"\n    })\n  ];\n}\n\ndecorationsHandlers[\"date--button\"] = (e, elm, view) => {\n  e.preventDefault();\n\n  const startPos = elm.dataset[\"startpos\"] * 1;\n  const endPos = elm.dataset[\"endpos\"] * 1;\n  const selected = getTextContent(elm.nextElementSibling);\n\n  showPopup({\n    size: \"mini\",\n    basic: true,\n    closeIcon: false,\n    content: (\n      <DatePicker\n        selected={selected}\n        onSelect={date => {\n          view.dispatch(view.state.tr.insertText(\" \" + date, startPos, endPos));\n          hidePopup();\n        }}\n      />\n    )\n  });\n};\n\nfunction getDateWidgets(m, pos) {\n  return [\n    Decoration.inline(pos + m.index, pos + m.index + 1, {\n      class: \"date--button\",\n      nodeName: \"input\",\n      type: \"button\",\n      value: \"▼\",\n      \"data-startpos\": pos + m.index,\n      \"data-endpos\": pos + m.index + m[0].length\n    }),\n    Decoration.inline(pos + m.index + 1, pos + m.index + m[0].length, {\n      class: \"date\"\n    })\n  ];\n}\n\ndecorationsHandlers[\"checkbox\"] = (e, elm, view) => {\n  const pos = elm.dataset.pos * 1;\n  Sound.click();\n  view.dispatch(\n    view.state.tr.insertText(elm.checked ? \"+\" : \"-\", pos + 1, pos + 2)\n  );\n};\n\nfunction getCheckboxWidgets(m, pos) {\n  return [\n    Decoration.inline(pos + m.index, pos + m.index + m[0].length, {\n      class: \"checkbox\",\n      nodeName: \"input\",\n      type: \"checkbox\",\n      \"data-pos\": pos + m.index,\n      ...(m[1] === \"+\" ? { checked: true } : {})\n    })\n  ];\n}\n\ndecorationsHandlers[\"counter--left\"] = (e, elm, view) => {\n  Sound.click();\n  const pos = elm.dataset.pos * 1;\n  const m = getTextContent(elm.nextElementSibling).split(\"/\");\n\n  view.dispatch(\n    view.state.tr.insertText(\n      `[${Math.max(m[0] * 1 - 1, 0)}${m[1] ? `/${m[1]}` : \"\"}]`,\n      pos,\n      pos + m.join(\"/\").length + 2\n    )\n  );\n};\n\ndecorationsHandlers[\"counter--right\"] = (e, elm, view) => {\n  Sound.click();\n  const pos = elm.dataset.pos * 1;\n  const m = getTextContent(elm.previousElementSibling).split(\"/\");\n\n  view.dispatch(\n    view.state.tr.insertText(\n      `[${Math.min(m[0] * 1 + 1, m[1] ? m[1] : Infinity)}${\n        m[1] ? `/${m[1]}` : \"\"\n      }]`,\n      pos,\n      pos + m.join(\"/\").length + 2\n    )\n  );\n};\n\nfunction getCounterWidgets(m, pos) {\n  return [\n    Decoration.inline(pos + m.index, pos + m.index + 1, {\n      class: \"counter--button counter--left\",\n      nodeName: \"input\",\n      type: \"button\",\n      value: \"◀\",\n      \"data-pos\": pos + m.index\n    }),\n    Decoration.inline(pos + m.index + 1, pos + m.index + m[0].length - 1, {\n      class: \"counter\"\n    }),\n    Decoration.inline(\n      pos + m.index + m[0].length - 1,\n      pos + m.index + m[0].length,\n      {\n        class: \"counter--button counter--right\",\n        nodeName: \"input\",\n        type: \"button\",\n        value: \"►\",\n        \"data-pos\": pos + m.index\n      }\n    )\n  ];\n}\n\ndecorationsHandlers[\"heading--button\"] = (e, elm, view) => {\n  Sound.click();\n  const pos = elm.dataset.pos * 1;\n  const text = getTextContent(elm.parentNode);\n  const level = text.match(/^#+/)[0];\n\n  view.dispatch(\n    view.state.tr.insertText(\n      level.length === 5 ? `#` : `#${level}`,\n      pos,\n      pos + level.length + 1\n    )\n  );\n};\n\nfunction getHeadingWidgets(m, pos, _, node) {\n  return [\n    Decoration.node(pos + m.index, pos + m.index + node.nodeSize, {\n      class: `heading heading-${m[1].length}`\n    }),\n    Decoration.inline(pos + m.index + 1, pos + m.index + 1 + m[1].length, {\n      class: \"heading--button\",\n      type: \"button\",\n      nodeName: \"input\",\n      value: `H${m[1].length}`,\n      \"data-pos\": pos\n    })\n  ];\n}\n\nfunction getImgWidgets(m, pos) {\n  return [\n    Decoration.inline(pos + m.index, pos + m.index + m[0].length, {\n      class: \"img\",\n      nodeName: \"img\",\n      src: m[1]\n    })\n  ];\n}\n\n// =============================================================================\n// Plugin\n\nexport default new Plugin({\n  state: {\n    init(_, { doc }) {\n      return getDecorations(doc);\n    },\n    apply(tr, decorationsSet) {\n      return tr.docChanged ? getDecorations(tr.doc) : decorationsSet;\n    }\n  },\n  props: {\n    decorations(state) {\n      return this.getState(state);\n    }\n  }\n});\n","import React, { useState } from \"react\";\nimport moment from \"moment\";\nimport classNames from \"classnames\";\n\nimport {\n  List,\n  Label,\n  Grid,\n  Menu,\n  Icon,\n  Checkbox,\n  Header,\n  Message\n} from \"semantic-ui-react\";\n\nimport {\n  parseDuration,\n  normalizeDuration,\n  getZeroBasedNum,\n  matchRecurringDay\n} from \"../util\";\n\nimport { Decorations } from \"../Editor/decorations\";\n\nimport \"./Agenda.css\";\n\nconst matchDate = d => {\n  Decorations._date.lastIndex = 0;\n  const match = Decorations._date.exec(\" \" + d);\n  Decorations._date.lastIndex = 0;\n  return match;\n};\n\nconst matchRecurringDate = d => {\n  Decorations.date.lastIndex = 0;\n  const match = Decorations.date.exec(d);\n  Decorations.date.lastIndex = 0;\n  return match;\n};\n\nfunction processTodos(todos, today = moment().startOf(\"day\")) {\n  const forToday = todos\n    .filter(item => {\n      if (!item.date) return false;\n\n      const recurring = matchRecurringDate(item.date);\n      if (recurring) {\n        const dayNum = today.day();\n        const dayStr = recurring[1];\n\n        return matchRecurringDay(dayNum, dayStr);\n      }\n\n      return moment(item.date).isSame(today, \"day\");\n    })\n    .map(item => {\n      const result = { ...item };\n      let hours, minutes;\n\n      const recurring = matchRecurringDate(item.date);\n      if (recurring) {\n        [hours, minutes] = recurring.slice(3);\n      } else {\n        [hours, minutes] = matchDate(item.date).slice(5);\n      }\n\n      // Date has no hours and minutes.\n      if (hours === undefined) return result;\n\n      result.hours = hours;\n      result.minutes = minutes;\n      result.fromTime = moment.duration({\n        minutes,\n        hours\n      });\n\n      if (result.duration) {\n        const d = parseDuration(result.duration);\n\n        d.h += hours * 1;\n        d.m += minutes * 1;\n        normalizeDuration(d);\n\n        result.toTime = moment.duration({\n          minutes: d.m,\n          hours: d.h\n        });\n      }\n\n      return result;\n    });\n\n  if (forToday.length === 0) {\n    return null;\n  }\n\n  const noHour = forToday.filter(item => {\n    return !item.fromTime;\n  });\n\n  const withHour = forToday\n    .filter(item => !!item.fromTime)\n    .sort((a, b) => {\n      const { hours: hoursA, minutes: minutesA } = a;\n      const { hours: hoursB, minutes: minutesB } = b;\n      return hoursA * 60 + minutesA * 1 - (hoursB * 60 + minutesB * 1);\n    });\n\n  return { withHour, noHour };\n}\n\nfunction durationToStr(d) {\n  return `${getZeroBasedNum(d.hours())}:${getZeroBasedNum(d.minutes())}`;\n}\n\nconst SMALL_PADDING = \"---------------------\";\nconst BIG_PADDING =\n  \"------------------------ --------- ---------- --------------- ------------ -------- ----- ----\";\n\nexport default function Agenda({ todos, rerender }) {\n  const [date, setDate] = useState(moment().startOf(\"day\"));\n  const groups = processTodos(todos, date);\n\n  const menu = (\n    <Menu fluid widths={3}>\n      <Menu.Item\n        as=\"a\"\n        icon\n        onClick={() => setDate(date.clone().add(1, \"day\"))}\n      >\n        <Icon name=\"chevron left\" />\n      </Menu.Item>\n\n      <Menu.Item as=\"a\" icon disabled>\n        {date.format(\"dddd, MMMM Do YYYY\")}\n      </Menu.Item>\n\n      <Menu.Item\n        as=\"a\"\n        icon\n        onClick={() => setDate(date.clone().subtract(1, \"day\"))}\n      >\n        <Icon name=\"chevron right\" />\n      </Menu.Item>\n    </Menu>\n  );\n\n  if (!groups) {\n    return (\n      <div className=\"Editor--agenda\">\n        {menu}\n        <Header\n          as=\"h2\"\n          content={`Agenda`}\n          subheader={` for ${moment().format(\"dddd, MMMM Do YYYY\")}`}\n        />\n        <Message info>No items for today.</Message>\n      </div>\n    );\n  }\n\n  const { withHour, noHour } = groups;\n  let prevTime = moment.duration({ hours: 0, minutes: 0 });\n\n  return (\n    <div className=\"Editor--agenda\">\n      {menu}\n      <Grid columns={2} relaxed=\"very\">\n        <Grid.Column>\n          <Header\n            as=\"h2\"\n            content={`Agenda`}\n            subheader={` for ${date.format(\"dddd, MMMM Do YYYY\")}`}\n          />\n\n          <List divided selection>\n            {withHour.map((item, i) => {\n              const { fromTime, toTime } = item;\n              let spaceTime = null;\n              if (fromTime.asMinutes() - prevTime.asMinutes() >= 30) {\n                spaceTime = (\n                  <List.Item key={prevTime} className=\"Agenda--Row\">\n                    <Label\n                      as=\"a\"\n                      basic\n                      color=\"grey\"\n                      className=\"Agenda--TimeLabel\"\n                    >\n                      {durationToStr(prevTime)}-{durationToStr(fromTime)}\n                    </Label>\n                    {durationToStr(prevTime) === \"00:00\"\n                      ? BIG_PADDING\n                      : SMALL_PADDING}\n                  </List.Item>\n                );\n              }\n              prevTime = toTime || fromTime;\n              return (\n                <React.Fragment key={i}>\n                  {spaceTime}\n                  <List.Item className=\"Agenda--Row\">\n                    <Label\n                      as=\"a\"\n                      basic\n                      color={item.done ? \"olive\" : \"orange\"}\n                      className=\"Agenda--TimeLabel\"\n                    >\n                      {durationToStr(fromTime)}\n                      {toTime ? `-${durationToStr(toTime)}` : \"......\"}\n                    </Label>\n                    <Checkbox\n                      className=\"Agenda--Checkbox\"\n                      defaultChecked={item.done}\n                      onClick={() => {\n                        item.toggle();\n                        rerender();\n                      }}\n                    />\n                    <span\n                      className={classNames(\n                        \"Agenda--Checkbox--Label\",\n                        item.done && \"done\"\n                      )}\n                    >\n                      {item.text}\n                    </span>\n                  </List.Item>\n                </React.Fragment>\n              );\n            })}\n            {durationToStr(prevTime) !== \"23:59\" && (\n              <List.Item key=\"last\" className=\"Agenda--Row\">\n                <Label as=\"a\" basic color=\"grey\" className=\"Agenda--TimeLabel\">\n                  {durationToStr(prevTime)}-23:59\n                </Label>\n                <span>{BIG_PADDING}</span>\n              </List.Item>\n            )}\n          </List>\n        </Grid.Column>\n        <Grid.Column>\n          <Header\n            as=\"h2\"\n            content=\"Tasks for the day\"\n            subheader=\"Tasks that don't have specific time attached to them\"\n          />\n          <List selection>\n            {noHour.map((item, i) => (\n              <List.Item key={i} className=\"Agenda--Row\">\n                <Checkbox\n                  className=\"Agenda--Checkbox\"\n                  defaultChecked={item.done}\n                  onClick={() => {\n                    item.toggle();\n                    rerender();\n                  }}\n                />\n                <span\n                  className={classNames(\n                    \"Agenda--Checkbox--Label\",\n                    item.done && \"done\"\n                  )}\n                >\n                  {item.text}\n                </span>\n              </List.Item>\n            ))}\n          </List>\n        </Grid.Column>\n      </Grid>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Table, Icon, Label, Divider } from \"semantic-ui-react\";\n\nimport \"./CheatSheet.css\";\n\nconst FEATURES = [\n  [\n    \"heading\",\n    \"Heading 1-6\",\n    <div>\n      # Heading 1<br />\n      ## Heading 2<br />\n      ### Heading 3 <br />\n      #### Heading 4<br />\n      ##### Heading 5<br />\n      ###### Heading 6\n    </div>,\n    null\n  ],\n\n  [\"bold\", \"Bold text\", \"*text*\", \"CMD-B\"],\n  [\"italic\", \"Italic text\", \"/text/\", \"CMD-I\"],\n  [\"underline\", \"Underline text\", \"_text_\", \"CMD-U\"],\n  [\"strikethrough\", \"Strike-trough trext\", \"-text-\", \"CMD-E\"],\n  [\"pencil alternate\", \"Highlighted text\", \"`text`\", \"CMD-`\"],\n\n  [\n    \"list ol\",\n    \"Ordered list\",\n    <div>\n      1. First item <br /> 2. Second item\n    </div>,\n    null\n  ],\n  [\n    \"list ul\",\n    \"Bullet list\",\n    <div>\n      * First item <br />* Second item\n    </div>,\n    null\n  ],\n  [\n    \"tasks\",\n    \"Todo list\",\n    <div>\n      - Not completed item <br />\n      + Completed item <br />\n    </div>,\n    null\n  ],\n  [\"quote left\", \"Quote\", \"> Quote\", null],\n\n  [\"window minimize outline\", \"Horizontal line\", \"---\", null],\n  [\"hashtag\", \"Tag\", \"#tag\", null],\n  [\"linkify\", \"Link\", \"http://link.com/\", null],\n  [\"image\", \"Image\", \"[http://example.com/image.jpg]\", null],\n\n  [\"check square outline\", \"Checkbox\", \"[-]\", null],\n  [\"sort numeric up\", \"Counter\", \"[2]\", null],\n  [\"percent\", \"Quantity\", \"[1/10]\", null],\n  [\"stopwatch\", \"Duration\", \"1h10m20s\", null],\n  [\"calendar alternate outline\", \"Date and Time\", \"2019-02-23 11:30\", null],\n\n  [\n    \"code\",\n    \"Code block\",\n    <pre>{`\\`\\`\\`javascript\nvar a = 10;\nvar b = 20;\nalert(a + b);\n\\`\\`\\``}</pre>,\n    null\n  ],\n  [\n    \"th\",\n    \"Table\",\n    <pre>{`\n|--------|------------|--------|\n| *Name* |   *Email*  | *Date* |\n|--------|------------|--------|\n|   ivo  | ivo@abv.bg |        |\n|--------|------------|--------|`}</pre>,\n    \"Tab\"\n  ]\n];\n\nexport default function CheatSheet() {\n  return (\n    <div className=\"CheatSheet\">\n      <Table basic=\"very\">\n        <Table.Header>\n          <Table.Row>\n            <Table.HeaderCell>Feature</Table.HeaderCell>\n            <Table.HeaderCell>Pattern</Table.HeaderCell>\n            <Table.HeaderCell>Key-binding</Table.HeaderCell>\n          </Table.Row>\n        </Table.Header>\n\n        <Table.Body>\n          {FEATURES.map(([icon, title, pattern, keybinding], i) => (\n            <Table.Row key={`feature-${i}`} verticalAlign=\"top\">\n              <Table.Cell collapsing>\n                <Icon name={icon} /> {title}\n              </Table.Cell>\n              <Table.Cell>{pattern}</Table.Cell>\n              <Table.Cell>\n                {keybinding ? <Label basic>{keybinding}</Label> : \"\"}\n              </Table.Cell>\n            </Table.Row>\n          ))}\n        </Table.Body>\n      </Table>\n\n      <Divider />\n      <Table basic=\"very\">\n        <Table.Header>\n          <Table.Row>\n            <Table.HeaderCell>Snippets</Table.HeaderCell>\n            <Table.HeaderCell>Description</Table.HeaderCell>\n          </Table.Row>\n          <Table.Row verticalAlign=\"top\">\n            <Table.Cell collapsing>\n              <Icon name=\"calendar\" /> {\"<next friday at 12 am>|<today>\"}\n            </Table.Cell>\n            <Table.Cell>Input Date and Time</Table.Cell>\n          </Table.Row>\n          <Table.Row verticalAlign=\"top\">\n            <Table.Cell collapsing>\n              <Icon name=\"calendar\" /> {\"<calendar: 2019-01>|<calendar>\"}\n            </Table.Cell>\n            <Table.Cell>Input calendar for specified month</Table.Cell>\n          </Table.Row>\n        </Table.Header>\n      </Table>\n    </div>\n  );\n}\n","import {\n  joinPoint,\n  canJoin,\n  findWrapping,\n  liftTarget,\n  canSplit,\n  ReplaceAroundStep\n} from \"prosemirror-transform\";\nimport { Slice, Fragment } from \"prosemirror-model\";\nimport {\n  Selection,\n  TextSelection,\n  NodeSelection,\n  AllSelection,\n  SelectionRange\n} from \"prosemirror-state\";\n\nimport { showError } from \"../errors\";\nimport { getStorage } from \"../Storage\";\nimport { toVisibleSpaces, getTextContent } from \"../util\";\nimport { RepeatableDecorations, WholeNodeDecorations } from \"./decorations\";\n\n// =============================================================================\n// Lists repeating\n\nexport function splitBlockWithDecorations(state, dispatch) {\n  let { $from, $to } = state.selection;\n  if (\n    state.selection instanceof NodeSelection &&\n    state.selection.node.isBlock\n  ) {\n    if (!$from.parentOffset || !canSplit(state.doc, $from.pos)) return false;\n    if (dispatch) dispatch(state.tr.split($from.pos).scrollIntoView());\n    return true;\n  }\n\n  if (!$from.parent.isBlock) return false;\n\n  if (dispatch) {\n    let atEnd = $to.parentOffset == $to.parent.content.size;\n    let tr = state.tr;\n    if (state.selection instanceof TextSelection) tr.deleteSelection();\n    let deflt =\n      $from.depth == 0\n        ? null\n        : $from.node(-1).contentMatchAt($from.indexAfter(-1)).defaultType;\n    let types = atEnd && deflt ? [{ type: deflt }] : null;\n    let can = canSplit(tr.doc, tr.mapping.map($from.pos), 1, types);\n    if (\n      !types &&\n      !can &&\n      canSplit(tr.doc, tr.mapping.map($from.pos), 1, deflt && [{ type: deflt }])\n    ) {\n      types = [{ type: deflt }];\n      can = true;\n    }\n    if (can) {\n      tr.split(tr.mapping.map($from.pos), 1, types);\n      if (\n        !atEnd &&\n        !$from.parentOffset &&\n        $from.parent.type != deflt &&\n        $from\n          .node(-1)\n          .canReplace(\n            $from.index(-1),\n            $from.indexAfter(-1),\n            Fragment.from(deflt.create(), $from.parent)\n          )\n      )\n        tr.setNodeMarkup(tr.mapping.map($from.before()), deflt);\n    }\n\n    const textContent = getTextContent($from.parent);\n    Object.values(RepeatableDecorations).forEach(d => {\n      let match;\n      if (!(match = textContent.match(d))) {\n        return;\n      }\n\n      if (match[0] === textContent.trim()) {\n        tr.delete(\n          $from.pos - textContent.length,\n          $from.pos + textContent.length\n        );\n      } else {\n        let text = match[0];\n        if (match[0] == \"+\" || match[0] == \"-\") {\n          text = \"- \";\n        } else if (d === RepeatableDecorations.ordered) {\n          text = match[0].replace(/(?<=\\s*|^)\\d+/, v => v * 1 + 1);\n        }\n\n        tr.insertText(toVisibleSpaces(text + \" \"));\n      }\n    });\n\n    if (WholeNodeDecorations.tableRow.test(textContent)) {\n      tr.insertText(toVisibleSpaces(\"| \"));\n    }\n\n    dispatch(tr.scrollIntoView());\n  }\n  return true;\n}\n\n// =============================================================================\n// Tables\n\nexport function formatTable(state, dispatch, view) {\n  const { $from, to } = state.selection;\n  const same = $from.sharedDepth(to);\n  if (same == 0) return false;\n\n  const proseNode = $from.before(same);\n  const currentNode = view.nodeDOM(proseNode);\n  const domNodes = [currentNode];\n\n  if (!currentNode.classList.contains(\"tableRow\")) return false;\n\n  let next = currentNode;\n  while (\n    (next = next.nextElementSibling) &&\n    next.classList.contains(\"tableRow\")\n  ) {\n    domNodes.push(next);\n  }\n\n  let prev = currentNode;\n  while (\n    (prev = prev.previousElementSibling) &&\n    prev.classList.contains(\"tableRow\")\n  ) {\n    domNodes.unshift(prev);\n  }\n\n  const rows = domNodes.map(n => n.textContent);\n\n  const [result, nextSelectedRow, nextSelectedCell] = getFormattedTable(\n    rows,\n    domNodes.indexOf(currentNode),\n    $from.pos - proseNode - 1\n  );\n\n  domNodes.forEach((node, i) => {\n    const text = result[i].replace(new RegExp(\" \", \"g\"), `\\u00a0`); // &nbsp\n    const pos = view.posAtDOM(node);\n    const n = view.state.doc.nodeAt(pos);\n\n    const tr = view.state.tr.insertText(text, pos, pos + n.nodeSize);\n    if (i === nextSelectedRow) {\n      let posInCell = text\n        .split(\"|\")\n        .slice(0, nextSelectedCell + 2)\n        .join(\"|\")\n        .trim().length;\n\n      if (posInCell === 1) {\n        // Give some space if it is first empty cell.\n        posInCell = 2;\n      }\n\n      tr.setSelection(\n        TextSelection.create(tr.doc, pos + posInCell, pos + posInCell - 2)\n      );\n    }\n\n    dispatch(tr);\n  });\n}\n\nfunction getFormattedTable(rows, selectedRow, selectedChar) {\n  const isLineRow = row => row.slice(0, 2) === \"|-\";\n\n  const dataRows = rows\n    .filter(row => !isLineRow(row))\n    .map(row =>\n      row\n        .replace(/\\s\\s*/g, \" \")\n        .trim()\n        .split(\"|\")\n    );\n\n  const separatorRowsIdxs = rows\n    .map((row, i) => (isLineRow(row) ? i : null))\n    .filter(index => index !== null);\n\n  const maxCellsNum = Math.max(...dataRows.map(r => r.length));\n  const table = dataRows.map(row => {\n    const extraEmptyCells = \" \".repeat(maxCellsNum - row.length).split(\" \");\n    return [...row, ...extraEmptyCells];\n  });\n\n  for (let i = 0; i < maxCellsNum; i++) {\n    const maxWidth = Math.max(...table.map(row => row[i].length));\n    table.forEach(row => (row[i] = padBothToLength(row[i], maxWidth, \" \")));\n  }\n\n  const outputTable = table.map(\n    row => `| ${row.filter((c, i) => c !== \"\").join(\" | \")} |`\n  );\n\n  const lineRow = [...outputTable[0]].map(c => (c !== \"|\" ? \"-\" : c)).join(\"\");\n  separatorRowsIdxs.forEach(index => {\n    outputTable.splice(index, 0, lineRow);\n  });\n\n  const selectedCell =\n    rows[selectedRow].slice(0, selectedChar).split(\"|\").length - 2;\n  const resultCellsLength = outputTable[0].split(\"|\").length - 2;\n\n  let nextSelectedRow = selectedRow;\n  let nextSelectedCell = selectedCell + 1;\n\n  if (nextSelectedCell === resultCellsLength) {\n    nextSelectedCell = 0;\n    do {\n      nextSelectedRow += 1;\n    } while (separatorRowsIdxs.includes(nextSelectedRow));\n\n    if (!outputTable[nextSelectedRow]) {\n      nextSelectedRow = 0;\n    }\n  }\n\n  return [outputTable, nextSelectedRow, nextSelectedCell];\n}\n\nfunction padBothToLength(str, toLength, padStr = \" \") {\n  const fromLength = str.length;\n  const fromStart = Math.floor((toLength - fromLength) / 2);\n  const fromEnd = Math.ceil((toLength - fromLength) / 2);\n\n  return `${padStr.repeat(fromStart)}${str}${padStr.repeat(fromEnd)}`;\n}\n\n// =============================================================================\n// Headers navigation\n\nfunction selectHeader(prop, state, dispatch, view) {\n  const { $from, to } = state.selection;\n  const same = $from.sharedDepth(to);\n  if (same == 0) return false;\n\n  const proseNode = $from.before(same);\n  let currentNode = view.nodeDOM(proseNode);\n\n  while (!currentNode.parentNode.classList.contains(\"ProseMirror\")) {\n    currentNode = currentNode.parentNode;\n  }\n\n  let next = currentNode;\n  while ((next = next[prop])) {\n    if (next.classList.contains(\"heading\")) {\n      next.scrollIntoView({\n        block: \"start\",\n        inline: \"nearest\",\n        behavior: \"smooth\"\n      });\n      const pos = view.posAtDOM(next);\n      let offset = 0;\n      if (next.classList.contains(\"heading-1\")) offset = 1;\n      else if (next.classList.contains(\"heading-2\")) offset = 2;\n      else if (next.classList.contains(\"heading-3\")) offset = 3;\n      else if (next.classList.contains(\"heading-4\")) offset = 4;\n      else if (next.classList.contains(\"heading-4\")) offset = 4;\n      dispatch(\n        view.state.tr.setSelection(\n          Selection.near(view.state.doc.resolve(pos + offset))\n        )\n      );\n      return true;\n    }\n  }\n}\n\nexport function selectNextHeader(...args) {\n  return selectHeader(\"nextElementSibling\", ...args);\n}\n\nexport function selectPrevHeader(...args) {\n  return selectHeader(\"previousElementSibling\", ...args);\n}\n\n// =============================================================================\n// Files\n\nexport function insertImage(view) {\n  return uploadFile(view.state, view.dispatch, view);\n}\n\nexport function uploadFile(state, dispatch, view) {\n  const input = document.createElement(\"input\");\n  input.type = \"file\";\n  input.addEventListener(\"change\", () => {\n    const images = Array.from(input.files).filter(file =>\n      /image/i.test(file.type)\n    );\n    if (images.length === 0) {\n      // TODO: Show error that only images are supported.\n      // TODO: Show error on wrong filessize;\n      return;\n    }\n\n    getStorage()\n      .uploadFile(images[0])\n      .then(url => {\n        dispatch(state.tr.insertText(` [${url}] `).scrollIntoView());\n      })\n      .catch(err => {\n        showError(err);\n      });\n  });\n  input.click();\n\n  return true;\n}\n\n// =============================================================================\n// Insert\n\nexport function showHelp() {\n  document.querySelector(\"#prose-show-help\").click();\n}\nexport function showStats() {\n  document.querySelector(\"#prose-show-stats\").click();\n}\nexport function showSlides() {\n  document.querySelector(\"#prose-show-slides\").click();\n}\nexport function showAgenda() {\n  document.querySelector(\"#prose-show-agenda\").click();\n}\nexport function showEditor() {\n  document.querySelector(\"#prose-show-editor\").click();\n}\n\nconst isWithinNode = (className, state, view) => {\n  const { $from, to } = state.selection;\n  const same = $from.sharedDepth(to);\n  if (same == 0) return false;\n\n  const proseNode = $from.before(same);\n  const currentNode = view.nodeDOM(proseNode);\n  return currentNode.classList.contains(className) && currentNode;\n};\n\nexport function insertTable() {}\nexport function insertLink() {}\nexport function insertCode(_, dispatch, view) {\n  dispatch(view.tr.insertText(\"```\"));\n  dispatch(view.tr.insertText(\"\"));\n  dispatch(view.tr.insertText(\"```\"));\n}\nexport function insertQuote(view) {\n  // state.tr.replaceSelectionWith(br.create()).scrollIntoView()\n  // view.state.tr.insertText(toVisibleSpaces(\"> \")).scrollIntoView()\n  const { schema } = view.state;\n  debugger;\n  view.dispatch(\n    view.state.tr\n      .replaceSelectionWith(\n        schema.nodes.paragraph.create(null, schema.text(toVisibleSpaces(\"> \")))\n      )\n      .scrollIntoView()\n  );\n}\nexport function insertCounter(view) {\n  view.dispatch(\n    view.state.tr.insertText(toVisibleSpaces(\"[0]\")).scrollIntoView()\n  );\n}\nexport function insertQuantity(view) {\n  view.dispatch(\n    view.state.tr.insertText(toVisibleSpaces(\"[0/10]\")).scrollIntoView()\n  );\n}\n\n// =============================================================================\n// Duration\n\nconst clickDurationButton = (state, view) => {\n  const { $from, to } = state.selection;\n  const same = $from.sharedDepth(to);\n  if (same == 0) return false;\n\n  const proseNode = $from.before(same);\n  const currentNode = view.nodeDOM(proseNode);\n\n  const durationButton = currentNode.querySelector(\".duration--button\");\n  if (!durationButton) return false;\n  durationButton.click();\n  return true;\n};\nexport function durationStart(state, dispatch, view) {\n  if (clickDurationButton(state, view)) {\n    document.querySelector(\"#duration--countdown\").click();\n    return true;\n  }\n  return false;\n}\nexport function durationContinue(state, dispatch, view) {\n  if (clickDurationButton(state, view)) {\n    document.querySelector(\"#duration--continue\").click();\n    return true;\n  }\n  return false;\n}\nexport function durationDouble(state, dispatch, view) {\n  if (clickDurationButton(state, view)) {\n    document.querySelector(\"#duration--double\").click();\n    return true;\n  }\n  return false;\n}\n\n// =============================================================================\n// Date\n\n// TODO: multiple dates in the same node\n// TODO: in todo item\nexport function dateSelect(state, dispatch, view) {\n  const { $from, to } = state.selection;\n  const same = $from.sharedDepth(to);\n  if (same == 0) return false;\n\n  const proseNode = $from.before(same);\n  const currentNode = view.nodeDOM(proseNode);\n\n  const dateButton = currentNode.querySelector(\".date--button\");\n  if (!dateButton) return false;\n  dateButton.click();\n  return true;\n}\n\n// =============================================================================\n// Todo\n\nconst getTodoIndicatorNode = (state, view) => {\n  const { $from, to } = state.selection;\n  const same = $from.sharedDepth(to);\n  if (same == 0) return false;\n\n  const proseNode = $from.before(same);\n  let currentNode = view.nodeDOM(proseNode);\n  if (!currentNode.querySelector(\".todo\")) return false;\n\n  while (\n    currentNode.querySelector(\".todo\") &&\n    !currentNode.querySelector(\".todo-indicator\")\n  ) {\n    currentNode = currentNode.previousElementSibling;\n  }\n\n  return currentNode.querySelector(\".todo\") ? currentNode : false;\n};\n\nexport function todoReset(state, dispatch, view) {\n  const node = getTodoIndicatorNode(state, view);\n  if (!node) return false;\n\n  node.querySelector(\"[data-value=reset]\").click();\n  return true;\n}\nexport function todoPlay(state, dispatch, view) {\n  const node = getTodoIndicatorNode(state, view);\n  if (!node) return false;\n\n  node.querySelector(\"[data-value=play]\").click();\n  return true;\n}\nexport function todoClearCompleted(state, dispatch, view) {\n  const node = getTodoIndicatorNode(state, view);\n  if (!node) return false;\n\n  node.querySelector(\"[data-value=delete_completed]\").click();\n  return true;\n}\nexport function todoClearUnfinished(state, dispatch, view) {\n  const node = getTodoIndicatorNode(state, view);\n  if (!node) return false;\n\n  node.querySelector(\"[data-value=delete_unfinished]\").click();\n  return true;\n}\n\n// =============================================================================\n// Counter\n\nexport function counterInc() {}\nexport function counterDec() {}\n\n// =============================================================================\n// Foldable\n\nexport function foldedToggle() {}\n","import React from \"react\";\nimport Mousetrap from \"mousetrap\";\nimport { Icon, Menu, Dropdown } from \"semantic-ui-react\";\n\nimport {\n  insertQuote,\n  insertCounter,\n  insertQuantity,\n  showHelp,\n  showStats,\n  showSlides,\n  showAgenda,\n  showEditor,\n  insertImage\n} from \"./commands\";\n\nimport \"./CommandsMenu.css\";\n\nMousetrap.bind(\"ctrl+1\", showEditor);\nMousetrap.bind(\"ctrl+2\", showAgenda);\nMousetrap.bind(\"ctrl+3\", showSlides);\nMousetrap.bind(\"ctrl+4\", showStats);\nMousetrap.bind(\"ctrl+5\", showHelp);\n\nexport default function CommandsMenu({ disabled, getView }) {\n  // const subscription = props.source.subscribe();\n  // return () => {\n  //   // Clean up the subscription\n  //   subscription.unsubscribe();\n  // };\n\n  const items = [\n    [\"file\", \"Image\", insertImage, false],\n    [\"linkify\", \"Link\", () => {}, true],\n    [\"code\", \"Code\", () => {}, true],\n    [\"quote left\", \"Quote\", insertQuote, false],\n    [\"th\", \"Table\", () => {}, true],\n    [\"sort numeric up\", \"Counter\", insertCounter, false],\n    [\"percent\", \"Quantity\", insertQuantity, false]\n  ];\n  return (\n    <Dropdown\n      item\n      icon={null}\n      floated=\"right\"\n      disabled={disabled}\n      trigger={\n        <>\n          <Icon name=\"code\" /> Commands\n        </>\n      }\n      className=\"link\"\n      as=\"a\"\n    >\n      <Dropdown.Menu className=\"CommandsMenu\">\n        <Dropdown.Header>Insert</Dropdown.Header>\n        {items.map(([icon, text, onClick, disabled], key) => (\n          <Dropdown.Item\n            {...{\n              key,\n              icon,\n              text,\n              disabled,\n              onClick: () => {\n                const v = getView();\n                v.focus();\n                onClick(v);\n              }\n            }}\n          />\n        ))}\n        <Dropdown.Divider />\n        <Dropdown.Header>Format</Dropdown.Header>\n        <Dropdown.Item\n          icon=\"arrows alternate vertical\"\n          text=\"Fold Selection\"\n          disabled\n        />\n\n        <Dropdown.Header>View</Dropdown.Header>\n        <Dropdown.Item\n          icon=\"file alternate outline\"\n          text=\"Show Editor\"\n          description=\"ctrl + 1\"\n          onClick={showEditor}\n        />\n        <Dropdown.Item\n          icon=\"clipboard list\"\n          text=\"Show Agenda\"\n          description=\"ctrl + 2\"\n          onClick={showAgenda}\n        />\n        <Dropdown.Item\n          icon=\"chart line\"\n          text=\"Show Stats\"\n          description=\"ctrl + 3\"\n          onClick={showStats}\n        />\n        <Dropdown.Item\n          icon=\"help\"\n          text=\"Show Help\"\n          description=\"ctrl + 4\"\n          onClick={showHelp}\n        />\n        <Dropdown.Item\n          disabled\n          icon=\"share square\"\n          text=\"Show Preview\"\n          description=\"ctrl + shift + p\"\n          onClick={\n            /* TODO: generate preview */\n            () => alert(\"TODO: generate preview\")\n          }\n        />\n      </Dropdown.Menu>\n    </Dropdown>\n  );\n}\n","import chrono from \"chrono-node\";\n\nimport { Schema, Fragment } from \"prosemirror-model\";\n\nimport { keymap } from \"prosemirror-keymap\";\nimport { gapCursor } from \"prosemirror-gapcursor\";\nimport { dropCursor } from \"prosemirror-dropcursor\";\nimport { history, undo, redo } from \"prosemirror-history\";\nimport {\n  selectParentNode,\n  baseKeymap,\n  chainCommands\n} from \"prosemirror-commands\";\n\nimport { InputRule, inputRules } from \"prosemirror-inputrules\";\n\nimport decorations from \"./decorations\";\nimport {\n  formatDate,\n  getZeroBasedNum,\n  getDaysInMonthByWeeks,\n  monthNumToName\n} from \"../util\";\nimport {\n  splitBlockWithDecorations,\n  selectNextHeader,\n  selectPrevHeader,\n  formatTable,\n\n  // View\n  showHelp,\n  showStats,\n  showSlides,\n  showAgenda,\n  showEditor,\n\n  // Todo\n  todoReset,\n  todoPlay,\n  todoClearCompleted,\n\n  // Date\n  dateSelect,\n\n  // Duration\n  durationStart,\n  durationContinue,\n  durationDouble,\n\n  // Files\n  uploadFile\n} from \"./commands\";\n\n// =============================================================================\n// Schema\n\nexport const schema = new Schema({\n  nodes: {\n    doc: {\n      content: \"block+\"\n    },\n\n    paragraph: {\n      content: \"inline*\",\n      group: \"block\",\n      parseDOM: [{ tag: \"p\" }],\n      toDOM() {\n        return [\"p\", 0];\n      }\n    },\n\n    text: {\n      group: \"inline\",\n      toDOM(node) {\n        return node.text;\n      }\n    },\n\n    hard_break: {\n      inline: true,\n      group: \"inline\",\n      selectable: false,\n      parseDOM: [{ tag: \"br\" }],\n      toDOM: () => [\"br\"]\n    }\n  }\n});\n\n// =============================================================================\n// Plugins\n\nconst INPUT_RULES = (function() {\n  let rules = [\n    new InputRule(/<calendar:?(\\s\\d\\d\\d\\d-\\d\\d?)?>/, function(\n      state,\n      match,\n      start,\n      end\n    ) {\n      const { paragraph } = state.schema.nodes;\n      const today = match[1] ? new Date(...match[1].split(\"-\"), 0) : new Date();\n\n      const nodes = Fragment.from([\n        paragraph.create(\n          null,\n          schema.text(\n            `*${monthNumToName[today.getMonth()]} ${today.getFullYear()}*`\n          )\n        ),\n        paragraph.create(\n          null,\n          schema.text(\n            \"|---------|---------|---------|---------|---------|---------|---------|\"\n          )\n        ),\n        paragraph.create(\n          null,\n          schema.text(\n            \"|  *Mon*  |  *Tue*  |  *Wed*  |  *Thu*  |  *Fri*  |  *Sat*  |  *Sun*  |\"\n          )\n        ),\n        paragraph.create(\n          null,\n          schema.text(\n            \"|---------|---------|---------|---------|---------|---------|---------|\"\n          )\n        ),\n        ...getDaysInMonthByWeeks(\n          today.getMonth(),\n          today.getFullYear()\n        ).map(week =>\n          paragraph.create(\n            null,\n            state.schema.text(\n              \"| \" +\n                week\n                  .map(d =>\n                    d ? `   ${getZeroBasedNum(d.getDate())}   ` : \"        \"\n                  )\n                  .join(\"| \") +\n                \"|\"\n            )\n          )\n        ),\n        paragraph.create(\n          null,\n          schema.text(\n            \"|---------|---------|---------|---------|---------|---------|---------|\"\n          )\n        )\n      ]);\n\n      return state.tr.replaceWith(start, end, nodes);\n    }),\n    new InputRule(/<[^>]+>/, function(state, match, start, end) {\n      const parsed = chrono.parse(match[0])[0];\n      if (!parsed || parsed.index !== 1) {\n        return null;\n      }\n\n      let insert = chrono.parseDate(match[0]);\n      insert = formatDate(insert);\n\n      return state.tr.insertText(insert, start, end);\n    })\n  ];\n\n  return inputRules({ rules });\n})();\n\n// =============================================================================\n// Plugins\n\nexport const plugins = [\n  INPUT_RULES,\n\n  history(),\n  dropCursor(),\n  gapCursor(),\n\n  keymap({\n    \"Mod-z\": undo,\n    \"Shift-Mod-z\": redo,\n    \"Mod-i\": selectParentNode, // TODO: use it to kill row\n\n    \"Shift-Enter\": baseKeymap[\"Enter\"],\n    \"Ctrl-Enter\": baseKeymap[\"Enter\"], // TODO: add table row\n    // Ctrl-l -> clone line\n\n    Tab: formatTable,\n    Enter: splitBlockWithDecorations,\n\n    \"Ctrl-1\": showEditor,\n    \"Ctrl-2\": showAgenda,\n    \"Ctrl-3\": showSlides,\n    \"Ctrl-4\": showStats,\n    \"Ctrl-5\": showHelp,\n\n    \"Ctrl-r\": todoReset,\n    \"Ctrl-Shift-r\": todoClearCompleted,\n\n    \"Ctrl-u\": uploadFile,\n\n    ...(/Mac/.test(navigator.platform)\n      ? {\n          \"Mod-Enter\": chainCommands(\n            todoPlay,\n            dateSelect,\n            durationStart,\n            baseKeymap[\"Enter\"]\n          ),\n          \"Mod-Shift-Enter\": durationContinue,\n          \"Mod-Shift-8\": durationDouble,\n          \"Mod-ArrowDown\": selectNextHeader,\n          \"Mod-ArrowUp\": selectPrevHeader\n        }\n      : {\n          \"Ctrl-y\": redo,\n          \"Ctrl-ArrowDown\": selectNextHeader,\n          \"Ctrl-ArrowUp\": selectPrevHeader\n        })\n  }),\n  keymap(baseKeymap),\n\n  decorations\n];\n","import React, { createRef } from \"react\";\nimport { EditorView } from \"prosemirror-view\";\nimport { EditorState } from \"prosemirror-state\";\nimport { Icon, Menu, Segment, Ref, Sticky, Dropdown } from \"semantic-ui-react\";\n\nimport Stats from \"../Stats/Stats\";\nimport Slides from \"../Slides/Slides\";\nimport Agenda from \"../Agenda/Agenda\";\nimport CheatSheet from \"../CheatSheet/CheatSheet\";\nimport CommandsMenu from \"./CommandsMenu\";\n\nimport { showError } from \"../errors\";\nimport { getStorage } from \"../Storage\";\nimport { parseTodoNode } from \"../util\";\nimport { schema, plugins } from \"./setup\";\nimport { decorationsHandlers } from \"./decorations\";\n\nimport \"./Editor.css\";\n\n// This is used as part of the Prose element key. If you\n// increment it and re-render <Editor>, Prose will remount.\nlet __remountKey = 0;\n\nconst EDITOR_SHOWN = \"EDITOR_SHOWN\";\nconst HELP_SHOWN = \"HELP_SHOWN\";\nconst AGENDA_SHOWN = \"AGENDA_SHOWN\";\nconst STATS_SHOWN = \"STATS_SHOWN\";\nconst SLIDES_SHOWN = \"SLIDES_SHOWN\";\n\nclass Editor extends React.Component {\n  _componentElementRef = createRef();\n  _stickyMenuContextRef = createRef();\n\n  constructor(props) {\n    super(props);\n\n    const store = getStorage();\n\n    this._editorNode = null;\n    this._editorView = null;\n    this._editorState = null;\n\n    this.state = {\n      shown: EDITOR_SHOWN,\n      uploading: false,\n      note: store.getSelectedNote()\n    };\n\n    this.rerender = this.forceUpdate.bind(this);\n    this.storeUnsubscribe = store.subscribe(meta => {\n      const selected = store.getSelectedNote();\n\n      // Server updates should remount Prose in order to show\n      // updated state.\n      if (meta && meta.isServer) {\n        console.count(\"EDITOR_REMOUNT\"); // TODO: Prevent initial remount.\n\n        __remountKey++;\n        this.setState({ note: selected });\n        return;\n      }\n\n      if (this.state.note.id !== selected.id) {\n        this.setState({\n          note: selected,\n          shown: EDITOR_SHOWN\n        });\n      }\n    });\n  }\n\n  componentDidMount() {\n    const elm = this._componentElementRef.current;\n    elm.addEventListener(\"drop\", this.handleDrop, false);\n    elm.addEventListener(\"click\", this.handleClick, false);\n    elm.addEventListener(\"keyup\", this.handleCTRLUp, false);\n    elm.addEventListener(\"keydown\", this.handleCTRLDown, false);\n  }\n\n  componentWillUnmount() {\n    if (this._editorView) {\n      this._editorView.destroy();\n    }\n\n    const elm = this._componentElementRef.current;\n    elm.removeEventListener(\"drop\", this.handleDrop);\n    elm.removeEventListener(\"click\", this.handleClick);\n    elm.removeEventListener(\"keyup\", this.handleCTRLUp);\n    elm.removeEventListener(\"keydown\", this.handleCTRLDown);\n\n    this.storeUnsubscribe();\n  }\n\n  _createEditorView = element => {\n    if (element != null) {\n      this._editorNode = element;\n      const store = getStorage();\n      const { note } = this.state;\n      const content = store.getSelectedNoteContent();\n\n      this._editorState =\n        // NOTE: If content is an empty Object just create a new one.\n        content && Object.keys(content).length > 0\n          ? EditorState.fromJSON(\n              {\n                schema,\n                plugins\n              },\n              content\n            )\n          : EditorState.create({\n              schema,\n              plugins\n            });\n\n      this._editorView = new EditorView(element, {\n        state: this._editorState,\n        dispatchTransaction: tx => {\n          this._editorState = this._editorState.apply(tx);\n          this._editorView.updateState(this._editorState);\n\n          if (!tx.docChanged) return;\n\n          store.updateNote(\n            this.state.note.id,\n            // TODO: Delay these to the actual\n            // saving to improve performance.\n            {\n              meta: {\n                title: this.getTitle(),\n                tags: this.getTags(),\n                todos: this.getTodos().map(t => t.toJSON()),\n                images: this.getImages(),\n                summary: this.getSummary(),\n                highlights: this.getHighlights()\n              }\n            },\n            this._editorState.toJSON()\n          );\n        }\n      });\n\n      this.onFocus();\n    }\n  };\n\n  // ===========================================================================\n  // Handlers\n\n  handleCTRLDown = e => {\n    // Prevent default tab behavior.\n    if (e.keyCode === 9) {\n      e.preventDefault();\n      return;\n    }\n\n    // Allow clicking links when pressing control.\n    if (e.keyCode === 91) {\n      [...document.querySelectorAll(\"a\")].forEach(\n        a => (a.contentEditable = false)\n      );\n    }\n  };\n\n  handleCTRLUp = e => {\n    if (e.keyCode === 91) {\n      [...document.querySelectorAll(\"a\")].forEach(\n        a => (a.contentEditable = true)\n      );\n    }\n  };\n\n  handleClick = e => {\n    Object.keys(decorationsHandlers).forEach(className => {\n      if (e.target.classList.contains(className)) {\n        decorationsHandlers[className](e, e.target, this._editorView);\n      }\n    });\n  };\n\n  handleDrop = e => {\n    if (\n      !(\n        e.dataTransfer &&\n        e.dataTransfer.files &&\n        e.dataTransfer.files.length > 0\n      )\n    )\n      return;\n\n    const images = Array.from(e.dataTransfer.files).filter(file =>\n      /image/i.test(file.type)\n    );\n    if (images.length === 0) {\n      // TODO: Show error that only images are supported.\n      // TODO: Show error on wrong filessize;\n      return;\n    }\n\n    e.preventDefault();\n    this.setState({ uploading: true });\n\n    getStorage()\n      .uploadFile(images[0])\n      .then(url => {\n        this._editorView.dispatch(\n          this._editorView.state.tr.insertText(` [${url}] `).scrollIntoView()\n        );\n        this.setState({ uploading: false });\n      })\n      .catch(err => {\n        showError(err);\n        this.setState({ uploading: false });\n      });\n  };\n\n  // ===========================================================================\n  // Commands\n\n  getTitle() {\n    const heading =\n      this._editorNode && this._editorNode.querySelector(\".heading\");\n    return heading\n      ? heading.lastChild.textContent.trim().replace(/#+/g, \"\")\n      : \"--\";\n  }\n\n  getTodos() {\n    return (\n      this._editorNode &&\n      [...this._editorNode.querySelectorAll(\".todo\")]\n        .map(n => n.parentNode)\n        .map(n => parseTodoNode(n))\n    );\n  }\n\n  getImages() {\n    return (\n      this._editorNode &&\n      [...this._editorNode.querySelectorAll(\".img-text\")].map(n =>\n        n.textContent.trim().slice(1, -1)\n      )\n    );\n  }\n\n  getTags() {\n    const tags = this._editorNode && this._editorNode.querySelectorAll(\".tag\");\n    return tags ? [...tags].map(t => t.textContent.slice(1)) : [];\n  }\n\n  getSummary() {\n    return (\n      this._editorNode &&\n      Array.from(\n        this._editorNode.querySelectorAll(\n          \".ProseMirror > p:not(.ProseMirror-widget):nth-of-type(-n+5)\"\n        )\n      )\n        .map(p => p.innerText)\n        .join(\" \")\n        .replace(/\\.\\.\\./g, \"\")\n        .slice(0, 100)\n    );\n  }\n\n  getHighlights() {\n    return (\n      this._editorNode &&\n      Array.from(this._editorNode.querySelectorAll(\".highlight\")).map(p =>\n        p.innerText.slice(1, -1)\n      )\n    );\n  }\n\n  getTextContent = () => {\n    const editor = this._editorNode\n      .querySelector(\".ProseMirror\")\n      .cloneNode(true);\n\n    editor\n      .querySelectorAll(\".ProseMirror-widget\")\n      .forEach(w => w.parentNode.removeChild(w));\n\n    return Array.from(editor.childNodes)\n      .map((n, i) =>\n        /H\\d/i.test(n.tagName) && !!i ? `\\n${n.textContent}\\n` : n.textContent\n      )\n      .join(\"\\n\")\n      .replace(new RegExp(\" \", \"g\"), \" \");\n  };\n\n  // ===========================================================================\n  // Handlers\n\n  toggleMenuItem = item => {\n    this._editorNode.parentNode.scrollTo({\n      top: 0,\n      behavior: \"smooth\"\n    });\n    this.setState({ shown: item });\n  };\n  showEditor = () => this.toggleMenuItem(EDITOR_SHOWN);\n  toggleHelp = () => this.toggleMenuItem(HELP_SHOWN);\n  toggleStats = () => this.toggleMenuItem(STATS_SHOWN);\n  toggleSlides = () => this.toggleMenuItem(SLIDES_SHOWN);\n  toggleAgenda = () => this.toggleMenuItem(AGENDA_SHOWN);\n\n  // TODO: Example of commands for menu or something\n  onFocus() {\n    if (this._editorView) {\n      this._editorView.focus();\n    }\n  }\n\n  // ===========================================================================\n  // Rendering\n\n  renderHelp() {\n    return (\n      <div className=\"Editor--help\">\n        <CheatSheet />\n      </div>\n    );\n  }\n\n  renderMenu() {\n    const { shown } = this.state;\n    return (\n      <Sticky context={this._stickyMenuContextRef}>\n        <div className=\"Editor--menu\">\n          <Menu icon=\"labeled\" stackable>\n            <Menu.Item\n              name=\"file alternate outline\"\n              active={shown === EDITOR_SHOWN}\n              onClick={this.showEditor}\n              id=\"prose-show-editor\"\n            >\n              <Icon name=\"file alternate outline\" />\n              Editor\n            </Menu.Item>\n            <Menu.Item\n              name=\"clipboard list\"\n              active={shown === AGENDA_SHOWN}\n              onClick={this.toggleAgenda}\n              id=\"prose-show-agenda\"\n            >\n              <Icon name=\"clipboard list\" />\n              Agenda\n            </Menu.Item>\n\n            <Menu.Item\n              name=\"tv\"\n              active={shown === SLIDES_SHOWN}\n              onClick={this.toggleSlides}\n              id=\"prose-show-slides\"\n            >\n              <Icon name=\"tv\" />\n              Slides\n            </Menu.Item>\n\n            <Menu.Item\n              name=\"chart line\"\n              active={shown === STATS_SHOWN}\n              onClick={this.toggleStats}\n              id=\"prose-show-stats\"\n            >\n              <Icon name=\"chart line\" />\n              Stats\n            </Menu.Item>\n\n            <Menu.Item\n              name=\"help\"\n              active={shown === HELP_SHOWN}\n              onClick={this.toggleHelp}\n              id=\"prose-show-help\"\n            >\n              <Icon name=\"help\" />\n              Help\n            </Menu.Item>\n\n            <Menu.Menu position=\"right\">\n              <CommandsMenu\n                getView={() => this._editorView}\n                disabled={shown !== EDITOR_SHOWN}\n              />\n            </Menu.Menu>\n          </Menu>\n        </div>\n      </Sticky>\n    );\n  }\n\n  render() {\n    const { note, shown, uploading } = this.state;\n\n    return (\n      <Ref innerRef={this._stickyMenuContextRef}>\n        <div className=\"Editor\" ref={this._componentElementRef}>\n          {this.renderMenu()}\n          {uploading && <div className=\"Editor--Uploading\">Loading....</div>}\n          {shown === STATS_SHOWN && (\n            <Stats\n              todos={this.getTodos()}\n              getTextContent={this.getTextContent}\n            />\n          )}\n          {shown === AGENDA_SHOWN && (\n            <Agenda todos={this.getTodos()} rerender={this.rerender} />\n          )}\n          {shown === HELP_SHOWN && this.renderHelp()}\n          {shown === SLIDES_SHOWN && <Slides editor={this._editorNode} />}\n          <div\n            className=\"EditorWrapper\"\n            key={note.id + __remountKey}\n            ref={this._createEditorView}\n            style={shown === EDITOR_SHOWN ? {} : { display: \"none\" }}\n          />\n        </div>\n      </Ref>\n    );\n  }\n}\n\nexport default Editor;\n","import React, { Component } from \"react\";\nimport { Sidebar, Segment, Icon } from \"semantic-ui-react\";\nimport PropTypes from \"prop-types\";\nimport { Menu } from \"semantic-ui-react\";\n\nimport SideMenu from \"./Menu/Menu\";\nimport Editor from \"./Editor/Editor.js\";\n\nimport \"./App.css\";\n\nclass App extends Component {\n  static propTypes = {\n    firebase: PropTypes.object.isRequired\n  };\n\n  state = { visible: true };\n\n  render() {\n    const { visible } = this.state;\n    const { firebase } = this.props;\n    return (\n      <>\n        {visible === false && (\n          <Menu className=\"Menu--Trigger\" compact icon size=\"tiny\">\n            <Menu.Item\n              name=\"caret square left\"\n              onClick={() => {\n                document.querySelector(\"#pushable\").scrollTo({\n                  top: 0,\n                  behavior: \"smooth\"\n                });\n                this.setState({ visible: !visible });\n              }}\n            >\n              <Icon name=\"caret square right\" />\n            </Menu.Item>\n          </Menu>\n        )}\n        <Sidebar.Pushable id=\"pushable\">\n          <SideMenu\n            visible={visible}\n            onToggle={() => this.setState({ visible: !visible })}\n            firebase={firebase}\n          />\n\n          <Sidebar.Pusher dimmed={visible}>\n            <Editor />\n          </Sidebar.Pusher>\n        </Sidebar.Pushable>\n      </>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport * as firebase from \"firebase/app\";\nimport * as firebaseui from \"firebaseui\";\nimport \"firebase/analytics\";\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\nimport \"firebase/storage\";\n\nimport App from \"./App\";\nimport { createStorage, getStorage } from \"./Storage\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nimport \"semantic-ui-css/semantic.min.css\";\nimport \"./index.css\";\n\nwindow._firebase = firebase;\nif (process.env.NODE_ENV !== \"development\") {\n  console.debug = () => {};\n  console.count = () => {};\n\n  delete window._firebase;\n}\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyBhVeDAZGXGaNZmPz0u4NSajNR9jhSZXMk\",\n  authDomain: \"prose-app.firebaseapp.com\",\n  databaseURL: \"https://prose-app.firebaseio.com\",\n  projectId: \"prose-app\",\n  storageBucket: \"prose-app.appspot.com\",\n  messagingSenderId: \"383371015272\",\n  appId: \"1:383371015272:web:549a0ff32e65d9062a77dd\",\n  measurementId: \"G-5GV4HX47QL\"\n};\n// Initialize Firebase\nfirebase.initializeApp(firebaseConfig);\nfirebase.analytics();\n\nconst uiConfig = {\n  // Providers setup\n  signInOptions: [\n    {\n      provider: firebase.auth.GoogleAuthProvider.PROVIDER_ID,\n      // Required to enable this provider in one-tap sign-up.\n      // authMethod: 'https://accounts.google.com',\n      scopes: [\"https://www.googleapis.com/auth/contacts.readonly\"],\n      customParameters: {\n        // Forces account selection even when one account\n        // is available.\n        prompt: \"select_account\"\n      }\n    },\n    {\n      provider: firebase.auth.EmailAuthProvider.PROVIDER_ID,\n      requireDisplayName: true\n    }\n  ],\n\n  // Will use popup for IDP Providers sign-in flow instead of the default, redirect.\n  signInFlow: \"popup\",\n\n  // Terms of service url/callback.\n  tosUrl: () => alert(\"TODO: Terms of service.\"),\n  // Privacy policy url/callback.\n  privacyPolicyUrl: () => alert(\"TODO: PrivacyPolicy\"),\n\n  credentialHelper: firebaseui.auth.CredentialHelper.NONE,\n\n  callbacks: {\n    // signInSuccess: () => false\n    signInSuccessWithAuthResult: function(authResult, redirectUrl) {\n      return false;\n    }\n  }\n};\n\nfirebase.auth().onAuthStateChanged(user => {\n  const container = document.getElementById(\"root\");\n  if (user) {\n    createStorage(firebase, () => {\n      container.innerHTML = \"\";\n      ReactDOM.render(<App firebase={firebase} />, container);\n    });\n\n    window.Store = getStorage();\n  } else {\n    // Initialize the FirebaseUI Widget using Firebase.\n    const initUI = () => {\n      const ui = new firebaseui.auth.AuthUI(firebase.auth());\n      // The start method will wait until the DOM is loaded.\n      container.innerHTML = \"\";\n      ui.start(\"#root\", uiConfig);\n    };\n\n    ReactDOM.unmountComponentAtNode(container);\n    const prevUI = firebaseui.auth.AuthUI.getInstance();\n    if (prevUI) {\n      prevUI.delete().then(initUI);\n    } else {\n      initUI();\n    }\n  }\n});\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}